(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{584:function(t,e,r){"use strict";r.r(e);var s=r(15),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"外网访问的url"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#外网访问的url"}},[t._v("#")]),t._v(" 外网访问的url")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v(" xxxxx:8080/demo\n")])])]),r("h2",{attrs:{id:"nginx代理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nginx代理"}},[t._v("#")]),t._v(" nginx代理")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("server {\n\t   listen       8080;\n\t   server_name  localhost;\n\t  location /demo{\n\t       proxy_pass http://localhost:9090;\n\t   }\n}\n")])])]),r("hr"),t._v(" "),r("h2",{attrs:{id:"问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),r("p",[t._v("如果你的项目里面有内部重定向到login，比如shiro，或者你自己 redirect 一个路径。你在浏览器上会发现你的路径此时变成了  \t"),r("em",[t._v("xxxxx/demo/login")]),t._v(" ，而不是我们想要的 "),r("em",[t._v("xxxxx:8080/demo/login")]),t._v("\n百度搜索到的答案都是让你把nginx配置成这样")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("server {\n\t    listen       8080;\n\t    server_name  localhost;\n\t    \n\t\tproxy_set_header X-Forwarded-Host $host;\n\t\tproxy_set_header X-Forwarded-Server $host;\n\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\tproxy_set_header Host $host:$server_port;\n\t\tlocation /demo{\n\t       proxy_pass http://localhost:9090;\n\t   }\n}\n")])])]),r("p",[t._v("但是我在使用中发现这样并没有效果，也不知道这个配法从哪流传出来的。\n实际上这个配置是对的 但是位置不对")]),t._v(" "),r("p",[t._v("配置文件应该是这样子的")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v("server {\n\t    listen       8080;\n\t    server_name  localhost;\n\n\t\tlocation /demo{\n\t       proxy_pass http://localhost:9090;\n\t       \n\t\t   proxy_set_header Referer $http_referer;\n    \t   proxy_set_header Host $host:9000;\n\t   }\t\n}\n")])])]),r("p",[t._v("这样写 外网的端口被写死了 还没找出可以动态的配法 不过可以临时顶用")])])}),[],!1,null,null,null);e.default=a.exports}}]);