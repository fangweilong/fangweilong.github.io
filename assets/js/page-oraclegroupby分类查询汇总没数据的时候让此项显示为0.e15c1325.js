(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{868:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-表数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-表数据"}},[t._v("#")]),t._v(" 1.表数据")]),t._v(" "),a("p",[t._v("表名:table")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("id")]),t._v(" "),a("th",[t._v("date")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("1")]),t._v(" "),a("td",[t._v("2019-05")])]),t._v(" "),a("tr",[a("td",[t._v("2")]),t._v(" "),a("td",[t._v("2019-06")])]),t._v(" "),a("tr",[a("td",[t._v("3")]),t._v(" "),a("td",[t._v("2019-04")])]),t._v(" "),a("tr",[a("td",[t._v("4")]),t._v(" "),a("td",[t._v("2019-06")])])])]),t._v(" "),a("h2",{attrs:{id:"_2-需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-需求"}},[t._v("#")]),t._v(" 2.需求")]),t._v(" "),a("p",[t._v("现在要求按照指定五个月份统计每个月的数量，这五个月份为:\n('2019-02','2019-03','2019-04','2019-05','2019-06')\n查询出来的数据应该是这样的")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("date")]),t._v(" "),a("th",[t._v("num")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("2019-02")]),t._v(" "),a("td",[t._v("0")])]),t._v(" "),a("tr",[a("td",[t._v("2019-03")]),t._v(" "),a("td",[t._v("0")])]),t._v(" "),a("tr",[a("td",[t._v("2019-04")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("2019-05")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("2019-06")]),t._v(" "),a("td",[t._v("2")])])])]),t._v(" "),a("h2",{attrs:{id:"_3-实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-实现"}},[t._v("#")]),t._v(" 3.实现")]),t._v(" "),a("p",[t._v("3.1按照常规写法")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("select date,count(*) as num from  table\nwhere DATE in ('2019-02','2019-03','2019-04','2019-05','2019-06')\ngroup by dates\norder by dates desc\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("然后发现出来的数据是这样的")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("date")]),t._v(" "),a("th",[t._v("num")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("2019-04")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("2019-05")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("2019-06")]),t._v(" "),a("td",[t._v("2")])])])]),t._v(" "),a("p",[t._v("3.2解决\n我想到的解决思路是将这几个月份查成一张临时表做一个left join 这样月份就固定会显示在那，再使用nvl判断num为NULL的时候添加为0")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("select A.date,nvl(num,0) \nfrom (\n--固定写法，按照逗号分隔成一列\n\tSELECT DISTINCT REGEXP_SUBSTR ('2019-02,2019-03,2019-04,2019-05,2019-06','[^,]+',1,LEVEL) as date\n\tFROM DUAL\n\tCONNECT BY REGEXP_SUBSTR ('2019-02,2019-03,2019-04,2019-05,2019-06','[^,]+',1,LEVEL) IS NOT NULL\n) A\nLEFT JOIN \n(\n--归类查询\n\tselect count(*) as num,date from GREEN_ATTENDANCE\n\twhere DATE in ('2019-02','2019-03','2019-04','2019-05','2019-06')\n\tgroup by date\n) B\non A.date=B.date\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[t._v("这样写会有点繁琐了，如有更好的办法请指教")])])}),[],!1,null,null,null);s.default=e.exports}}]);