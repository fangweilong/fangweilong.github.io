<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
  <id>https://fangweilong.github.io/</id>
  <title>房伟龙的日常</title>
  <subtitle>房伟龙的博客小站</subtitle>
  <author>
    <name>fang wei long</name>
  </author>
  <updated>2021-08-11T05:50:04.357Z</updated>
  <generator>@mr-hope/vuepress-plugin-feed</generator>
  <link rel="self" href="https://fangweilong.github.io/atom.xml"/>
  <link rel="alternate" href="https://fangweilong.github.io/"/>
  <rights>© 2021 房伟龙 版权所有</rights>
  <category term="mybatis"/>
  <category term="lambda"/>
  <category term="maven"/>
  <category term="spark"/>
  <category term="java"/>
  <category term="spring boot"/>
  <category term="spring cloud"/>
  <category term="mongo"/>
  <category term="bootdo"/>
  <category term="javascript"/>
  <category term="docker"/>
  <category term="postgres"/>
  <category term="mysql"/>
  <category term="oracle"/>
  <category term="nginx"/>
  <category term="vue"/>
  <category term="Elastic Search"/>
  <category term="wsl"/>
  <category term="myEclipse"/>
  <category term="idea"/>
  <category term="navicat"/>
  <category term="tomcat"/>
  <category term="window"/>
  <category term="vuepress"/>
  <category term="git"/>
  <category term="其它"/>
  <contributor>
    <name>fang wei long</name>
  </contributor>
  <entry>
    <title type="html">mybatis传入多个参数</title>
    <id>/2018/07/13/mybatis%E4%BC%A0%E5%85%A5%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0/</id>
    <link href="https://fangweilong.github.io/2018/07/13/mybatis%E4%BC%A0%E5%85%A5%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>我们在调用myabtis的时候往往是传入一个entity或者map。
但是在一些特殊情况下例如url传参，这时候再put进map总感觉多此一举。</p>
<p><strong>controller:</strong></p>
<div><pre><code>//@PathVariable注解作用是转义赋值到你指定的参数中
@GetMapping(&quot;/user/{id}/{parentId}&quot;)
String user(@PathVariable(&quot;id&quot;) String id,@PathVariable(&quot;parentId&quot;) String parentId,Model model){
		UserDO userDO = userService.get(id,parentId);//获取单条数据
		model.addAttribute(&quot;user&quot;, orderservicetimes);//赋值到页面可以直接取值
	    return &quot;user/user&quot;;//跳转页面
}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>service和serviceImpl层忽略，没啥特别的</p>
<p><strong>Dao层：</strong></p>
<div><pre><code>//注意这里的@Param注解，加上这个以后，我们在mapper层就能直接接收到单个参数，否则会找不到参数
UserDo get(@Param(&quot;id&quot;)String id, @Param(&quot;parentId&quot;)String parentId);
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><p><strong>Mapper层：</strong></p>
<div><pre><code>&lt;select id=&quot;get&quot; resultType=&quot;UserDo&quot;&gt;
		select ID,USER_NAME,PASSWORD，PARENT_ID from SYS_USER where ID = #{id} AND PARENT_ID =#{parentId}
&lt;/select&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="mybatis"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-07-13T13:11:50.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">mybatis传入字符串分割</title>
    <id>/2018/06/27/mybatis%E4%BC%A0%E5%85%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%86%E5%89%B2/</id>
    <link href="https://fangweilong.github.io/2018/06/27/mybatis%E4%BC%A0%E5%85%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%86%E5%89%B2/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<div><pre><code>&lt;foreach item=&quot;item&quot; index=&quot;index&quot; collection=&quot;cardNo.split(&#39;,&#39;)&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;
  #{item}
&lt;/foreach&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>千万不要手动给你的字符串添加''符号！
千万不要手动给你的字符串添加''符号！
千万不要手动给你的字符串添加''符号！
千万不要手动给你的字符串添加''符号！</p>
<p>转载，但是是在一个博客下面的评论里面发现的，不知道怎么放连接</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="mybatis"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-06-27T16:20:22.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">mybatis使用枚举类 类型转换错误</title>
    <id>/2019/09/05/mybatis%E4%BD%BF%E7%94%A8%E6%9E%9A%E4%B8%BE%E7%B1%BB-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E9%94%99%E8%AF%AF/</id>
    <link href="https://fangweilong.github.io/2019/09/05/mybatis%E4%BD%BF%E7%94%A8%E6%9E%9A%E4%B8%BE%E7%B1%BB-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E9%94%99%E8%AF%AF/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>如何使用请查看其他博客</p>
<p>你如果是使用百度查询的，那请仔细看这篇博文。</p>
<p>在很多的博客中都会是只讲了怎么转换，如果是查询语句，并且使用resultMap的时候是能正常使用的。
但是一旦你使用insert的时候 你会发现开始报类型错误(我使用了mybatis log插件 )
<img src="https://img-blog.csdnimg.cn/20190905174625717.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="" /></p>
<p>改起来简单 在你具体的sql中那个枚举字段上加一个typeHandler，这样就能对应的到具体的code了。当然前提是你之前已经按照其他博客配好了自动转换</p>
<div><pre><code>inisert into  INFO
(states)
values
(#{state, typeHandler=com.java..typehandler.EnumTypeHandler, jdbcType=NUMERIC})
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>路径改为i你自己的枚举类，这样就能成功插入了</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="mybatis"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-09-05T17:51:12.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">mybatis查询数据赋值到model里面为空</title>
    <id>/2018/05/04/mybatis%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E8%B5%8B%E5%80%BC%E5%88%B0model%E9%87%8C%E9%9D%A2%E4%B8%BA%E7%A9%BA/</id>
    <link href="https://fangweilong.github.io/2018/05/04/mybatis%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E8%B5%8B%E5%80%BC%E5%88%B0model%E9%87%8C%E9%9D%A2%E4%B8%BA%E7%A9%BA/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>因为数据多所以在查询中使用分页，但是发现直接执行sql语句是可以获取到数据，而list里面却是空的</p>
<div><pre><code>&lt;select id=&quot;list&quot; resultType=&quot;DaliyDO&quot;&gt;
        select a1.* from (
            select
                id ,rownum
            from dual
            &lt;where&gt;
                &lt;if test=&quot;id != null and id != &#39;&#39;&quot;&gt; and id = #{id} &lt;/if&gt;
            &lt;/where&gt;
            &lt;choose&gt;
                &lt;otherwise&gt;
                    order by id desc
                &lt;/otherwise&gt;
            &lt;/choose&gt;
            ) a1
        &lt;if test=&quot;offset != null and limit != null&quot;&gt;
            where rownum between #{offset} and #{offset}+#{limit}
        &lt;/if&gt;
	&lt;/select&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br></div></div><p>原因是 resultType属性与model不对应。
我们使用分页会在查询值加入一个rownum的值，这个值在我们建立model的时候是没有的，所以只要在model里面加上rownum这个属性就可以。
当然你也可以使用别的分页方法</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="mybatis"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-05-04T14:31:01.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java-stream的各种操作说明</title>
    <id>/2021/06/10/java-stream%E7%9A%84%E5%90%84%E7%A7%8D%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E/</id>
    <link href="https://fangweilong.github.io/2021/06/10/java-stream%E7%9A%84%E5%90%84%E7%A7%8D%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="列一下stream常用的function-防止遗忘"> 列一下stream常用的Function，防止遗忘</h1>
<h2 id="map"> map</h2>
<p>修改的元素需要return后</p>
<h2 id="peek"> peek</h2>
<p>不会直接修改原来的元素，但是如果元素是对象，那么可以通过set之类的操作修改原来的元素，不需要返回值</p>
<h2 id="foreach"> foreach</h2>
<p>不修改元素，没有return</p>
<h2 id="filter"> filter</h2>
<p>过滤器，满足条件的才能被通过。留下的元素都是满足条件的</p>
<h2 id="stored"> stored</h2>
<p>排序</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="lambda"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-06-10T18:03:40.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">使用lambda表达式快捷完成Tree结构</title>
    <id>/2021/05/27/%E4%BD%BF%E7%94%A8lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%BF%AB%E6%8D%B7%E5%AE%8C%E6%88%90tree%E7%BB%93%E6%9E%84/</id>
    <link href="https://fangweilong.github.io/2021/05/27/%E4%BD%BF%E7%94%A8lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%BF%AB%E6%8D%B7%E5%AE%8C%E6%88%90tree%E7%BB%93%E6%9E%84/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言"> 前言</h2>
<p>以前在java中构建菜单、区划等都是使用递归或是数据库。
数据库如pg、mysql等原生不支持tree结构，递归不是很好理解，同时代码太长。所以考虑使用java1.8以后支持的lambda操作一波</p>
<hr>
<p>PS:数据库我使用了mybatis-plus，所以查数据的写法简化了</p>
<h3 id="代码"> 代码</h3>
<div><pre><code>		<span>//查找所有菜单，正序排序</span>
		<span>List</span><span><span>&lt;</span><span>MenuEntity</span><span>></span></span> list <span>=</span> <span>this</span><span>.</span><span>list</span><span>(</span><span>Wrappers</span><span>.</span><span>lambdaQuery</span><span>(</span><span>MenuEntity</span><span>.</span><span>class</span><span>)</span>
				                                  <span>.</span><span>eq</span><span>(</span><span>MenuEntity</span><span>::</span><span>getHide</span><span>,</span> 		<span>BoolStateEnum</span><span>.</span>FALSE<span>.</span><span>getCode</span><span>(</span><span>)</span><span>)</span>
				                                  <span>.</span><span>orderByAsc</span><span>(</span><span>MenuEntity</span><span>::</span><span>getSort</span><span>)</span><span>)</span><span>;</span>
		<span>//找寻下级菜单，利用.map来保证引用地址相同</span>
		list<span>.</span><span>stream</span><span>(</span><span>)</span>
				<span>.</span><span>map</span><span>(</span>ele <span>-></span> <span>{</span>
					ele<span>.</span><span>setChildren</span><span>(</span><span>this</span><span>.</span><span>fromTree</span><span>(</span>ele<span>,</span> list<span>)</span><span>)</span><span>;</span>
					<span>return</span> ele<span>;</span>
				<span>}</span><span>)</span>
				<span>.</span><span>collect</span><span>(</span><span>Collectors</span><span>.</span><span>toList</span><span>(</span><span>)</span><span>)</span><span>;</span>

		<span>//过滤出最上级的菜单</span>
		<span>return</span> list<span>.</span><span>stream</span><span>(</span><span>)</span>
				       <span>.</span><span>filter</span><span>(</span>ele <span>-></span> ele<span>.</span><span>getParentId</span><span>(</span><span>)</span> <span>==</span> <span>null</span><span>)</span>
				       <span>.</span><span>collect</span><span>(</span><span>Collectors</span><span>.</span><span>toList</span><span>(</span><span>)</span><span>)</span><span>;</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><div><pre><code>
<span>/**
	 * 找寻指定菜单的下级菜单
	 *
	 * @param menuEntity 当前菜单
	 * @param list       所有的菜单list
	 * @return 下级菜单
	 */</span>
	<span>private</span> <span>List</span><span><span>&lt;</span><span>MenuEntity</span><span>></span></span> <span>fromTree</span><span>(</span><span>MenuEntity</span> menuEntity<span>,</span> <span>List</span><span><span>&lt;</span><span>MenuEntity</span><span>></span></span> list<span>)</span> <span>{</span>
		<span>return</span> list<span>.</span><span>stream</span><span>(</span><span>)</span>
				       <span>.</span><span>filter</span><span>(</span>ele <span>-></span> menuEntity<span>.</span><span>getId</span><span>(</span><span>)</span><span>.</span><span>equals</span><span>(</span>ele<span>.</span><span>getParentId</span><span>(</span><span>)</span><span>)</span><span>)</span>
				       <span>.</span><span>collect</span><span>(</span><span>Collectors</span><span>.</span><span>toList</span><span>(</span><span>)</span><span>)</span><span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>MenuEntity</span> <span>{</span>
	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"ID"</span><span>)</span>
	<span>@TableId</span>
	<span>private</span> <span>Long</span> id<span>;</span>

	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"创建时间"</span><span>)</span>
	<span>private</span> <span>LocalDateTime</span> createTime<span>;</span>

	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"创建人ID"</span><span>)</span>
	<span>private</span> <span>String</span> createUserId<span>;</span>

	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"修改时间"</span><span>)</span>
	<span>private</span> <span>LocalDateTime</span> updateTime<span>;</span>

	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"修改人ID"</span><span>)</span>
	<span>private</span> <span>String</span> updateUserId<span>;</span>
	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"节点名"</span><span>)</span>
	<span>private</span> <span>String</span> name<span>;</span>
	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"所有上级节点id列表 为空时表示最顶层"</span><span>)</span>
	<span>private</span> <span>Long</span> parentId<span>;</span>

	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"菜单类型 0=节点 1=菜单 2=按钮"</span><span>)</span>
	<span>private</span> <span>int</span> menuType<span>;</span>

	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"图标"</span><span>)</span>
	<span>private</span> <span>String</span> icon<span>;</span>
	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"url"</span><span>)</span>
	<span>private</span> <span>String</span> url<span>;</span>
	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"hash路由"</span><span>)</span>
	<span>private</span> <span>String</span> hash<span>;</span>

	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"是否隐藏 0=不隐藏 1=隐藏"</span><span>)</span>
	<span>private</span> <span>int</span> hide<span>;</span>
	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"排序，从小到大正向排序"</span><span>)</span>
	<span>private</span> <span>int</span> sort<span>;</span>

	<span>@ApiModelProperty</span><span>(</span>value <span>=</span> <span>"下级菜单集合"</span><span>)</span>
	<span>@TableField</span><span>(</span>exist <span>=</span> <span>false</span><span>)</span>
	<span>private</span> <span>List</span><span><span>&lt;</span><span>MenuEntity</span><span>></span></span> children<span>;</span>


<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="lambda"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-05-27T10:01:48.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">maven-dependencyManagement子模块不写版本号无法引入</title>
    <id>/2019/12/23/maven-dependencymanagement%E5%AD%90%E6%A8%A1%E5%9D%97%E4%B8%8D%E5%86%99%E7%89%88%E6%9C%AC%E5%8F%B7%E6%97%A0%E6%B3%95%E5%BC%95%E5%85%A5/</id>
    <link href="https://fangweilong.github.io/2019/12/23/maven-dependencymanagement%E5%AD%90%E6%A8%A1%E5%9D%97%E4%B8%8D%E5%86%99%E7%89%88%E6%9C%AC%E5%8F%B7%E6%97%A0%E6%B3%95%E5%BC%95%E5%85%A5/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="现象"> 现象</h1>
<p>在父模块中使用 dependencyManagement 来控制子模块按需引入jar包  而不是照盘全收</p>
<div><pre><code>&lt;dependencyManagement&gt;
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
			&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>但是在子模块中继承父类并引入jar包的时候</p>
<div><pre><code>&lt;parent&gt;
		&lt;groupId&gt;cn.o&lt;/groupId&gt;
		&lt;artifactId&gt;atlas-cloud&lt;/artifactId&gt;
		&lt;version&gt;1.0.0&lt;/version&gt;
	&lt;/parent&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>却发现
<img src="https://img-blog.csdnimg.cn/20191223094842701.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
无法引入这个jar包3</p>
<h1 id="解决"> 解决</h1>
<p>在子模块中按需引入 需要和父模块一样用 dependencyManagement</p>
<div><pre><code>   &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;!--gateway--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;
            &lt;/dependency&gt;

        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="maven"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-12-23T09:50:34.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">maven-install提示找不到pom</title>
    <id>/2021/06/25/maven-install%E6%8F%90%E7%A4%BA%E6%89%BE%E4%B8%8D%E5%88%B0pom/</id>
    <link href="https://fangweilong.github.io/2021/06/25/maven-install%E6%8F%90%E7%A4%BA%E6%89%BE%E4%B8%8D%E5%88%B0pom/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="mvn-install"> mvn install</h2>
<p>结果发现报错</p>
<div><pre><code>The goal you specified requires a project to execute but there is no POM <span>in</span> this directory
</code></pre>
<div><span>1</span><br></div></div><h2 id="思考"> 思考</h2>
<ul>
<li>这不对啊！其他同事的电脑上直接安装成功啊。这不科学。</li>
<li>跟我maven版本有关？换个版本试试。失败...</li>
<li>jdk有关？我也用的是openjdk11啊</li>
</ul>
<h2 id="解决"> 解决</h2>
<p>结果无意中打开cmd执行了一下 我靠为什么成功了？
<img src="https://p9.toutiaoimg.com/origin/pgc-image/1dbf4d8125df49e3bd4010cbcdded8de.png" alt="成功示例" /></p>
<h2 id="powershell和cmd"> powershell和cmd</h2>
<p>powershell百分百失败，cmd可以成功。我也不知道为啥</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="maven"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-06-25T17:18:07.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">maven添加ojdbc6.jar(11g)包</title>
    <id>/2018/11/26/maven%E6%B7%BB%E5%8A%A0ojdbc6-jar-11g-%E5%8C%85/</id>
    <link href="https://fangweilong.github.io/2018/11/26/maven%E6%B7%BB%E5%8A%A0ojdbc6-jar-11g-%E5%8C%85/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p><em>不要通过oracle官网下，折腾了我一下午都没安装成功。
建议通过maven repo网站的下载：https://mvnrepository.com/artifact/oracle/ojdbc6/11.2.0.3</em></p>
<p>PS:以下步骤默认你maven已经装好了，配置都做好了。如果配置还没搞好请参阅我另一篇博客：https://blog.csdn.net/tutian2000/article/details/79132758
1.点击红框下，下载jar包到本地<img src="https://img-blog.csdnimg.cn/20181126162921798.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
2.执行cmd命令</p>
<div><pre><code>mvn install:install-file -Dfile=C:/Users/Teler/Downloads/ojdbc6-11.2.0.3.jar -DgroupId=com.oracle -DartifactId=ojdbc6 -Dversion=11.2.0.3 -Dpackaging=jar
</code></pre>
<div><span>1</span><br></div></div><p>如果你是通过我上面提供的链接下载的，那么除了&quot;-Dfile=&quot;后面的本地路径改成你自己的以外什么都不要动。
3.显示build success即安装成功
没图，安装的时候忘了截图了
4.项目引用</p>
<div><pre><code>&lt;dependency&gt;
   &lt;groupId&gt;com.oracle&lt;/groupId&gt;
   &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;
   &lt;version&gt;11.2.0.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="maven"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-11-26T16:55:08.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">maven的配置以及IDEA导入本地maven</title>
    <id>/2018/01/22/maven%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BB%A5%E5%8F%8Aidea%E5%AF%BC%E5%85%A5%E6%9C%AC%E5%9C%B0maven/</id>
    <link href="https://fangweilong.github.io/2018/01/22/maven%E7%9A%84%E9%85%8D%E7%BD%AE%E4%BB%A5%E5%8F%8Aidea%E5%AF%BC%E5%85%A5%E6%9C%AC%E5%9C%B0maven/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-maven安装前先确定你本地的jdk是否安装-环境变量是否配置"> 1.maven安装前先确定你本地的jdk是否安装，环境变量是否配置</h2>
<hr>
<h2 id="_2-maven的官网-点击打开官网"> 2.maven的官网:<a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener noreferrer">点击打开官网</a></h2>
<hr>
<h2 id="_3-下载后解压-我用的是解压版-建议自定义目录-将所有开发中需要用到的例如jdk-idea等都放入同一个文件夹中-这样好找并且好管理。一定要记住你的目录-并且不要出现各种奇怪的字符或者中文-不然出现各种问题哭都来不及"> 3.下载后解压（我用的是解压版），建议自定义目录，将所有开发中需要用到的例如jdk,idea等都放入同一个文件夹中，这样好找并且好管理。一定要记住你的目录！！！并且不要出现各种奇怪的字符或者中文，不然出现各种问题哭都来不及</h2>
<hr>
<h2 id="_4-配置maven的环境变量"> 4.配置maven的环境变量</h2>
<div><pre><code>系统变量：
MAVEN_HOME = 你的maven路径

用户变量：
path = %MAVEN_HOME%\bin
</code></pre>
</div><hr>
<h3 id="_5-打开cmd-输入命令"> 5. 打开cmd,输入命令</h3>
<div><pre><code>	mvn -version
</code></pre>
<div><span>1</span><br></div></div><p><img src="https://img-blog.csdn.net/20180122194742713?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" /></p>
<p>在这里我们可以看到maven的一些参数，如果有出现这个就不用管，说明我们初始的maven配置成功了</p>
<hr>
<h2 id="_6-修改maven的仓库位置-这一步没有需求的可以跳过直接看第7步-不是必需步骤"> 6.修改maven的仓库位置（这一步没有需求的可以跳过直接看第7步，不是必需步骤）</h2>
<div><pre><code>  找到maven/conf/settings.xml(不是.m2文件夹下的,两个有何不同请看文章结尾)，我的是在D:\Server\maven\conf\settings.xml
</code></pre>
</div><img src="https://img-blog.csdn.net/20180122195555425?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="">
<p>找到这一行，按照你自己设置的文件夹的填入地址，以后maven下载的包都会在这个路径下，而不是在C:\Users\admcnm.m2\repository的默认文件夹下面</p>
<hr>
<h2 id="_7-修改镜像地址"> 7.修改镜像地址</h2>
<img src="https://img-blog.csdn.net/20180122200049294?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="">
<p>还是在settings.xml文件中，找到如图所在的位置，添加或修改红框框起来的内容</p>
<div><pre><code>&lt;mirror&gt;
	&lt;id&gt;nexus-aliyun&lt;id&gt;
	&lt;mirrorOf&gt;*&lt;mirrorOf&gt;
	&lt;name&gt;Nexus aliyun&lt;name&gt;
	&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;url&gt;
&lt;mirror&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>修改完以后我们下载jar包都是在阿里云的镜像中下载，而不是国外的地址，速度会快很多</p>
<hr>
<h2 id="_8-下载基础包"> 8.下载基础包</h2>
<p>在cmd中输入命令并执行：</p>
<div><pre><code>mvn help:system
</code></pre>
<div><span>1</span><br></div></div><p>如果此时出现下载各种包，那么maven的基础配置就完成。但是如果你和我一样出现了这种问题</p>
<div><pre><code>[ERROR] Error executing Maven.
[ERROR] 3 problems were encountered while building the effective settings
[WARNING] Unrecognised tags: &#39;activeProfiles&#39; (position: START_TAG seen ...\u4e0d\u5230\u8fd9\u6837\u4e00\u4e2aprofile\uff0cMaven\u5219\u4f1a\u50cf\u5f80\u5e38\u4e00\u6837\u8fd0\u884c\u3002  --;  \r\n            ;activeProfiles;... @288:29)  @ C:\Users\Administrator\.m2\settings.xml, line 288, column 29
[ERROR] &#39;profiles.profile[test].pluginRepositories.pluginRepository.id&#39; for  is missing @ C:\Users\Administrator\.m2\settings.xml
[ERROR] &#39;profiles.profile[test].pluginRepositories.pluginRepository.url&#39; for  is missing @ C:\Users\Administrator\.m2\settings.xml
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>那么删除你
C:\Users\用户名.m2\settings.xml文件后再试。</p>
<hr>
<h2 id="_9-idea2017-3-1配置maven"> 9.idea2017.3.1配置maven</h2>
<img src="https://img-blog.csdn.net/20180122201319636?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<hr>
<ul>
<li>.m2文件下的settings.xml文件是我们这台电脑当前登录用户使用的自定义配置文件，其他maven文件中的setting.xml是全局配置文件，当用户配置文件和全局配置文件都存在时系统会默认先使用用户的配置文件，我个人习惯使用全局配置文件，同一路径下好管理，与其他人共同使用时也好统一。*</li>
</ul>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="maven"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-01-22T20:17:30.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java-spark-kMeans算法</title>
    <id>/2020/12/10/java-spark-kmeans%E7%AE%97%E6%B3%95/</id>
    <link href="https://fangweilong.github.io/2020/12/10/java-spark-kmeans%E7%AE%97%E6%B3%95/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h3 id="配置"> 配置</h3>
<p>配置请看我的<a href="https://blog.csdn.net/tutian2000/article/details/110948695" target="_blank" rel="noopener noreferrer">其他文章 点击跳转</a></p>
<h3 id="spark官方文档"> spark官方文档</h3>
<p><a href="http://spark.apache.org/docs/latest/ml-classification-regression.html#linear-regression" target="_blank" rel="noopener noreferrer">点击跳转官方文档</a></p>
<h3 id="数据"> 数据</h3>
<h4 id="训练数据"> 训练数据</h4>
<p><img src="https://img-blog.csdnimg.cn/20201210135643956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<hr>
<h3 id="实体类"> 实体类</h3>
<p>用了swagger和lombok 不需要的可以删掉</p>
<div><pre><code>
<span>import</span> <span>io<span>.</span>swagger<span>.</span>annotations<span>.</span></span><span>ApiModelProperty</span><span>;</span>
<span>import</span> <span>lombok<span>.</span></span><span>Data</span><span>;</span>

<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>Min</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>NotEmpty</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>NotNull</span><span>;</span>

<span>/**
 * k means聚类
 *
 * @author teler
 */</span>
<span>@Data</span>
<span>public</span> <span>class</span> <span>KMeansEntity</span> <span>{</span>
	<span>/**
	 * 数据集路径
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"数据源路径"</span><span>)</span>
	<span>@NotEmpty</span><span>(</span>message <span>=</span> <span>"数据源路径不能为空"</span><span>)</span>
	<span>private</span> <span>String</span> dataFilePath<span>;</span>
	<span>/**
	 * 簇数
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"簇数"</span><span>)</span>
	<span>@NotNull</span><span>(</span>message <span>=</span> <span>"簇数必填"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>1</span><span>,</span> message <span>=</span> <span>"簇数最小为1"</span><span>)</span>
	<span>private</span> <span>int</span> k<span>;</span>
	<span>/**
	 * 迭代次数
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"迭代次数"</span><span>)</span>
	<span>@NotNull</span><span>(</span>message <span>=</span> <span>"迭代次数必填"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>0</span><span>,</span> message <span>=</span> <span>"迭代次数最小为0"</span><span>)</span>
	<span>private</span> <span>int</span> iter<span>;</span>

<span>}</span>


</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br></div></div><h3 id="算法实现"> 算法实现</h3>
<p>里面有些方法是为了保留小数 不需要的自己改</p>
<div><pre><code>
<span>@Resource</span>
<span>private</span> <span>transient</span> <span>SparkSession</span> sparkSession<span>;</span>

<span>@Override</span>
	<span>public</span> <span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> <span>kmeans</span><span>(</span><span>KMeansEntity</span> <span>record</span><span>)</span> <span>{</span>
		log<span>.</span><span>info</span><span>(</span><span>"========== k均值聚类算法开始 =========="</span><span>)</span><span>;</span>
		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> dataset <span>=</span> <span>getDataSetByHdfs</span><span>(</span><span>record</span><span>.</span><span>getDataFilePath</span><span>(</span><span>)</span><span>)</span><span>;</span>

		<span>//设置聚类算法参数</span>
		<span>KMeans</span> kmeans <span>=</span> <span>new</span> <span>KMeans</span><span>(</span><span>)</span><span>.</span><span>setK</span><span>(</span><span>record</span><span>.</span><span>getK</span><span>(</span><span>)</span><span>)</span><span>.</span><span>setSeed</span><span>(</span><span>1L</span><span>)</span><span>.</span><span>setMaxIter</span><span>(</span><span>record</span><span>.</span><span>getIter</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>KMeansModel</span> model <span>=</span> kmeans<span>.</span><span>fit</span><span>(</span>dataset<span>)</span><span>;</span>

		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> predictions <span>=</span> model<span>.</span><span>transform</span><span>(</span>dataset<span>)</span><span>;</span>
		<span>ClusteringEvaluator</span> evaluator <span>=</span> <span>new</span> <span>ClusteringEvaluator</span><span>(</span><span>)</span><span>;</span>
		<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> map <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> centers <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>Vector</span><span>[</span><span>]</span> clusterArray <span>=</span> model<span>.</span><span>clusterCenters</span><span>(</span><span>)</span><span>;</span>
		<span>for</span> <span>(</span><span>Vector</span> center <span>:</span> clusterArray<span>)</span> <span>{</span>
			log<span>.</span><span>info</span><span>(</span><span>"中心值：{}"</span><span>,</span> center<span>.</span><span>toString</span><span>(</span><span>)</span><span>)</span><span>;</span>
			<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span></span> centerMap <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
			centerMap<span>.</span><span>put</span><span>(</span><span>"center"</span><span>,</span> <span>ArrayUtil</span><span>.</span><span>join</span><span>(</span><span>Arrays</span><span>.</span><span>stream</span><span>(</span>center<span>.</span><span>toArray</span><span>(</span><span>)</span><span>)</span><span>.</span><span>map</span><span>(</span>val <span>-></span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>val<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span><span>,</span> <span>","</span><span>)</span><span>)</span><span>;</span>
			centers<span>.</span><span>add</span><span>(</span>centerMap<span>)</span><span>;</span>
		<span>}</span>
		<span>// 簇中心点</span>
		map<span>.</span><span>put</span><span>(</span><span>"clusterCenters"</span><span>,</span> centers<span>)</span><span>;</span>
		<span>// 误差 Silhouette with squared euclidean distance</span>
		map<span>.</span><span>put</span><span>(</span><span>"sse"</span><span>,</span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>evaluator<span>.</span><span>evaluate</span><span>(</span>predictions<span>)</span><span>,</span> <span>3</span><span>)</span><span>)</span><span>;</span>

		<span>// 区分样本数据所属簇</span>
		<span>List</span><span><span>&lt;</span><span>Row</span><span>></span></span> rows <span>=</span> predictions<span>.</span><span>collectAsList</span><span>(</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span><span>></span></span> data <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> rows<span>.</span><span>size</span><span>(</span><span>)</span><span>;</span> i<span>++</span><span>)</span> <span>{</span>
			<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> dataMap <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
			dataMap<span>.</span><span>put</span><span>(</span><span>"index"</span><span>,</span> i<span>)</span><span>;</span>

			<span>Vector</span> vector <span>=</span> rows<span>.</span><span>get</span><span>(</span>i<span>)</span><span>.</span><span>getAs</span><span>(</span><span>"features"</span><span>)</span><span>;</span>
			dataMap<span>.</span><span>put</span><span>(</span><span>"features"</span><span>,</span> vector<span>.</span><span>toArray</span><span>(</span><span>)</span><span>)</span><span>;</span>

			<span>int</span> belong <span>=</span> model<span>.</span><span>predict</span><span>(</span>vector<span>)</span><span>;</span>
			dataMap<span>.</span><span>put</span><span>(</span><span>"belong"</span><span>,</span> belong<span>)</span><span>;</span>

			dataMap<span>.</span><span>put</span><span>(</span><span>"center"</span><span>,</span> <span>ArrayUtil</span><span>.</span><span>join</span><span>(</span><span>Arrays</span><span>.</span><span>stream</span><span>(</span>clusterArray<span>[</span>belong<span>]</span><span>.</span><span>toArray</span><span>(</span><span>)</span><span>)</span><span>.</span><span>map</span><span>(</span>val <span>-></span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>val<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span><span>,</span> <span>","</span><span>)</span><span>)</span><span>;</span>

			data<span>.</span><span>add</span><span>(</span>dataMap<span>)</span><span>;</span>
		<span>}</span>
		map<span>.</span><span>put</span><span>(</span><span>"data"</span><span>,</span> data<span>)</span><span>;</span>
		log<span>.</span><span>info</span><span>(</span><span>"========== k均值聚类算法结束 =========="</span><span>)</span><span>;</span>
		<span>return</span> map<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br></div></div><hr>
<h3 id="getdatasetbyhdfs方法"> getDataSetByHdfs方法</h3>
<p>这个方法我与上面的方法放在一个类中，所以sparkSession没重复写</p>
<div><pre><code><span>/**
	 * 从hdfs中取数据
	 *
	 * @param dataFilePath 数据路径
	 * @return 数据集合
	 */</span>
	<span>private</span> <span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> <span>getDataSetByHdfs</span><span>(</span><span>String</span> dataFilePath<span>)</span> <span>{</span>

		<span>//屏蔽日志</span>
		<span>Logger</span><span>.</span><span>getLogger</span><span>(</span><span>"org.apache.spark"</span><span>)</span><span>.</span><span>setLevel</span><span>(</span><span>Level</span><span>.</span>WARN<span>)</span><span>;</span>
		<span>Logger</span><span>.</span><span>getLogger</span><span>(</span><span>"org.eclipse.jetty.server"</span><span>)</span><span>.</span><span>setLevel</span><span>(</span><span>Level</span><span>.</span>OFF<span>)</span><span>;</span>

		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> dataset<span>;</span>
		<span>try</span> <span>{</span>
			<span>//我这里的数据是libsvm格式的 如果是其他格式请自行更改</span>
			dataset <span>=</span> sparkSession<span>.</span><span>read</span><span>(</span><span>)</span><span>.</span><span>format</span><span>(</span><span>"libsvm"</span><span>)</span><span>.</span><span>load</span><span>(</span>dataFilePath<span>)</span><span>;</span>
			log<span>.</span><span>info</span><span>(</span><span>"获取数据结束 "</span><span>)</span><span>;</span>
		<span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>
			log<span>.</span><span>info</span><span>(</span><span>"读取失败:{} "</span><span>,</span> e<span>.</span><span>getMessage</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> dataset<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><h3 id="tolist"> toList</h3>
<div><pre><code><span>/**
	 * dataset数据转化为list数据
	 *
	 * @param record 数据
	 * @return 数据集合
	 */</span>
	<span>private</span> <span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> <span>toList</span><span>(</span><span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> <span>record</span><span>)</span> <span>{</span>
		log<span>.</span><span>info</span><span>(</span><span>"格式化结果数据集==============================="</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> list <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>String</span><span>[</span><span>]</span> columns <span>=</span> <span>record</span><span>.</span><span>columns</span><span>(</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Row</span><span>></span></span> rows <span>=</span> <span>record</span><span>.</span><span>collectAsList</span><span>(</span><span>)</span><span>;</span>
		<span>for</span> <span>(</span><span>Row</span> row <span>:</span> rows<span>)</span> <span>{</span>
			<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span></span> obj <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>16</span><span>)</span><span>;</span>
			<span>for</span> <span>(</span><span>int</span> j <span>=</span> <span>0</span><span>;</span> j <span>&lt;</span> columns<span>.</span>length<span>;</span> j<span>++</span><span>)</span> <span>{</span>
				<span>String</span> col <span>=</span> columns<span>[</span>j<span>]</span><span>;</span>
				<span>Object</span> rowAs <span>=</span> row<span>.</span><span>getAs</span><span>(</span>col<span>)</span><span>;</span>
				<span>String</span> val <span>=</span> <span>""</span><span>;</span>
				<span>//如果是数组 </span>
				<span>//这一段不需要的可以只留下else的内容</span>
				<span>if</span> <span>(</span>rowAs <span>instanceof</span> <span>DenseVector</span><span>)</span> <span>{</span>
					<span>if</span> <span>(</span><span>(</span><span>(</span><span>DenseVector</span><span>)</span> rowAs<span>)</span><span>.</span><span>values</span><span>(</span><span>)</span> <span>instanceof</span> <span>double</span><span>[</span><span>]</span><span>)</span> <span>{</span>
						val <span>=</span> <span>ArrayUtil</span><span>.</span><span>join</span><span>(</span>
								<span>Arrays</span><span>.</span><span>stream</span><span>(</span><span>(</span><span>(</span><span>DenseVector</span><span>)</span> rowAs<span>)</span><span>.</span><span>values</span><span>(</span><span>)</span><span>)</span>
										<span>.</span><span>map</span><span>(</span>rowVal <span>-></span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>rowVal<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span>
								<span>,</span> <span>","</span><span>)</span>
						<span>;</span>
					<span>}</span> <span>else</span> <span>{</span>
						val <span>=</span> rowAs<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span>
					<span>}</span>
				<span>}</span> <span>else</span> <span>{</span>
					val <span>=</span> rowAs<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span>
				<span>}</span>

				obj<span>.</span><span>put</span><span>(</span>col<span>,</span> val<span>)</span><span>;</span>
				log<span>.</span><span>info</span><span>(</span><span>"列：{},名：{},值：{}"</span><span>,</span> j<span>,</span> col<span>,</span> val<span>)</span><span>;</span>
			<span>}</span>
			list<span>.</span><span>add</span><span>(</span>obj<span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> list<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spark"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-12-10T11:10:13.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java-spark-主成分分析算法-pca</title>
    <id>/2020/12/10/java-spark-%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95-pca/</id>
    <link href="https://fangweilong.github.io/2020/12/10/java-spark-%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95-pca/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h3 id="配置"> 配置</h3>
<p>配置请看我的<a href="https://blog.csdn.net/tutian2000/article/details/110948695" target="_blank" rel="noopener noreferrer">其他文章 点击跳转</a></p>
<h3 id="spark官方文档"> spark官方文档</h3>
<p><a href="http://spark.apache.org/docs/latest/ml-classification-regression.html#linear-regression" target="_blank" rel="noopener noreferrer">点击跳转官方文档</a></p>
<h3 id="数据"> 数据</h3>
<h4 id="训练数据"> 训练数据</h4>
<p><img src="https://img-blog.csdnimg.cn/20201210140828346.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<hr>
<h2 id="代码"> 代码</h2>
<p>PCA算法的应用场景不是太明确，没做太多验证</p>
<h3 id="实体类"> 实体类</h3>
<p>用了swagger和lombok 不需要的可以删掉</p>
<div><pre><code>
<span>import</span> <span>io<span>.</span>swagger<span>.</span>annotations<span>.</span></span><span>ApiModel</span><span>;</span>
<span>import</span> <span>io<span>.</span>swagger<span>.</span>annotations<span>.</span></span><span>ApiModelProperty</span><span>;</span>
<span>import</span> <span>lombok<span>.</span></span><span>Data</span><span>;</span>

<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>Min</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>NotEmpty</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>NotNull</span><span>;</span>

<span>/**
 * 主成分分析算法
 *
 * @author teler
 */</span>

<span>@Data</span>
<span>@ApiModel</span><span>(</span><span>"主成分分析算法"</span><span>)</span>
<span>public</span> <span>class</span> <span>PcaEntity</span> <span>{</span>
	<span>/**
	 * 数据集路径
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"数据源路径"</span><span>)</span>
	<span>@NotEmpty</span><span>(</span>message <span>=</span> <span>"数据源路径不能为空"</span><span>)</span>
	<span>private</span> <span>String</span> dataFilePath<span>;</span>

	<span>/**
	 * 迭代次数
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"维度"</span><span>)</span>
	<span>@NotNull</span><span>(</span>message <span>=</span> <span>"k不能为空"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>1</span><span>,</span> message <span>=</span> <span>"k最小值为1"</span><span>)</span>
	<span>private</span> <span>Integer</span> k<span>;</span>
<span>}</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br></div></div><h3 id="算法实现"> 算法实现</h3>
<p>里面有些方法是为了保留小数 不需要的自己改</p>
<div><pre><code>
<span>@Resource</span>
<span>private</span> <span>transient</span> <span>SparkSession</span> sparkSession<span>;</span>
<span>@Override</span>
	<span>public</span> <span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> <span>pca</span><span>(</span><span>PcaEntity</span> <span>record</span><span>)</span> <span>{</span>
		<span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"================== 主成分分析算法开始==========="</span><span>)</span><span>;</span>
		<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> map <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>ConstantIntEnum</span><span>.</span>HASH_MAP_INITIAL_CAPACITY<span>.</span><span>getCode</span><span>(</span><span>)</span><span>)</span><span>;</span>

		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> source <span>=</span> <span>getDataSetByHdfs</span><span>(</span><span>record</span><span>.</span><span>getDataFilePath</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>//训练数据</span>
		<span>;</span>
		map<span>.</span><span>put</span><span>(</span><span>"training"</span><span>,</span> <span>toList</span><span>(</span>source<span>)</span><span>)</span><span>;</span>
		<span>//设置算法参数</span>
		<span>PCA</span> pca <span>=</span> <span>new</span> <span>PCA</span><span>(</span><span>)</span>
				          <span>.</span><span>setInputCol</span><span>(</span><span>"features"</span><span>)</span>
				          <span>.</span><span>setOutputCol</span><span>(</span><span>"pcaFeatures"</span><span>)</span>
				          <span>.</span><span>setK</span><span>(</span><span>record</span><span>.</span><span>getK</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>//训练模型</span>
		<span>PCAModel</span> pcaModel <span>=</span> pca<span>.</span><span>fit</span><span>(</span>source<span>)</span><span>;</span>

		pcaModel<span>.</span><span>pc</span><span>(</span><span>)</span><span>;</span>
		<span>//转化数据</span>
		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> predictions <span>=</span> pcaModel<span>.</span><span>transform</span><span>(</span>source<span>)</span><span>.</span><span>select</span><span>(</span><span>"pcaFeatures"</span><span>)</span><span>;</span>
		predictions<span>.</span><span>show</span><span>(</span><span>)</span><span>;</span>

		map<span>.</span><span>put</span><span>(</span><span>"data"</span><span>,</span> <span>toList</span><span>(</span>predictions<span>)</span><span>)</span><span>;</span>
		<span>return</span> map<span>;</span>
	<span>}</span>


</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br></div></div><hr>
<h3 id="getdatasetbyhdfs方法"> getDataSetByHdfs方法</h3>
<p>这个方法我与上面的方法放在一个类中，所以sparkSession没重复写</p>
<div><pre><code><span>/**
	 * 从hdfs中取数据
	 *
	 * @param dataFilePath 数据路径
	 * @return 数据集合
	 */</span>
	<span>private</span> <span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> <span>getDataSetByHdfs</span><span>(</span><span>String</span> dataFilePath<span>)</span> <span>{</span>

		<span>//屏蔽日志</span>
		<span>Logger</span><span>.</span><span>getLogger</span><span>(</span><span>"org.apache.spark"</span><span>)</span><span>.</span><span>setLevel</span><span>(</span><span>Level</span><span>.</span>WARN<span>)</span><span>;</span>
		<span>Logger</span><span>.</span><span>getLogger</span><span>(</span><span>"org.eclipse.jetty.server"</span><span>)</span><span>.</span><span>setLevel</span><span>(</span><span>Level</span><span>.</span>OFF<span>)</span><span>;</span>

		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> dataset<span>;</span>
		<span>try</span> <span>{</span>
			<span>//我这里的数据是libsvm格式的 如果是其他格式请自行更改</span>
			dataset <span>=</span> sparkSession<span>.</span><span>read</span><span>(</span><span>)</span><span>.</span><span>format</span><span>(</span><span>"libsvm"</span><span>)</span><span>.</span><span>load</span><span>(</span>dataFilePath<span>)</span><span>;</span>
			log<span>.</span><span>info</span><span>(</span><span>"获取数据结束 "</span><span>)</span><span>;</span>
		<span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>
			log<span>.</span><span>info</span><span>(</span><span>"读取失败:{} "</span><span>,</span> e<span>.</span><span>getMessage</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> dataset<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><h3 id="tolist"> toList</h3>
<div><pre><code><span>/**
	 * dataset数据转化为list数据
	 *
	 * @param record 数据
	 * @return 数据集合
	 */</span>
	<span>private</span> <span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> <span>toList</span><span>(</span><span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> <span>record</span><span>)</span> <span>{</span>
		log<span>.</span><span>info</span><span>(</span><span>"格式化结果数据集==============================="</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> list <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>String</span><span>[</span><span>]</span> columns <span>=</span> <span>record</span><span>.</span><span>columns</span><span>(</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Row</span><span>></span></span> rows <span>=</span> <span>record</span><span>.</span><span>collectAsList</span><span>(</span><span>)</span><span>;</span>
		<span>for</span> <span>(</span><span>Row</span> row <span>:</span> rows<span>)</span> <span>{</span>
			<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span></span> obj <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>16</span><span>)</span><span>;</span>
			<span>for</span> <span>(</span><span>int</span> j <span>=</span> <span>0</span><span>;</span> j <span>&lt;</span> columns<span>.</span>length<span>;</span> j<span>++</span><span>)</span> <span>{</span>
				<span>String</span> col <span>=</span> columns<span>[</span>j<span>]</span><span>;</span>
				<span>Object</span> rowAs <span>=</span> row<span>.</span><span>getAs</span><span>(</span>col<span>)</span><span>;</span>
				<span>String</span> val <span>=</span> <span>""</span><span>;</span>
				<span>//如果是数组 </span>
				<span>//这一段不需要的可以只留下else的内容</span>
				<span>if</span> <span>(</span>rowAs <span>instanceof</span> <span>DenseVector</span><span>)</span> <span>{</span>
					<span>if</span> <span>(</span><span>(</span><span>(</span><span>DenseVector</span><span>)</span> rowAs<span>)</span><span>.</span><span>values</span><span>(</span><span>)</span> <span>instanceof</span> <span>double</span><span>[</span><span>]</span><span>)</span> <span>{</span>
						val <span>=</span> <span>ArrayUtil</span><span>.</span><span>join</span><span>(</span>
								<span>Arrays</span><span>.</span><span>stream</span><span>(</span><span>(</span><span>(</span><span>DenseVector</span><span>)</span> rowAs<span>)</span><span>.</span><span>values</span><span>(</span><span>)</span><span>)</span>
										<span>.</span><span>map</span><span>(</span>rowVal <span>-></span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>rowVal<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span>
								<span>,</span> <span>","</span><span>)</span>
						<span>;</span>
					<span>}</span> <span>else</span> <span>{</span>
						val <span>=</span> rowAs<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span>
					<span>}</span>
				<span>}</span> <span>else</span> <span>{</span>
					val <span>=</span> rowAs<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span>
				<span>}</span>

				obj<span>.</span><span>put</span><span>(</span>col<span>,</span> val<span>)</span><span>;</span>
				log<span>.</span><span>info</span><span>(</span><span>"列：{},名：{},值：{}"</span><span>,</span> j<span>,</span> col<span>,</span> val<span>)</span><span>;</span>
			<span>}</span>
			list<span>.</span><span>add</span><span>(</span>obj<span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> list<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spark"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-12-10T11:10:13.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java-spark-朴素贝叶斯算法(naive-bayes)</title>
    <id>/2020/12/10/java-spark-%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95-naive-bayes/</id>
    <link href="https://fangweilong.github.io/2020/12/10/java-spark-%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95-naive-bayes/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h3 id="配置"> 配置</h3>
<p>配置请看我的<a href="https://blog.csdn.net/tutian2000/article/details/110948695" target="_blank" rel="noopener noreferrer">其他文章 点击跳转</a></p>
<h3 id="spark官方文档"> spark官方文档</h3>
<p><a href="http://spark.apache.org/docs/latest/ml-classification-regression.html#linear-regression" target="_blank" rel="noopener noreferrer">点击跳转官方文档</a></p>
<h3 id="其它文章"> 其它文章</h3>
<p>推荐一个在蚂蚁做算法的人写的文章，不过他的文章偏专业化，有很多数学学公式。我是看的比较懵。<a href="https://www.guofei.site/2017/11/22/regression.html" target="_blank" rel="noopener noreferrer">点击跳转</a></p>
<h3 id="数据"> 数据</h3>
<h4 id="训练数据"> 训练数据</h4>
<p><img src="https://img-blog.csdnimg.cn/20201210115340670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<h4 id="预测数据"> 预测数据</h4>
<p><img src="https://img-blog.csdnimg.cn/20201210115400444.png" alt="
" /></p>
<hr>
<h3 id="实体类"> 实体类</h3>
<p>用了swagger和lombok 不需要的可以删掉</p>
<div><pre><code><span>import</span> <span>io<span>.</span>swagger<span>.</span>annotations<span>.</span></span><span>ApiModel</span><span>;</span>
<span>import</span> <span>io<span>.</span>swagger<span>.</span>annotations<span>.</span></span><span>ApiModelProperty</span><span>;</span>
<span>import</span> <span>lombok<span>.</span></span><span>Data</span><span>;</span>

<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>Max</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>Min</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>NotEmpty</span><span>;</span>

<span>/**
 * 分类算法传参
 * 比如决策树 随机森林 朴素贝叶斯
 *
 * @author teler
 * @date 2020-10-09
 */</span>

<span>@Data</span>
<span>@ApiModel</span><span>(</span><span>"朴素贝叶斯"</span><span>)</span>
<span>public</span> <span>class</span> <span>ClassifyEntity</span> <span>{</span>
	<span>/**
	 * 测试数据
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"测试数据"</span><span>)</span>
	<span>@NotEmpty</span><span>(</span>message <span>=</span> <span>"参数不能为空"</span><span>)</span>
	<span>String</span> trainFilePath<span>;</span>
	<span>/**
	 * 数据路径
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"数据路径"</span><span>)</span>
	<span>@NotEmpty</span><span>(</span>message <span>=</span> <span>"参数不能为空"</span><span>)</span>
	<span>String</span> dataFilePath<span>;</span>

	<span>/**
	 * 测试模型的数据比例
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"测试模型的数据比例"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>0</span><span>,</span> message <span>=</span> <span>"最小比例为0"</span><span>)</span>
	<span>@Max</span><span>(</span>value <span>=</span> <span>1</span><span>,</span> message <span>=</span> <span>"最大比例为1"</span><span>)</span>
	<span>double</span> testDataPct<span>;</span>

	<span>/**
	 * 测试模型准确率阈值
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"测试模型准确率阈值"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>0</span><span>,</span> message <span>=</span> <span>"最小比例为0"</span><span>)</span>
	<span>@Max</span><span>(</span>value <span>=</span> <span>1</span><span>,</span> message <span>=</span> <span>"最大比例为1"</span><span>)</span>
	<span>double</span> testThreshold<span>;</span>

<span>}</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br></div></div><h3 id="算法实现"> 算法实现</h3>
<p>里面有些方法是为了保留小数 不需要的自己改</p>
<div><pre><code>
<span>@Resource</span>
<span>private</span> <span>transient</span> <span>SparkSession</span> sparkSession<span>;</span>

<span>@Override</span>
<span>public</span> <span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> <span>naiveBayes</span><span>(</span><span>ClassifyEntity</span> <span>record</span><span>)</span> <span>{</span>
	<span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"========== 朴素贝叶斯算法开始 =========="</span><span>)</span><span>;</span>
	<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> map <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
	<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> source <span>=</span> <span>getDataSetByHdfs</span><span>(</span><span>record</span><span>.</span><span>getTrainFilePath</span><span>(</span><span>)</span><span>)</span><span>;</span>
	<span>//训练数据</span>
	map<span>.</span><span>put</span><span>(</span><span>"training"</span><span>,</span> <span>toList</span><span>(</span>source<span>)</span><span>)</span><span>;</span>
	<span>//根据比例从数据源中随机抽取数据 训练数据和测试数据比例 建议设为0.8</span>
	<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span><span>[</span><span>]</span> splits <span>=</span> source<span>.</span><span>randomSplit</span><span>(</span><span>new</span> <span>double</span><span>[</span><span>]</span><span>{</span><span>record</span><span>.</span><span>getTestDataPct</span><span>(</span><span>)</span><span>,</span> <span>1</span> <span>-</span> <span>record</span><span>.</span><span>getTestDataPct</span><span>(</span><span>)</span><span>}</span><span>,</span>
			<span>1234L</span><span>)</span><span>;</span>
	<span>//训练和测试数据</span>
	<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> trainingData <span>=</span> splits<span>[</span><span>0</span><span>]</span><span>.</span><span>cache</span><span>(</span><span>)</span><span>;</span>
	<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> testData <span>=</span> splits<span>[</span><span>1</span><span>]</span><span>.</span><span>cache</span><span>(</span><span>)</span><span>;</span>

	<span>NaiveBayes</span> nb <span>=</span> <span>new</span> <span>NaiveBayes</span><span>(</span><span>)</span><span>;</span>
	<span>NaiveBayesModel</span> model <span>=</span> nb<span>.</span><span>fit</span><span>(</span>trainingData<span>)</span><span>;</span>

	<span>//准确率</span>
	<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> testResult <span>=</span> model<span>.</span><span>transform</span><span>(</span>testData<span>)</span><span>;</span>
	<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> predictionAndLabels <span>=</span> testResult<span>.</span><span>select</span><span>(</span><span>"prediction"</span><span>,</span> <span>"label"</span><span>)</span><span>;</span>

	<span>MulticlassClassificationEvaluator</span> evaluator <span>=</span> <span>new</span> <span>MulticlassClassificationEvaluator</span><span>(</span><span>)</span>
			                                              <span>.</span><span>setLabelCol</span><span>(</span><span>"label"</span><span>)</span>
			                                              <span>.</span><span>setPredictionCol</span><span>(</span><span>"prediction"</span><span>)</span>
			                                              <span>.</span><span>setMetricName</span><span>(</span><span>"accuracy"</span><span>)</span><span>;</span>
	<span>//准确率</span>
	
	map<span>.</span><span>put</span><span>(</span><span>"accuracy"</span><span>,</span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>evaluator<span>.</span><span>evaluate</span><span>(</span>predictionAndLabels<span>)</span><span>,</span> <span>3</span><span>)</span><span>)</span><span>;</span>


	<span>//计算结果</span>
	<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> dataSource <span>=</span> <span>getDataSetByHdfs</span><span>(</span><span>record</span><span>.</span><span>getDataFilePath</span><span>(</span><span>)</span><span>)</span><span>;</span>
	<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> datasetRow <span>=</span> model<span>.</span><span>transform</span><span>(</span>dataSource<span>)</span><span>.</span><span>select</span><span>(</span><span>"features"</span><span>,</span> <span>"label"</span><span>,</span> <span>"prediction"</span><span>)</span><span>;</span>
	<span>//平滑指数</span>
	map<span>.</span><span>put</span><span>(</span><span>"smoothing"</span><span>,</span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>model<span>.</span><span>getSmoothing</span><span>(</span><span>)</span><span>,</span> <span>3</span><span>)</span><span>)</span><span>;</span>
	<span>//数据</span>
	map<span>.</span><span>put</span><span>(</span><span>"data"</span><span>,</span> <span>toList</span><span>(</span>datasetRow<span>)</span><span>)</span><span>;</span>
	<span>return</span> map<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br></div></div><hr>
<h3 id="getdatasetbyhdfs方法"> getDataSetByHdfs方法</h3>
<p>这个方法我与上面的方法放在一个类中，所以sparkSession没重复写</p>
<div><pre><code><span>/**
	 * 从hdfs中取数据
	 *
	 * @param dataFilePath 数据路径
	 * @return 数据集合
	 */</span>
	<span>private</span> <span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> <span>getDataSetByHdfs</span><span>(</span><span>String</span> dataFilePath<span>)</span> <span>{</span>

		<span>//屏蔽日志</span>
		<span>Logger</span><span>.</span><span>getLogger</span><span>(</span><span>"org.apache.spark"</span><span>)</span><span>.</span><span>setLevel</span><span>(</span><span>Level</span><span>.</span>WARN<span>)</span><span>;</span>
		<span>Logger</span><span>.</span><span>getLogger</span><span>(</span><span>"org.eclipse.jetty.server"</span><span>)</span><span>.</span><span>setLevel</span><span>(</span><span>Level</span><span>.</span>OFF<span>)</span><span>;</span>

		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> dataset<span>;</span>
		<span>try</span> <span>{</span>
			<span>//我这里的数据是libsvm格式的 如果是其他格式请自行更改</span>
			dataset <span>=</span> sparkSession<span>.</span><span>read</span><span>(</span><span>)</span><span>.</span><span>format</span><span>(</span><span>"libsvm"</span><span>)</span><span>.</span><span>load</span><span>(</span>dataFilePath<span>)</span><span>;</span>
			log<span>.</span><span>info</span><span>(</span><span>"获取数据结束 "</span><span>)</span><span>;</span>
		<span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>
			log<span>.</span><span>info</span><span>(</span><span>"读取失败:{} "</span><span>,</span> e<span>.</span><span>getMessage</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> dataset<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><h3 id="tolist"> toList</h3>
<div><pre><code><span>/**
	 * dataset数据转化为list数据
	 *
	 * @param record 数据
	 * @return 数据集合
	 */</span>
	<span>private</span> <span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> <span>toList</span><span>(</span><span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> <span>record</span><span>)</span> <span>{</span>
		log<span>.</span><span>info</span><span>(</span><span>"格式化结果数据集==============================="</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> list <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>String</span><span>[</span><span>]</span> columns <span>=</span> <span>record</span><span>.</span><span>columns</span><span>(</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Row</span><span>></span></span> rows <span>=</span> <span>record</span><span>.</span><span>collectAsList</span><span>(</span><span>)</span><span>;</span>
		<span>for</span> <span>(</span><span>Row</span> row <span>:</span> rows<span>)</span> <span>{</span>
			<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span></span> obj <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>16</span><span>)</span><span>;</span>
			<span>for</span> <span>(</span><span>int</span> j <span>=</span> <span>0</span><span>;</span> j <span>&lt;</span> columns<span>.</span>length<span>;</span> j<span>++</span><span>)</span> <span>{</span>
				<span>String</span> col <span>=</span> columns<span>[</span>j<span>]</span><span>;</span>
				<span>Object</span> rowAs <span>=</span> row<span>.</span><span>getAs</span><span>(</span>col<span>)</span><span>;</span>
				<span>String</span> val <span>=</span> <span>""</span><span>;</span>
				<span>//如果是数组 </span>
				<span>//这一段不需要的可以只留下else的内容</span>
				<span>if</span> <span>(</span>rowAs <span>instanceof</span> <span>DenseVector</span><span>)</span> <span>{</span>
					<span>if</span> <span>(</span><span>(</span><span>(</span><span>DenseVector</span><span>)</span> rowAs<span>)</span><span>.</span><span>values</span><span>(</span><span>)</span> <span>instanceof</span> <span>double</span><span>[</span><span>]</span><span>)</span> <span>{</span>
						val <span>=</span> <span>ArrayUtil</span><span>.</span><span>join</span><span>(</span>
								<span>Arrays</span><span>.</span><span>stream</span><span>(</span><span>(</span><span>(</span><span>DenseVector</span><span>)</span> rowAs<span>)</span><span>.</span><span>values</span><span>(</span><span>)</span><span>)</span>
										<span>.</span><span>map</span><span>(</span>rowVal <span>-></span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>rowVal<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span>
								<span>,</span> <span>","</span><span>)</span>
						<span>;</span>
					<span>}</span> <span>else</span> <span>{</span>
						val <span>=</span> rowAs<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span>
					<span>}</span>
				<span>}</span> <span>else</span> <span>{</span>
					val <span>=</span> rowAs<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span>
				<span>}</span>

				obj<span>.</span><span>put</span><span>(</span>col<span>,</span> val<span>)</span><span>;</span>
				log<span>.</span><span>info</span><span>(</span><span>"列：{},名：{},值：{}"</span><span>,</span> j<span>,</span> col<span>,</span> val<span>)</span><span>;</span>
			<span>}</span>
			list<span>.</span><span>add</span><span>(</span>obj<span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> list<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spark"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-12-10T11:10:13.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java-spark一元(多元)线性回归</title>
    <id>/2020/12/10/java-spark%E4%B8%80%E5%85%83-%E5%A4%9A%E5%85%83-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/</id>
    <link href="https://fangweilong.github.io/2020/12/10/java-spark%E4%B8%80%E5%85%83-%E5%A4%9A%E5%85%83-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h3 id="配置"> 配置</h3>
<p>配置请看我的<a href="https://blog.csdn.net/tutian2000/article/details/110948695" target="_blank" rel="noopener noreferrer">其他文章 点击跳转</a></p>
<h3 id="spark官方文档"> spark官方文档</h3>
<p><a href="http://spark.apache.org/docs/latest/ml-classification-regression.html#linear-regression" target="_blank" rel="noopener noreferrer">点击跳转官方文档</a></p>
<h3 id="其它文章"> 其它文章</h3>
<p>推荐一个在蚂蚁做算法的人写的文章，不过他的文章偏专业化，有很多数学学公式。我是看的比较懵。<a href="https://www.guofei.site/2017/11/22/regression.html" target="_blank" rel="noopener noreferrer">点击跳转</a></p>
<h3 id="数据"> 数据</h3>
<h4 id="训练数据"> 训练数据</h4>
<p><img src="https://img-blog.csdnimg.cn/20201210115340670.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<h4 id="预测数据"> 预测数据</h4>
<p><img src="https://img-blog.csdnimg.cn/20201210115400444.png" alt="
" /></p>
<hr>
<h3 id="实体类"> 实体类</h3>
<p>用了swagger和lombok 不需要的可以删掉</p>
<div><pre><code>
<span>import</span> <span>io<span>.</span>swagger<span>.</span>annotations<span>.</span></span><span>ApiModelProperty</span><span>;</span>
<span>import</span> <span>lombok<span>.</span></span><span>Data</span><span>;</span>

<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>Max</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>Min</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>NotEmpty</span><span>;</span>
<span>import</span> <span>javax<span>.</span>validation<span>.</span>constraints<span>.</span></span><span>NotNull</span><span>;</span>

<span>/**
 * 线性回归参数
 *
 * @author teler
 * @date 2020-09-21
 */</span>
<span>@Data</span>
<span>public</span> <span>class</span> <span>LinearRegressionEntity</span> <span>{</span>
	<span>/**
	 * 训练数据集路径
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"训练数据集路径"</span><span>)</span>
	<span>@NotEmpty</span><span>(</span>message <span>=</span> <span>"必须有样本集"</span><span>)</span>
	<span>private</span> <span>String</span> trainFilePath<span>;</span>
	<span>/**
	 * 预测数据集路径
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"预测数据集路径"</span><span>)</span>
	<span>@NotEmpty</span><span>(</span>message <span>=</span> <span>"必须有预测集"</span><span>)</span>
	<span>private</span> <span>String</span> dataFilePath<span>;</span>
	<span>/**
	 * 用于测试模型的数据比例，范围[0,1]
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"用于测试模型的数据比例，范围[0,1]"</span><span>)</span>
	<span>@Max</span><span>(</span>value <span>=</span> <span>1L</span><span>,</span> message <span>=</span> <span>"数据比例最大值为1.0"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>0L</span><span>,</span> message <span>=</span> <span>"数据比例最小值为0.0"</span><span>)</span>
	<span>private</span> <span>double</span> testDataPct<span>;</span>
	<span>/**
	 * 迭代次数
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"迭代次数"</span><span>)</span>
	<span>@NotNull</span><span>(</span>message <span>=</span> <span>"迭代次数必填"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>0</span><span>,</span> message <span>=</span> <span>"迭代次数最小值为0"</span><span>)</span>
	<span>private</span> <span>Integer</span> iter<span>;</span>
	<span>/**
	 * 正则化参数,范围[0,1]
	 */</span>
	<span>@NotNull</span><span>(</span>message <span>=</span> <span>"正则化参数必填"</span><span>)</span>
	<span>@Max</span><span>(</span>value <span>=</span> <span>1L</span><span>,</span> message <span>=</span> <span>"正则化参数最大值为1.0"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>0L</span><span>,</span> message <span>=</span> <span>"正则化参数最小值为0.0"</span><span>)</span>
	<span>@ApiModelProperty</span><span>(</span><span>"正则化参数,范围[0,1]"</span><span>)</span>
	<span>private</span> <span>double</span> regParam<span>;</span>
	<span>/**
	 * 弹性网络混合参数，范围[0,1]
	 */</span>
	<span>@ApiModelProperty</span><span>(</span><span>"弹性网络混合参数，范围[0,1]"</span><span>)</span>
	<span>@Max</span><span>(</span>value <span>=</span> <span>1L</span><span>,</span> message <span>=</span> <span>"弹性网络混合参数最大值为1.0"</span><span>)</span>
	<span>@Min</span><span>(</span>value <span>=</span> <span>0L</span><span>,</span> message <span>=</span> <span>"弹性网络混合参数最小值为0.0"</span><span>)</span>
	<span>private</span> <span>double</span> elasticNetParam<span>;</span>
<span>}</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br></div></div><h3 id="算法实现"> 算法实现</h3>
<p>里面有些方法是为了保留小数 不需要的自己改</p>
<div><pre><code>
<span>@Resource</span>
<span>private</span> <span>transient</span> <span>SparkSession</span> sparkSession<span>;</span>

<span>@Override</span>
	<span>public</span> <span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> <span>linearRegression</span><span>(</span><span>LinearRegressionEntity</span> <span>record</span><span>)</span> <span>{</span>
		log<span>.</span><span>info</span><span>(</span><span>"========== 线性回归计算开始 =========="</span><span>)</span><span>;</span>
		<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>Object</span><span>></span></span> map <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>16</span><span>)</span><span>;</span>
		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> source <span>=</span> <span>getDataSetByHdfs</span><span>(</span><span>record</span><span>.</span><span>getTrainFilePath</span><span>(</span><span>)</span><span>)</span><span>;</span>

		<span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> sourceList <span>=</span> <span>toList</span><span>(</span>source<span>)</span><span>;</span>
		<span>//训练数据</span>
		map<span>.</span><span>put</span><span>(</span><span>"training"</span><span>,</span> sourceList<span>)</span><span>;</span>

		<span>//根据比例从数据源中随机抽取数据 /训练数据和测试数据比例 建议设为0.8</span>
		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span><span>[</span><span>]</span> splits <span>=</span> source<span>.</span><span>randomSplit</span><span>(</span><span>new</span> <span>double</span><span>[</span><span>]</span><span>{</span><span>record</span><span>.</span><span>getTestDataPct</span><span>(</span><span>)</span><span>,</span> <span>1</span> <span>-</span> <span>record</span><span>.</span><span>getTestDataPct</span><span>(</span><span>)</span><span>}</span><span>,</span>
				<span>1234L</span><span>)</span><span>;</span>
		<span>//训练数据</span>
		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> trainingData <span>=</span> splits<span>[</span><span>0</span><span>]</span><span>.</span><span>cache</span><span>(</span><span>)</span><span>;</span>

		<span>// 10 / 0.3 / 0.8</span>
		<span>LinearRegression</span> lr <span>=</span> <span>new</span> <span>LinearRegression</span><span>(</span><span>)</span>
				                      <span>.</span><span>setMaxIter</span><span>(</span><span>record</span><span>.</span><span>getIter</span><span>(</span><span>)</span><span>)</span>
				                      <span>.</span><span>setRegParam</span><span>(</span><span>record</span><span>.</span><span>getRegParam</span><span>(</span><span>)</span><span>)</span>
				                      <span>.</span><span>setElasticNetParam</span><span>(</span><span>record</span><span>.</span><span>getElasticNetParam</span><span>(</span><span>)</span><span>)</span><span>;</span>

		<span>LinearRegressionModel</span> lrModel <span>=</span> lr<span>.</span><span>fit</span><span>(</span>trainingData<span>)</span><span>;</span>

		<span>//系数</span>
		map<span>.</span><span>put</span><span>(</span><span>"coefficients"</span><span>,</span> <span>Arrays</span><span>.</span><span>stream</span><span>(</span>lrModel<span>.</span><span>coefficients</span><span>(</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span><span>)</span><span>.</span><span>map</span><span>(</span>val <span>-></span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>val<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
		<span>//截距</span>
		map<span>.</span><span>put</span><span>(</span><span>"intercept"</span><span>,</span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>lrModel<span>.</span><span>intercept</span><span>(</span><span>)</span><span>,</span> <span>3</span><span>)</span><span>)</span><span>;</span>

		<span>//训练数据结果集</span>
		<span>LinearRegressionTrainingSummary</span> trainingSummary <span>=</span> lrModel<span>.</span><span>summary</span><span>(</span><span>)</span><span>;</span>

		<span>//迭代次数</span>
		map<span>.</span><span>put</span><span>(</span><span>"numIterations"</span><span>,</span> trainingSummary<span>.</span><span>totalIterations</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>//损失率，一般会逐渐减小</span>
		map<span>.</span><span>put</span><span>(</span><span>"objectiveHistory"</span><span>,</span> <span>Arrays</span><span>.</span><span>stream</span><span>(</span>trainingSummary<span>.</span><span>objectiveHistory</span><span>(</span><span>)</span><span>)</span><span>.</span><span>map</span><span>(</span>val <span>-></span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>val<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
		<span>//均方根误差</span>
		map<span>.</span><span>put</span><span>(</span><span>"rmse"</span><span>,</span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>trainingSummary<span>.</span><span>rootMeanSquaredError</span><span>(</span><span>)</span><span>,</span> <span>3</span><span>)</span><span>)</span><span>;</span>
		<span>//真实误差</span>
		map<span>.</span><span>put</span><span>(</span><span>"mae"</span><span>,</span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>trainingSummary<span>.</span><span>meanAbsoluteError</span><span>(</span><span>)</span><span>,</span> <span>3</span><span>)</span><span>)</span><span>;</span>
		<span>//r平方 越接近1说明效果越好</span>
		map<span>.</span><span>put</span><span>(</span><span>"r2"</span><span>,</span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>trainingSummary<span>.</span><span>r2</span><span>(</span><span>)</span><span>,</span> <span>3</span><span>)</span><span>)</span><span>;</span>

		<span>//预测数据</span>
		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> predictionData <span>=</span> <span>getDataSetByHdfs</span><span>(</span><span>record</span><span>.</span><span>getDataFilePath</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> predictionResult <span>=</span> lrModel<span>.</span><span>transform</span><span>(</span>predictionData<span>)</span><span>.</span><span>selectExpr</span><span>(</span><span>"label"</span><span>,</span> <span>"features"</span><span>,</span> <span>"round(prediction,3) as prediction"</span><span>)</span><span>;</span>

		predictionResult<span>.</span><span>show</span><span>(</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Object</span><span>></span></span> predictionFeaturesVal <span>=</span> <span>dataSetToString</span><span>(</span>predictionResult<span>.</span><span>select</span><span>(</span><span>"features"</span><span>)</span><span>)</span><span>;</span>
		
		map<span>.</span><span>put</span><span>(</span><span>"data"</span><span>,</span> <span>toList</span><span>(</span>predictionResult<span>)</span><span>)</span><span>;</span>
		log<span>.</span><span>info</span><span>(</span><span>"========== 线性回归计算结束 =========="</span><span>)</span><span>;</span>
		<span>return</span> map<span>;</span>
	<span>}</span>



</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br></div></div><hr>
<h3 id="getdatasetbyhdfs方法"> getDataSetByHdfs方法</h3>
<p>这个方法我与上面的方法放在一个类中，所以sparkSession没重复写</p>
<div><pre><code><span>/**
	 * 从hdfs中取数据
	 *
	 * @param dataFilePath 数据路径
	 * @return 数据集合
	 */</span>
	<span>private</span> <span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> <span>getDataSetByHdfs</span><span>(</span><span>String</span> dataFilePath<span>)</span> <span>{</span>

		<span>//屏蔽日志</span>
		<span>Logger</span><span>.</span><span>getLogger</span><span>(</span><span>"org.apache.spark"</span><span>)</span><span>.</span><span>setLevel</span><span>(</span><span>Level</span><span>.</span>WARN<span>)</span><span>;</span>
		<span>Logger</span><span>.</span><span>getLogger</span><span>(</span><span>"org.eclipse.jetty.server"</span><span>)</span><span>.</span><span>setLevel</span><span>(</span><span>Level</span><span>.</span>OFF<span>)</span><span>;</span>

		<span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> dataset<span>;</span>
		<span>try</span> <span>{</span>
			<span>//我这里的数据是libsvm格式的 如果是其他格式请自行更改</span>
			dataset <span>=</span> sparkSession<span>.</span><span>read</span><span>(</span><span>)</span><span>.</span><span>format</span><span>(</span><span>"libsvm"</span><span>)</span><span>.</span><span>load</span><span>(</span>dataFilePath<span>)</span><span>;</span>
			log<span>.</span><span>info</span><span>(</span><span>"获取数据结束 "</span><span>)</span><span>;</span>
		<span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>
			log<span>.</span><span>info</span><span>(</span><span>"读取失败:{} "</span><span>,</span> e<span>.</span><span>getMessage</span><span>(</span><span>)</span><span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> dataset<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><h3 id="tolist"> toList</h3>
<div><pre><code><span>/**
	 * dataset数据转化为list数据
	 *
	 * @param record 数据
	 * @return 数据集合
	 */</span>
	<span>private</span> <span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> <span>toList</span><span>(</span><span>Dataset</span><span><span>&lt;</span><span>Row</span><span>></span></span> <span>record</span><span>)</span> <span>{</span>
		log<span>.</span><span>info</span><span>(</span><span>"格式化结果数据集==============================="</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Map</span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span><span>></span></span> list <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>String</span><span>[</span><span>]</span> columns <span>=</span> <span>record</span><span>.</span><span>columns</span><span>(</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>Row</span><span>></span></span> rows <span>=</span> <span>record</span><span>.</span><span>collectAsList</span><span>(</span><span>)</span><span>;</span>
		<span>for</span> <span>(</span><span>Row</span> row <span>:</span> rows<span>)</span> <span>{</span>
			<span>Map</span><span><span>&lt;</span><span>String</span><span>,</span> <span>String</span><span>></span></span> obj <span>=</span> <span>new</span> <span>HashMap</span><span><span>&lt;</span><span>></span></span><span>(</span><span>16</span><span>)</span><span>;</span>
			<span>for</span> <span>(</span><span>int</span> j <span>=</span> <span>0</span><span>;</span> j <span>&lt;</span> columns<span>.</span>length<span>;</span> j<span>++</span><span>)</span> <span>{</span>
				<span>String</span> col <span>=</span> columns<span>[</span>j<span>]</span><span>;</span>
				<span>Object</span> rowAs <span>=</span> row<span>.</span><span>getAs</span><span>(</span>col<span>)</span><span>;</span>
				<span>String</span> val <span>=</span> <span>""</span><span>;</span>
				<span>//如果是数组 </span>
				<span>//这一段不需要的可以只留下else的内容</span>
				<span>if</span> <span>(</span>rowAs <span>instanceof</span> <span>DenseVector</span><span>)</span> <span>{</span>
					<span>if</span> <span>(</span><span>(</span><span>(</span><span>DenseVector</span><span>)</span> rowAs<span>)</span><span>.</span><span>values</span><span>(</span><span>)</span> <span>instanceof</span> <span>double</span><span>[</span><span>]</span><span>)</span> <span>{</span>
						val <span>=</span> <span>ArrayUtil</span><span>.</span><span>join</span><span>(</span>
								<span>Arrays</span><span>.</span><span>stream</span><span>(</span><span>(</span><span>(</span><span>DenseVector</span><span>)</span> rowAs<span>)</span><span>.</span><span>values</span><span>(</span><span>)</span><span>)</span>
										<span>.</span><span>map</span><span>(</span>rowVal <span>-></span> <span>NumberUtil</span><span>.</span><span>roundDown</span><span>(</span>rowVal<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span>
								<span>,</span> <span>","</span><span>)</span>
						<span>;</span>
					<span>}</span> <span>else</span> <span>{</span>
						val <span>=</span> rowAs<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span>
					<span>}</span>
				<span>}</span> <span>else</span> <span>{</span>
					val <span>=</span> rowAs<span>.</span><span>toString</span><span>(</span><span>)</span><span>;</span>
				<span>}</span>

				obj<span>.</span><span>put</span><span>(</span>col<span>,</span> val<span>)</span><span>;</span>
				log<span>.</span><span>info</span><span>(</span><span>"列：{},名：{},值：{}"</span><span>,</span> j<span>,</span> col<span>,</span> val<span>)</span><span>;</span>
			<span>}</span>
			list<span>.</span><span>add</span><span>(</span>obj<span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> list<span>;</span>
	<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spark"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-12-10T11:10:13.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java-spark的使用和配置</title>
    <id>/2020/12/10/java-spark%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E9%85%8D%E7%BD%AE/</id>
    <link href="https://fangweilong.github.io/2020/12/10/java-spark%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E9%85%8D%E7%BD%AE/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言"> 前言</h2>
<p>spark在java使用比较少，多是scala的用法，我这里介绍一下我在项目中使用的代码配置
详细算法的使用请点击我主页列表查看</p>
<h2 id="版本"> 版本</h2>
<table>
<thead>
<tr>
<th>jar</th>
<th>版本</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>spark</td>
<td>3.0.1</td>
<td></td>
</tr>
<tr>
<td>scala</td>
<td>2.12</td>
<td>这个版本注意和spark版本对应，只是为了引jar包</td>
</tr>
<tr>
<td>springboot版本</td>
<td>2.3.2.RELEASE</td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h3 id="maven"> maven</h3>
<div><pre><code>&lt;!-- spark --&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;
                &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;
                &lt;version&gt;${spark.version}&lt;/version&gt;
                &lt;exclusions&gt;
                    &lt;exclusion&gt;
                        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
                        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
                    &lt;/exclusion&gt;
                    &lt;exclusion&gt;
                        &lt;groupId&gt;log4j&lt;/groupId&gt;
                        &lt;artifactId&gt;log4j&lt;/artifactId&gt;
                    &lt;/exclusion&gt;
                &lt;/exclusions&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;
                &lt;artifactId&gt;spark-mllib_2.12&lt;/artifactId&gt;
                &lt;version&gt;${spark.version}&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;
                &lt;artifactId&gt;janino&lt;/artifactId&gt;
                &lt;version&gt;${janino.version}&lt;/version&gt;
            &lt;/dependency&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br></div></div><h3 id="yml"> yml</h3>
<div><pre><code>spark:
  name: spark-web
  # 我使用的local模式
  master: local[*]
  #用于存储mpp输出文件和RDD缓存文件，常配置在SSD等存储设备上，可以通过逗号分隔指定多个目录。
  local-dir: D://spark-tmp
  # 内存
  memory: 2147480000
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h3 id="config"> config</h3>
<div><pre><code><span>import</span> <span>lombok<span>.</span></span><span>Getter</span><span>;</span>
<span>import</span> <span>lombok<span>.</span></span><span>Setter</span><span>;</span>
<span>import</span> <span>lombok<span>.</span></span><span>ToString</span><span>;</span>
<span>import</span> <span>org<span>.</span>apache<span>.</span>spark<span>.</span></span><span>SparkContext</span><span>;</span>
<span>import</span> <span>org<span>.</span>apache<span>.</span>spark<span>.</span>sql<span>.</span></span><span>SparkSession</span><span>;</span>
<span>import</span> <span>org<span>.</span>springframework<span>.</span>boot<span>.</span>context<span>.</span>properties<span>.</span></span><span>ConfigurationProperties</span><span>;</span>
<span>import</span> <span>org<span>.</span>springframework<span>.</span>context<span>.</span>annotation<span>.</span></span><span>Bean</span><span>;</span>
<span>import</span> <span>org<span>.</span>springframework<span>.</span>context<span>.</span>annotation<span>.</span></span><span>Configuration</span><span>;</span>

<span>/**
 * spark配置项
 *
 * @author teler
 */</span>
<span>@ToString</span>
<span>@Getter</span>
<span>@Setter</span>
<span>@Configuration</span>
<span>@ConfigurationProperties</span><span>(</span>prefix <span>=</span> <span>"spark"</span><span>)</span>
<span>public</span> <span>class</span> <span>SparkConfig</span> <span>{</span>

	<span>private</span> <span>String</span> name<span>;</span>

	<span>private</span> <span>String</span> master<span>;</span>

	<span>private</span> <span>String</span> localDir<span>;</span>

	<span>private</span> <span>String</span> memory<span>;</span>

	<span>@Bean</span>
	<span>public</span> <span>SparkSession</span> <span>sparkSession</span><span>(</span><span>)</span> <span>{</span>
		<span>return</span> <span>SparkSession</span><span>.</span><span>builder</span><span>(</span><span>)</span>
				       <span>.</span><span>appName</span><span>(</span>name<span>)</span>
				       <span>.</span><span>master</span><span>(</span>master<span>)</span>
				       <span>.</span><span>config</span><span>(</span><span>"spark.testing.memory"</span><span>,</span> memory<span>)</span>
				       <span>.</span><span>config</span><span>(</span><span>"spark.local.dir"</span><span>,</span> localDir<span>)</span>
				       <span>.</span><span>getOrCreate</span><span>(</span><span>)</span><span>;</span>
	<span>}</span>
<span>}</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spark"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-12-10T11:10:13.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">MinMaxNormalize规一化算法</title>
    <id>/2021/04/16/minmaxnormalize%E8%A7%84%E4%B8%80%E5%8C%96%E7%AE%97%E6%B3%95/</id>
    <link href="https://fangweilong.github.io/2021/04/16/minmaxnormalize%E8%A7%84%E4%B8%80%E5%8C%96%E7%AE%97%E6%B3%95/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<div><pre><code><span>public</span> <span>class</span> <span>MinMaxNormalize</span> <span>{</span>

	<span>/**
	 * 线性归一化 公式：X(norm) = (X - min) / (max - min)
	 *
	 * @param points     原始数据
	 * @param conversion 是否行转列
	 * @return 归一化后的数据
	 */</span>
	<span>public</span> <span>static</span> <span>double</span><span>[</span><span>]</span> <span>normalize</span><span>(</span><span>double</span><span>[</span><span>]</span><span>[</span><span>]</span> points<span>,</span> <span>boolean</span> conversion<span>)</span> <span>{</span>
		<span>if</span> <span>(</span>points <span>==</span> <span>null</span> <span>||</span> points<span>.</span>length <span>&lt;</span> <span>1</span><span>)</span> <span>{</span>
			<span>return</span> <span>new</span> <span>double</span><span>[</span><span>0</span><span>]</span><span>;</span>
		<span>}</span>
		<span>//新数组</span>
		<span>double</span><span>[</span><span>]</span><span>[</span><span>]</span> newPoints <span>=</span> <span>new</span> <span>double</span><span>[</span>points<span>[</span><span>0</span><span>]</span><span>.</span>length<span>]</span><span>[</span>points<span>.</span>length<span>]</span><span>;</span>
		<span>if</span> <span>(</span>conversion<span>)</span> <span>{</span>
			<span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> points<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>
				<span>for</span> <span>(</span><span>int</span> j <span>=</span> <span>0</span><span>;</span> j <span>&lt;</span> points<span>[</span>i<span>]</span><span>.</span>length<span>;</span> j<span>++</span><span>)</span> <span>{</span>
					newPoints<span>[</span>j<span>]</span><span>[</span>i<span>]</span> <span>=</span> points<span>[</span>i<span>]</span><span>[</span>j<span>]</span><span>;</span>
				<span>}</span>
			<span>}</span>
		<span>}</span> <span>else</span> <span>{</span>
			newPoints <span>=</span> points<span>;</span>
		<span>}</span>

		<span>Arrays</span><span>.</span><span>stream</span><span>(</span>newPoints<span>)</span><span>.</span><span>forEach</span><span>(</span>val <span>-></span> <span>{</span>
			log<span>.</span><span>info</span><span>(</span><span>"newPoints val:{}"</span><span>,</span> val<span>)</span><span>;</span>
		<span>}</span><span>)</span><span>;</span>

		<span>double</span><span>[</span><span>]</span><span>[</span><span>]</span> p <span>=</span> <span>new</span> <span>double</span><span>[</span>newPoints<span>.</span>length<span>]</span><span>[</span>newPoints<span>[</span><span>0</span><span>]</span><span>.</span>length<span>]</span><span>;</span>
		<span>for</span> <span>(</span><span>int</span> j <span>=</span> <span>0</span><span>;</span> j <span>&lt;</span> newPoints<span>[</span><span>0</span><span>]</span><span>.</span>length<span>;</span> j<span>++</span><span>)</span> <span>{</span>
			<span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> newPoints<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>
				p<span>[</span>i<span>]</span> <span>=</span> <span>minMax</span><span>(</span>newPoints<span>[</span>i<span>]</span><span>)</span><span>;</span>
			<span>}</span>
		<span>}</span>

		<span>Arrays</span><span>.</span><span>stream</span><span>(</span>p<span>)</span><span>.</span><span>forEach</span><span>(</span>val <span>-></span> <span>{</span>
			log<span>.</span><span>info</span><span>(</span><span>"p val:{}"</span><span>,</span> val<span>)</span><span>;</span>
		<span>}</span><span>)</span><span>;</span>
		<span>double</span><span>[</span><span>]</span> sumArry <span>=</span> <span>Arrays</span><span>.</span><span>stream</span><span>(</span>p<span>)</span><span>.</span><span>mapToDouble</span><span>(</span>val <span>-></span> <span>Arrays</span><span>.</span><span>stream</span><span>(</span>val<span>)</span><span>.</span><span>sum</span><span>(</span><span>)</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span><span>;</span>
		<span>double</span><span>[</span><span>]</span> norArry <span>=</span> <span>proportion</span><span>(</span>sumArry<span>)</span><span>;</span>
		log<span>.</span><span>info</span><span>(</span><span>"norArry:{}"</span><span>,</span> norArry<span>)</span><span>;</span>
		<span>return</span> norArry<span>;</span>
	<span>}</span>

	<span>private</span> <span>static</span> <span>double</span><span>[</span><span>]</span> <span>minMax</span><span>(</span><span>double</span><span>[</span><span>]</span> points<span>)</span> <span>{</span>
		<span>double</span><span>[</span><span>]</span> p <span>=</span> <span>new</span> <span>double</span><span>[</span>points<span>.</span>length<span>]</span><span>;</span>
		<span>double</span> maxV <span>=</span> <span>maxV</span><span>(</span>points<span>)</span><span>;</span>
		<span>double</span> minV <span>=</span> <span>minV</span><span>(</span>points<span>)</span><span>;</span>
		<span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> points<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>
			p<span>[</span>i<span>]</span> <span>=</span> maxV <span>==</span> minV <span>?</span> minV <span>:</span> <span>(</span>points<span>[</span>i<span>]</span> <span>-</span> minV<span>)</span> <span>/</span> <span>(</span>maxV <span>-</span> minV<span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> p<span>;</span>
	<span>}</span>

	<span>private</span> <span>static</span> <span>double</span><span>[</span><span>]</span> <span>proportion</span><span>(</span><span>double</span><span>[</span><span>]</span> points<span>)</span> <span>{</span>
		<span>double</span><span>[</span><span>]</span> p <span>=</span> <span>new</span> <span>double</span><span>[</span>points<span>.</span>length<span>]</span><span>;</span>
		<span>double</span> sumNum <span>=</span> <span>Arrays</span><span>.</span><span>stream</span><span>(</span>points<span>)</span><span>.</span><span>sum</span><span>(</span><span>)</span><span>;</span>
		log<span>.</span><span>info</span><span>(</span><span>"sumNum:{}"</span><span>,</span> sumNum<span>)</span><span>;</span>
		<span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> points<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>
			p<span>[</span>i<span>]</span> <span>=</span> <span>NumberUtil</span><span>.</span><span>round</span><span>(</span>points<span>[</span>i<span>]</span> <span>/</span> sumNum<span>,</span> <span>3</span><span>)</span><span>.</span><span>doubleValue</span><span>(</span><span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> p<span>;</span>
	<span>}</span>


	<span>/**
	 * 获取矩阵的某一列
	 *
	 * @param points points
	 * @param column column
	 * @return double[]
	 */</span>
	<span>public</span> <span>static</span> <span>double</span><span>[</span><span>]</span> <span>getMatrixCol</span><span>(</span><span>double</span><span>[</span><span>]</span><span>[</span><span>]</span> points<span>,</span> <span>int</span> column<span>)</span> <span>{</span>
		<span>double</span><span>[</span><span>]</span> matrixJ <span>=</span> <span>new</span> <span>double</span><span>[</span>points<span>.</span>length<span>]</span><span>;</span>
		<span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> points<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>
			matrixJ<span>[</span>i<span>]</span> <span>=</span> points<span>[</span>i<span>]</span><span>[</span>column<span>]</span><span>;</span>
		<span>}</span>
		<span>return</span> matrixJ<span>;</span>
	<span>}</span>

	<span>/**
	 * 获取数组中的最小值
	 *
	 * @param matrixJ matrixJ
	 * @return v
	 */</span>
	<span>public</span> <span>static</span> <span>double</span> <span>minV</span><span>(</span><span>double</span><span>[</span><span>]</span> matrixJ<span>)</span> <span>{</span>
		<span>return</span> <span>Arrays</span><span>.</span><span>stream</span><span>(</span>matrixJ<span>)</span><span>.</span><span>min</span><span>(</span><span>)</span><span>.</span><span>getAsDouble</span><span>(</span><span>)</span><span>;</span>
	<span>}</span>

	<span>/**
	 * 获取数组中的最大值
	 *
	 * @param matrixJ matrixJ
	 * @return v
	 */</span>
	<span>public</span> <span>static</span> <span>double</span> <span>maxV</span><span>(</span><span>double</span><span>[</span><span>]</span> matrixJ<span>)</span> <span>{</span>
		<span>return</span> <span>Arrays</span><span>.</span><span>stream</span><span>(</span>matrixJ<span>)</span><span>.</span><span>max</span><span>(</span><span>)</span><span>.</span><span>getAsDouble</span><span>(</span><span>)</span><span>;</span>
	<span>}</span>

<span>}</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-04-16T09:52:08.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">springboot+mybatis事务</title>
    <id>/2018/05/03/springboot-mybatis%E4%BA%8B%E5%8A%A1/</id>
    <link href="https://fangweilong.github.io/2018/05/03/springboot-mybatis%E4%BA%8B%E5%8A%A1/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>使用</p>
<div><pre><code>    @Transactional
</code></pre>
<div><span>1</span><br></div></div><p>注解
原理还不了解，待更新</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spring boot"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-05-03T16:44:10.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">springboot-AOP使用@Before和@After做一个最简单的切面</title>
    <id>/2019/08/30/springboot-aop%E4%BD%BF%E7%94%A8-before%E5%92%8C-after%E5%81%9A%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%87%E9%9D%A2/</id>
    <link href="https://fangweilong.github.io/2019/08/30/springboot-aop%E4%BD%BF%E7%94%A8-before%E5%92%8C-after%E5%81%9A%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%87%E9%9D%A2/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>写一个最简单明细的切面，希望可以复制了直接用。我会尽量把注释写详细</p>
<p>1.引入jar
因为我是用的springboot，所以只需要引入一个包，如果你习惯的是引入两个包 也可以引入下面的两个包
SpingBoot:</p>
<div><pre><code>&lt;!--aop切面--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>Spring:</p>
<div><pre><code>&lt;!--aop切面--&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
   &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
   &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>2.切面类
作用：可以做登录拦截或者参数拦截
首先新建一个.java文件，在类上加上@Component和@Aspect 注解</p>
<div><pre><code><span>@Component</span> 	<span>//把切面类加入到IOC容器中 </span>
<span>@Aspect</span>		<span>//使之成为切面类</span>
<span>@Order</span><span>(</span><span>1</span><span>)</span>	<span>//如果有多个 可以定义来控制顺序 数字越小执行顺序靠前</span>
<span>public</span> <span>class</span> <span>AopHandlerAspect</span> <span>{</span>
	<span>//日志 我是使用的hutool中的日志方法 你可以改为你自己的</span>
    <span>private</span> <span>Log</span> logger <span>=</span> <span>LogFactory</span><span>.</span><span>get</span><span>(</span><span>)</span><span>;</span>
	
	<span>//为了记录执行时间 方便调试 如果不需要可以去掉</span>
    <span>ThreadLocal</span><span><span>&lt;</span><span>Long</span><span>></span></span> startTime <span>=</span> <span>new</span> <span>ThreadLocal</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>

	<span>//定义一个切入点 我这里是从controller切入 不是从注解切入</span>
	<span>//详情看下方的 切入点表达式</span>
    <span>@Pointcut</span><span>(</span><span>"execution(public * cn.o.generate.controller.*.*(..))"</span><span>)</span>
    <span>public</span> <span>void</span> <span>pointCut</span><span>(</span><span>)</span> <span>{</span><span>}</span>
	
	<span>//在进入方法前执行 可以对参数进行限制或者拦截</span>
	<span>//通常在这边做日志存储存到数据库中</span>
    <span>@Before</span><span>(</span><span>"pointCut()"</span><span>)</span>
    <span>public</span> <span>void</span> <span>before</span><span>(</span><span>JoinPoint</span> joinPoint<span>)</span> <span>throws</span> <span>Throwable</span> <span>{</span>
        logger<span>.</span><span>info</span><span>(</span><span>"==================前置执行=====================>"</span><span>)</span><span>;</span>
        <span>ServletRequestAttributes</span> attributes <span>=</span> <span>(</span><span>ServletRequestAttributes</span><span>)</span> <span>RequestContextHolder</span><span>.</span><span>getRequestAttributes</span><span>(</span><span>)</span><span>;</span>
        <span>HttpServletRequest</span> request <span>=</span> attributes<span>.</span><span>getRequest</span><span>(</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"请求来源： =》"</span> <span>+</span> request<span>.</span><span>getRemoteAddr</span><span>(</span><span>)</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"请求URL："</span> <span>+</span> request<span>.</span><span>getRequestURL</span><span>(</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>)</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"请求方式："</span> <span>+</span> request<span>.</span><span>getMethod</span><span>(</span><span>)</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"响应方法："</span> <span>+</span> joinPoint<span>.</span><span>getSignature</span><span>(</span><span>)</span><span>.</span><span>getDeclaringTypeName</span><span>(</span><span>)</span> <span>+</span> <span>"."</span> <span>+</span> joinPoint<span>.</span><span>getSignature</span><span>(</span><span>)</span><span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"请求参数："</span> <span>+</span> <span>Arrays</span><span>.</span><span>toString</span><span>(</span>joinPoint<span>.</span><span>getArgs</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"==================前置执行完成==================>"</span><span>)</span><span>;</span>
        startTime<span>.</span><span>set</span><span>(</span><span>System</span><span>.</span><span>currentTimeMillis</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span>
<span>//环绕执行</span>
<span>//定义需要匹配的切点表达式，同时需要匹配参数</span>
    <span>@Around</span><span>(</span><span>"pointCut()"</span><span>)</span>
    <span>public</span> <span>Object</span> <span>around</span><span>(</span><span>ProceedingJoinPoint</span> pjp<span>)</span> <span>throws</span> <span>Throwable</span> <span>{</span>
        <span>StaticLog</span><span>.</span><span>info</span><span>(</span><span>"==================方法环绕前置start=====================>"</span><span>)</span><span>;</span>
        <span>//这句必须有 往下执行方法</span>
        <span>Object</span> result <span>=</span> pjp<span>.</span><span>proceed</span><span>(</span><span>)</span><span>;</span>

        <span>StaticLog</span><span>.</span><span>info</span><span>(</span><span>"==================方法环绕后置start=====================>"</span><span>)</span><span>;</span>
        <span>StaticLog</span><span>.</span><span>info</span><span>(</span><span>"耗时（毫秒）："</span> <span>+</span> time<span>)</span><span>;</span>
        <span>StaticLog</span><span>.</span><span>info</span><span>(</span><span>"返回数据：{}"</span><span>,</span> result<span>)</span><span>;</span>
        <span>StaticLog</span><span>.</span><span>info</span><span>(</span><span>"==================方法环绕end======================>"</span><span>)</span><span>;</span>
        <span>return</span> result<span>;</span>
    <span>}</span>

	<span>//在方法执行后执行 可以打印返回的数据 判断数据是否是自己需要的</span>
    <span>@After</span><span>(</span><span>"pointCut()"</span><span>)</span>
    <span>public</span> <span>void</span> <span>after</span><span>(</span><span>JoinPoint</span> point<span>)</span> <span>{</span>
        <span>if</span> <span>(</span>startTime<span>.</span><span>get</span><span>(</span><span>)</span> <span>==</span> <span>null</span><span>)</span> <span>{</span>
            startTime<span>.</span><span>set</span><span>(</span><span>System</span><span>.</span><span>currentTimeMillis</span><span>(</span><span>)</span><span>)</span><span>;</span>
        <span>}</span>
        logger<span>.</span><span>info</span><span>(</span><span>"==================后置执行======================>"</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"耗时（毫秒）："</span> <span>+</span> <span>(</span><span>System</span><span>.</span><span>currentTimeMillis</span><span>(</span><span>)</span> <span>-</span> startTime<span>.</span><span>get</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"返回数据：{}"</span><span>,</span> point<span>.</span><span>getArgs</span><span>(</span><span>)</span><span>)</span><span>;</span>
        logger<span>.</span><span>info</span><span>(</span><span>"==================后置执行完成==================>"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br></div></div><p><strong>切入点表达式</strong></p>
<div><pre><code>定义切入点的时候需要一个包含名字和任意参数的签名，还有一个切入点表达式，如execution(public * com.example.aop...(..))

切入点表达式的格式：execution([可见性]返回类型[声明类型].方法名(参数)[异常]) 
其中[]内的是可选的，其它的还支持通配符的使用： 
1) *：匹配所有字符 
2) ..：一般用于匹配多个包，多个参数 
3) +：表示类及其子类 
4)运算符有：&amp;&amp;,||,!

切入点表达式关键词用例： 
1）execution：用于匹配子表达式。 
//匹配com.cjm.model包及其子包中所有类中的所有方法，返回类型任意，方法参数任意 
@Pointcut(“execution(* com.cjm.model...(..))”) 
public void before(){}

2）within：用于匹配连接点所在的Java类或者包。 
//匹配Person类中的所有方法 
@Pointcut(“within(com.cjm.model.Person)”) 
public void before(){} 
//匹配com.cjm包及其子包中所有类中的所有方法 
@Pointcut(“within(com.cjm..*)”) 
public void before(){}

3） this：用于向通知方法中传入代理对象的引用。 
@Before(“before() &amp;&amp; this(proxy)”) 
public void beforeAdvide(JoinPoint point, Object proxy){ 
//处理逻辑 
}

4）target：用于向通知方法中传入目标对象的引用。 
@Before(“before() &amp;&amp; target(target) 
public void beforeAdvide(JoinPoint point, Object proxy){ 
//处理逻辑 
}

5）args：用于将参数传入到通知方法中。 
@Before(“before() &amp;&amp; args(age,username)”) 
public void beforeAdvide(JoinPoint point, int age, String username){ 
//处理逻辑 
}

6）@within ：用于匹配在类一级使用了参数确定的注解的类，其所有方法都将被匹配。 
@Pointcut(“@within(com.cjm.annotation.AdviceAnnotation)”) 
－ 所有被@AdviceAnnotation标注的类都将匹配 
public void before(){}

7）@target ：和@within的功能类似，但必须要指定注解接口的保留策略为RUNTIME。 
@Pointcut(“@target(com.cjm.annotation.AdviceAnnotation)”) 
public void before(){}

8）@args ：传入连接点的对象对应的Java类必须被@args指定的Annotation注解标注。 
@Before(“@args(com.cjm.annotation.AdviceAnnotation)”) 
public void beforeAdvide(JoinPoint point){ 
//处理逻辑 
}

9）@annotation ：匹配连接点被它参数指定的Annotation注解的方法。也就是说，所有被指定注解标注的方法都将匹配。 
@Pointcut(“@annotation(com.cjm.annotation.AdviceAnnotation)”) 
public void before(){}

10）bean：通过受管Bean的名字来限定连接点所在的Bean。该关键词是Spring2.5新增的。 
@Pointcut(“bean(person)”) 
public void before(){}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spring boot"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-08-30T15:51:28.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">springboot-FieldroleMapperin‘’requireda bbeanoftype&amp;apos;&amp;apos;thatcouldnotbe_found.</title>
    <id>/2018/06/07/springboot-field-rolemapper-in-required-a-bbean-of-type-that-could-not-be-found/</id>
    <link href="https://fangweilong.github.io/2018/06/07/springboot-field-rolemapper-in-required-a-bbean-of-type-that-could-not-be-found/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>其实在报错信息上就能看出来问题是什么，但是因为现在文档少，不容易找到解决方案。特此记录
<img src="https://img-blog.csdn.net/2018060714520428?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" />
意思是扫描不到mapper层，我们需要在Application.java这个启动文件上加一个注解告诉springboot我们的mapper位置在哪</p>
<div><pre><code>@MapperScan(&quot;mapper文件位置&quot;)
</code></pre>
<div><span>1</span><br></div></div><p><img src="https://img-blog.csdn.net/20180607145422275?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spring boot"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-06-07T14:55:21.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">springboot-启动时获取端口和项目名</title>
    <id>/2020/03/27/springboot-%E5%90%AF%E5%8A%A8%E6%97%B6%E8%8E%B7%E5%8F%96%E7%AB%AF%E5%8F%A3%E5%92%8C%E9%A1%B9%E7%9B%AE%E5%90%8D/</id>
    <link href="https://fangweilong.github.io/2020/03/27/springboot-%E5%90%AF%E5%8A%A8%E6%97%B6%E8%8E%B7%E5%8F%96%E7%AB%AF%E5%8F%A3%E5%92%8C%E9%A1%B9%E7%9B%AE%E5%90%8D/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="背景"> 背景</h2>
<h3 id="项目启动每次都要手动输url在浏览器中访问-就想能和vue项目一样启动能直接在控制台打印出url"> 项目启动每次都要手动输url在浏览器中访问，就想能和vue项目一样启动能直接在控制台打印出url</h3>
<p><img src="https://img-blog.csdnimg.cn/20200327173925228.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<hr>
<h2 id="踩坑"> 踩坑</h2>
<h3 id="在项目中获取配置文件的方法为-value-但是在启动类中无法使用-获取到的全都为null"> 在项目中获取配置文件的方法为@Value,但是在启动类中无法使用，获取到的全都为null</h3>
<hr>
<h2 id="使用"> 使用</h2>
<h3 id="environment"> Environment</h3>
<div><pre><code> public static void main<span>(</span>String<span>[</span><span>]</span> args<span>)</span> <span>{</span>
        ConfigurableApplicationContext context <span>=</span> SpringApplication.run<span>(</span>Application.class, args<span>)</span><span>;</span>

        Environment environment <span>=</span> context.getBean<span>(</span>Environment.class<span>)</span><span>;</span>

		System.out.println<span>(</span><span>"访问链接：http://localhost:"</span> +environment.getProperty<span>(</span><span>"server.port"</span><span>)</span>+environment.getProperty<span>(</span><span>"server.servlet.context-path"</span><span>)</span><span>;</span>
      <span>)</span><span>;</span>
 <span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><hr>
<h2 id="效果"> 效果</h2>
<p><img src="https://img-blog.csdnimg.cn/20200327174347119.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spring boot"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-03-27T17:45:12.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">springboot-AOP使用@Before和@After做一个最简单的切面</title>
    <id>/2020/09/10/springboot-%E6%97%A0%E6%B3%95%E6%89%AB%E6%8F%8F%E5%88%B0%E7%88%B6%E7%B1%BB%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84bean/</id>
    <link href="https://fangweilong.github.io/2020/09/10/springboot-%E6%97%A0%E6%B3%95%E6%89%AB%E6%8F%8F%E5%88%B0%E7%88%B6%E7%B1%BB%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84bean/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h3 id="现象"> 现象：</h3>
<div><pre><code>我定义了两个模块 A 和 B 。B模块依赖A模块
A模块中我定义了一个@Component
却发现在B模块中我无法扫描到这个Bean导入注入失败
</code></pre>
</div><h3 id="解决"> 解决</h3>
<div><pre><code>查阅得知，在springboot中的bean扫描是扫描同级目录或者下级目录，也就是不会扫描到依赖包里面的东西。
但是我又想定义公共Bean，该怎么做呢。
</code></pre>
</div><h3 id="解决办法"> 解决办法</h3>
<h5 id="手动注入-bean"> 手动注入 @Bean</h5>
<p>如果你定义的是实体类之类的Bean，那么可以在子类中手动Bean</p>
<div><pre><code><span>@Bean</span>
<span>Result</span> <span>result</span><span>(</span><span>)</span><span>{</span>
	<span>new</span> <span>Result</span><span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h5 id="配置扫描-componentscan"> 配置扫描 @ComponentScan</h5>
<p>但是如果你定义的Bean是类似于接口的文件，那你使用手动定义的方法就会发现要写很长一段，把所有的方法都定义一下。所以还有另一种方法</p>
<div><pre><code><span>@SpringBootApplication</span>
<span>@ComponentScan</span><span>(</span>basePackages <span>=</span> <span>{</span><span>"cn.o"</span><span>}</span><span>)</span>
<span>public</span> <span>class</span> <span>ProxyDataSourceApplication</span> <span>{</span>
	<span>.</span><span>.</span><span>.</span><span>main</span><span>(</span><span>)</span><span>{</span>
	<span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><p>如果定义了@ComponentScan扫描路径，注意不要让@Bean多处定义，否则会报重复注入的错误。</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spring boot"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-09-10T10:24:53.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">springcloud-RestTemplate访问不到其他服务</title>
    <id>/2021/06/16/springcloud-resttemplate%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%88%B0%E5%85%B6%E4%BB%96%E6%9C%8D%E5%8A%A1/</id>
    <link href="https://fangweilong.github.io/2021/06/16/springcloud-resttemplate%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%88%B0%E5%85%B6%E4%BB%96%E6%9C%8D%E5%8A%A1/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-检查启动类或配置类有没有加-enablediscoveryclient"> 1.检查启动类或配置类有没有加@EnableDiscoveryClient</h2>
<hr>
<h2 id="_2-检查-resttemplate有没有加-bean-loadbalanced-非必须-注解"> 2.检查 RestTemplate有没有加@Bean @LoadBalanced(非必须)注解</h2>
<hr>
<h2 id="_3-gateway配置、url是否一一对照"> 3.gateway配置、url是否一一对照</h2>
<hr>
<h2 id="如果上面的你都很确定没问题-那可以比对一下我遇到的问题"> 如果上面的你都很确定没问题，那可以比对一下我遇到的问题</h2>
<h3 id="起因"> 起因</h3>
<ul>
<li>升级springcloud 2020.0版本及以上</li>
<li>没有修改访问代码</li>
</ul>
<h3 id="解决办法"> 解决办法</h3>
<p>我翻看了一下spring的官方文档发现更换了写法，RestTemplate无法直接生效了。
在你的pom中添加一个引用</p>
<div><pre><code><span><span>&lt;</span>dependency<span>></span></span>
   <span><span>&lt;</span>groupId<span>></span></span>org<span>.</span>springframework<span>.</span>cloud<span>&lt;</span><span>/</span>groupId<span>></span>
   <span><span>&lt;</span>artifactId<span>></span></span>spring<span>-</span>cloud<span>-</span>starter<span>-</span>loadbalancer<span>&lt;</span><span>/</span>artifactId<span>></span>
<span>&lt;</span><span>/</span>dependency<span>></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>RestTemplate就能继续愉快的使用了</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spring cloud"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-06-16T16:42:17.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">springcloud-gateway-获取入参</title>
    <id>/2019/12/27/springcloud-gateway-%E8%8E%B7%E5%8F%96%E5%85%A5%E5%8F%82/</id>
    <link href="https://fangweilong.github.io/2019/12/27/springcloud-gateway-%E8%8E%B7%E5%8F%96%E5%85%A5%E5%8F%82/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p><strong>在获取入参的时候，get方式的接口可以直接获取到，但是post形式的body获取以后会造成无法再使用，所以必须经过一层转换以后再读取。</strong></p>
<p>直接上代码</p>
<div><pre><code>
@Component
public class CacheBodyGatewayFilter implements GlobalFilter, Ordered {
    public static final String CACHE_REQUEST_BODY_OBJECT_KEY = &quot;cachedRequestBodyObject&quot;;

    @Override
    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {
        if (exchange.getRequest().getHeaders().getContentType() == null) {
            return chain.filter(exchange);
        } else {
            return DataBufferUtils.join(exchange.getRequest().getBody())
                    .flatMap(dataBuffer -&gt; {
                        DataBufferUtils.retain(dataBuffer);
                        Flux&lt;DataBuffer&gt; cachedFlux = Flux
                                .defer(() -&gt; Flux.just(dataBuffer.slice(0, dataBuffer.readableByteCount())));
                        ServerHttpRequest mutatedRequest = new ServerHttpRequestDecorator(
                                exchange.getRequest()) {
                            @Override
                            public Flux&lt;DataBuffer&gt; getBody() {
                                return cachedFlux;
                            }

                        };
                        exchange.getAttributes().put(CACHE_REQUEST_BODY_OBJECT_KEY, cachedFlux);

                        return chain.filter(exchange.mutate().request(mutatedRequest).build());
                    });
        }
    }

    @Override
    public int getOrder() {
    	//这个代表了执行顺序，值越小越先执行 
        return Ordered.HIGHEST_PRECEDENCE;
    }
}

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br></div></div><p>接下来是读取方法</p>
<div><pre><code>
@Component
public class AccessLogGlobalFilter implements GlobalFilter, Ordered {
    public static final String CACHE_REQUEST_BODY_OBJECT_KEY = &quot;cachedRequestBodyObject&quot;;


    @Override
    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {
        ServerHttpRequest request = exchange.getRequest();

        //Record only http requests (including https)
        String schema = request.getURI().getScheme();
        if ((!&quot;http&quot;.equals(schema) &amp;&amp; !&quot;https&quot;.equals(schema))) {
            return chain.filter(exchange);
        }
		//我自定义的实体类，如果不需要 你可以直接删掉
        LogDTO logDTO = new LogDTO();
        logDTO.setPath(request.getURI().getPath());
        logDTO.setQueryParams(request.getQueryParams());
        logDTO.setMethod(request.getMethod().name());
        logDTO.setIp(request.getRemoteAddress().getHostName());
        logDTO.setUserAgent(request.getHeaders().getFirst(&quot;User-Agent&quot;));
        exchange.getAttributes().put(&quot;startTime&quot;, System.currentTimeMillis());


        //获取request body
        Flux&lt;DataBuffer&gt; cachedBody = exchange.getAttribute(CACHE_REQUEST_BODY_OBJECT_KEY);
        if(cachedBody!=null){
            String raw = toRaw(cachedBody);
            logDTO.setParams(raw);
        }


        return returnMono(chain, exchange, logDTO);
    }

    private Mono&lt;Void&gt; returnMono(GatewayFilterChain chain, ServerWebExchange exchange, LogDTO logDTO) {
        return chain.filter(exchange).then(Mono.fromRunnable(() -&gt; {
            Long startTime = exchange.getAttribute(&quot;startTime&quot;);
            if (startTime != null) {
                long executeTime = (System.currentTimeMillis() - startTime);
                logDTO.setTime(executeTime);
                logDTO.setResultCode(Objects.requireNonNull(exchange.getResponse().getStatusCode()).value());
                StaticLog.info(&quot;=================================&quot;);
                StaticLog.info(&quot;请求方式：[{}]&quot;, logDTO.getMethod());
                StaticLog.info(&quot;路径：[{}]&quot;, logDTO.getPath());
                StaticLog.info(&quot;IP：[{}]&quot;, logDTO.getIp());
                StaticLog.info(&quot;UserAgent：[{}]&quot;, logDTO.getUserAgent());
                StaticLog.info(&quot;请求格式[{}]&quot;, exchange.getResponse().getHeaders().getContentType());
                StaticLog.info(&quot;时长：[{}]&quot;, executeTime);
                StaticLog.info(&quot;code：[{}]&quot;, logDTO.getResultCode());
                StaticLog.info(&quot;body：[{}]&quot;, logDTO.getParams());
            }
        }));
    }

    @Override
    public int getOrder() {
    	//这个filter的执行顺序要在 CacheBodyGatewayFilter 类之后 否则找不到缓存的值
        return Ordered.HIGHEST_PRECEDENCE+1;
    }

    /**
     * 用于获取请求参数
     *
     * @param body
     * @return
     */
    private static String toRaw(Flux&lt;DataBuffer&gt; body) {
        AtomicReference&lt;String&gt; rawRef = new AtomicReference&lt;&gt;();
        body.subscribe(buffer -&gt; {
            byte[] bytes = new byte[buffer.readableByteCount()];
            buffer.read(bytes);
            DataBufferUtils.release(buffer);
            rawRef.set(Strings.fromUTF8ByteArray(bytes));
        });
        return rawRef.get();
    }

}

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spring cloud"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-12-27T11:46:16.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">springcloud-gateway整合swagger3.0.0</title>
    <id>/2020/12/30/springcloud-gateway%E6%95%B4%E5%90%88swagger3-0-0/</id>
    <link href="https://fangweilong.github.io/2020/12/30/springcloud-gateway%E6%95%B4%E5%90%88swagger3-0-0/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="版本和说明"> 版本和说明</h1>
<ul>
<li>swagger:3.0.0</li>
<li>gateway微服务的使用方式和单应用没啥区别，只是多了设置右上角模块的操作。</li>
<li>以下操作基于你已经搭建成功的服务，只讲怎么添加swagger3</li>
</ul>
<hr>
<h1 id="单应用"> 单应用</h1>
<h2 id="pom添加"> pom添加</h2>
<div><pre><code><span>&lt;</span><span>!</span>-- <span>3.0</span>版本只需要引入一个，不再像2.x版本需要引入两个包 --<span>></span>
<span>&lt;</span>dependency<span>></span>
	<span>&lt;</span>groupId<span>></span>io.springfox<span>&lt;</span>/groupId<span>></span>
    <span>&lt;</span>artifactId<span>></span>springfox-boot-starter<span>&lt;</span>/artifactId<span>></span>
    <span>&lt;</span>version<span>></span><span>${swagger.version}</span><span>&lt;</span>/version<span>></span>
<span>&lt;</span>/dependency<span>></span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id="配置文件"> 配置文件</h2>
<div><pre><code><span>/**
 * swagger配制
 *
 * @author teler
 * @date 2020-12-30
 */</span>
<span>@Configuration</span>
<span>public</span> <span>class</span> <span>SwaggerConfig</span> <span>{</span>

	<span>@Value</span><span>(</span><span>"${swagger.enable:true}"</span><span>)</span>
	<span>private</span> <span>Boolean</span> enable<span>;</span>

	<span>@Bean</span>
	<span>public</span> <span>Docket</span> <span>api</span><span>(</span><span>)</span> <span>{</span>
		<span>return</span> <span>new</span> <span>Docket</span><span>(</span><span>DocumentationType</span><span>.</span>OAS_30<span>)</span>
					   <span>//资源</span>
				       <span>.</span><span>globalResponses</span><span>(</span><span>HttpMethod</span><span>.</span>GET<span>,</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>)</span>
				       <span>.</span><span>globalResponses</span><span>(</span><span>HttpMethod</span><span>.</span>PUT<span>,</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>)</span>
				       <span>.</span><span>globalResponses</span><span>(</span><span>HttpMethod</span><span>.</span>POST<span>,</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>)</span>
				       <span>.</span><span>globalResponses</span><span>(</span><span>HttpMethod</span><span>.</span>DELETE<span>,</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>)</span>
					   <span>//是否启动</span>
				       <span>.</span><span>enable</span><span>(</span>enable<span>)</span>
					   <span>//头部信息</span>
				       <span>.</span><span>apiInfo</span><span>(</span><span>apiInfo</span><span>(</span><span>)</span><span>)</span>
				       <span>.</span><span>select</span><span>(</span><span>)</span>
				       <span>/**
				        * RequestHandlerSelectors,配置要扫描接口的方式
				        * basePackage指定要扫描的包
				        * any()扫描所有，项目中的所有接口都会被扫描到
				        * none()不扫描
				        * withClassAnnotation()扫描类上的注解
				        * withMethodAnnotation()扫描方法上的注解
				        */</span>
				       <span>.</span><span>apis</span><span>(</span><span>RequestHandlerSelectors</span><span>.</span><span>any</span><span>(</span><span>)</span><span>)</span>
					   <span>//过滤某个路径</span>
				       <span>.</span><span>paths</span><span>(</span><span>PathSelectors</span><span>.</span><span>any</span><span>(</span><span>)</span><span>)</span>
				       <span>.</span><span>build</span><span>(</span><span>)</span>
					   <span>//协议</span>
				       <span>.</span><span>protocols</span><span>(</span><span>newHashSet</span><span>(</span><span>"https"</span><span>,</span> <span>"http"</span><span>)</span><span>)</span>
				       <span>.</span><span>securitySchemes</span><span>(</span><span>securitySchemes</span><span>(</span><span>)</span><span>)</span>
				       <span>.</span><span>securityContexts</span><span>(</span><span>securityContexts</span><span>(</span><span>)</span><span>)</span><span>;</span>
	<span>}</span>


	<span>/**
	 * API 页面上半部分展示信息
	 */</span>
	<span>private</span> <span>ApiInfo</span> <span>apiInfo</span><span>(</span><span>)</span> <span>{</span>
		<span>return</span> <span>new</span> <span>ApiInfoBuilder</span><span>(</span><span>)</span>
				       <span>.</span><span>title</span><span>(</span><span>"接口文档"</span><span>)</span>
				       <span>.</span><span>description</span><span>(</span><span>"@author Teler"</span><span>)</span>
				       <span>.</span><span>contact</span><span>(</span><span>new</span> <span>Contact</span><span>(</span><span>"Teler"</span><span>,</span> <span>null</span><span>,</span> <span>"teler96@qq.com"</span><span>)</span><span>)</span>
				       <span>.</span><span>version</span><span>(</span><span>"1.0"</span><span>)</span>
				       <span>.</span><span>build</span><span>(</span><span>)</span><span>;</span>
	<span>}</span>

	<span>/**
	 * 设置接口单独的授权信息
	 */</span>
	<span>private</span> <span>List</span><span><span>&lt;</span><span>SecurityScheme</span><span>></span></span> <span>securitySchemes</span><span>(</span><span>)</span> <span>{</span>
		<span>return</span> <span>Collections</span><span>.</span><span>singletonList</span><span>(</span><span>new</span> <span>ApiKey</span><span>(</span><span>"BASE_TOKEN"</span><span>,</span> <span>"token"</span><span>,</span> <span>"header"</span><span>)</span><span>)</span><span>;</span>
	<span>}</span>

	<span>/**
	 * 授权信息全局应用
	 */</span>
	<span>private</span> <span>List</span><span><span>&lt;</span><span>SecurityContext</span><span>></span></span> <span>securityContexts</span><span>(</span><span>)</span> <span>{</span>
		<span>return</span> <span>Collections</span><span>.</span><span>singletonList</span><span>(</span>
				<span>SecurityContext</span><span>.</span><span>builder</span><span>(</span><span>)</span>
						<span>.</span><span>securityReferences</span><span>(</span>
								<span>Collections</span><span>.</span><span>singletonList</span><span>(</span><span>new</span> <span>SecurityReference</span><span>(</span><span>"BASE_TOKEN"</span><span>,</span>
										<span>new</span> <span>AuthorizationScope</span><span>[</span><span>]</span><span>{</span><span>new</span> <span>AuthorizationScope</span><span>(</span><span>"global"</span><span>,</span> <span>""</span><span>)</span><span>}</span>
								<span>)</span><span>)</span><span>)</span>
						<span>//.forPaths(PathSelectors.any())</span>
						<span>.</span><span>build</span><span>(</span><span>)</span>
		<span>)</span><span>;</span>
	<span>}</span>

	<span>@SafeVarargs</span>
	<span>private</span> <span>final</span> <span><span>&lt;</span><span>T</span><span>></span></span> <span>Set</span><span><span>&lt;</span><span>T</span><span>></span></span> <span>newHashSet</span><span>(</span><span>T</span><span>.</span><span>.</span><span>.</span> ts<span>)</span> <span>{</span>
		<span>if</span> <span>(</span>ts<span>.</span>length <span>></span> <span>0</span><span>)</span> <span>{</span>
			<span>return</span> <span>new</span> <span>LinkedHashSet</span><span><span>&lt;</span><span>></span></span><span>(</span><span>Arrays</span><span>.</span><span>asList</span><span>(</span>ts<span>)</span><span>)</span><span>;</span>
		<span>}</span>
		<span>return</span> <span>null</span><span>;</span>
	<span>}</span>
<span>}</span>


</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br></div></div><h2 id="访问"> 访问</h2>
<p>到这一步我们应该就能正常访问swagger文档了，但是要注意3.0的访问页面路径有所变化</p>
<div><pre><code>http://ip:port/swagger-ui/
</code></pre>
<div><span>1</span><br></div></div><h2 id="页面"> 页面</h2>
<p><img src="https://img-blog.csdnimg.cn/20201230165529317.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<hr>
<h1 id="微服务"> 微服务</h1>
<ul>
<li>gateway版本:2.2.5</li>
</ul>
<h2 id="添加文件"> 添加文件</h2>
<p>MySwaggerResourcesProvider在gateway模块中创建，注意其中的一些注解和说明，否则应用无法正常启动</p>
<h3 id="myswaggerresourcesprovider"> MySwaggerResourcesProvider</h3>
<p><em>@Primary这个注解是告诉spring 如果有冲突优先使用当前类 没有这个会报实现类冲突 看源码能发现SwaggerResourcesProvider已经有一个InMemorySwaggerResourcesProvider实现类 但是自带的不能满足我们的要求</em></p>
<div><pre><code><span>/**
 * swagger的配置类
 *
 * @author teler
 */</span>
<span>@Component</span>
<span>@Primary</span>
<span>public</span> <span>class</span> <span>MySwaggerResourcesProvider</span> <span>implements</span> <span>SwaggerResourcesProvider</span> <span>{</span>

	<span>/**
	 * swagger3默认的url后缀
	 */</span>
	<span>private</span> <span>static</span> <span>final</span> <span>String</span> SWAGGER2URL <span>=</span> <span>"/v3/api-docs"</span><span>;</span>
	<span>/**
	 * 网关路由
	 */</span>
	<span>private</span> <span>final</span> <span>RouteLocator</span> routeLocator<span>;</span>

	<span>/**
	 * 网关应用名称
	 */</span>
	<span>@Value</span><span>(</span><span>"${spring.application.name}"</span><span>)</span>
	<span>private</span> <span>String</span> self<span>;</span>

	<span>@Autowired</span>
	<span>public</span> <span>MySwaggerResourcesProvider</span><span>(</span><span>RouteLocator</span> routeLocator<span>)</span> <span>{</span>
		<span>this</span><span>.</span>routeLocator <span>=</span> routeLocator<span>;</span>
	<span>}</span>

	<span>/**
	 * 对于gateway来说这块比较重要 让swagger能找到对应的服务
	 *
	 * @return
	 */</span>
	<span>@Override</span>
	<span>public</span> <span>List</span><span><span>&lt;</span><span>SwaggerResource</span><span>></span></span> <span>get</span><span>(</span><span>)</span> <span>{</span>
		<span>List</span><span><span>&lt;</span><span>SwaggerResource</span><span>></span></span> resources <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>List</span><span><span>&lt;</span><span>String</span><span>></span></span> routeHosts <span>=</span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		<span>// 获取所有可用的host：serviceId</span>
		routeLocator<span>.</span><span>getRoutes</span><span>(</span><span>)</span><span>.</span><span>filter</span><span>(</span>route <span>-></span> route<span>.</span><span>getUri</span><span>(</span><span>)</span><span>.</span><span>getHost</span><span>(</span><span>)</span> <span>!=</span> <span>null</span><span>)</span>
				<span>.</span><span>filter</span><span>(</span>route <span>-></span> <span>!</span>self<span>.</span><span>equals</span><span>(</span>route<span>.</span><span>getUri</span><span>(</span><span>)</span><span>.</span><span>getHost</span><span>(</span><span>)</span><span>)</span><span>)</span>
				<span>.</span><span>subscribe</span><span>(</span>route <span>-></span> routeHosts<span>.</span><span>add</span><span>(</span>route<span>.</span><span>getUri</span><span>(</span><span>)</span><span>.</span><span>getHost</span><span>(</span><span>)</span><span>)</span><span>)</span><span>;</span>

		<span>// 记录已经添加过的server</span>
		<span>Set</span><span><span>&lt;</span><span>String</span><span>></span></span> dealed <span>=</span> <span>new</span> <span>HashSet</span><span><span>&lt;</span><span>></span></span><span>(</span><span>)</span><span>;</span>
		routeHosts<span>.</span><span>forEach</span><span>(</span>instance <span>-></span> <span>{</span>
			<span>// 拼接url</span>
			<span>String</span> url <span>=</span> <span>"/"</span> <span>+</span> instance<span>.</span><span>toLowerCase</span><span>(</span><span>)</span> <span>+</span> SWAGGER2URL<span>;</span>
			<span>if</span> <span>(</span><span>!</span>dealed<span>.</span><span>contains</span><span>(</span>url<span>)</span><span>)</span> <span>{</span>
				dealed<span>.</span><span>add</span><span>(</span>url<span>)</span><span>;</span>
				<span>SwaggerResource</span> swaggerResource <span>=</span> <span>new</span> <span>SwaggerResource</span><span>(</span><span>)</span><span>;</span>
				swaggerResource<span>.</span><span>setUrl</span><span>(</span>url<span>)</span><span>;</span>
				swaggerResource<span>.</span><span>setName</span><span>(</span>instance<span>)</span><span>;</span>
				resources<span>.</span><span>add</span><span>(</span>swaggerResource<span>)</span><span>;</span>
			<span>}</span>
		<span>}</span><span>)</span><span>;</span>
		<span>return</span> resources<span>;</span>
	<span>}</span>
<span>}</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br></div></div><h2 id="访问-2"> 访问</h2>
<p>链接不变，但是我们在右上角能清晰地看到所有的微服务模块已经能正常访问了
<img src="https://img-blog.csdnimg.cn/20201230171308478.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<h2 id="未解决"> 未解决</h2>
<p>找不到中文包的设置方式，虽然说都能看得懂，但是还是想能自己设置语言。</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="spring cloud"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-12-30T17:15:59.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">org.apache.jasper.JasperExceptionUnabletocompileclassforJSP</title>
    <id>/2018/01/26/org-apache-jasper-jasperexceptionunabletocompileclassforjsp/</id>
    <link href="https://fangweilong.github.io/2018/01/26/org-apache-jasper-jasperexceptionunabletocompileclassforjsp/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="出错信息"> 出错信息</h2>
<p>出现这种情况往往都是在 include 多个JSP页面后出现，报错信息为:
ERROR LogErrorInfoImpl:42 - Error Happen:</p>
<div><pre><code>org.apache.jasper.JasperException: Unable to compile class for JSP:

An error occurred at line: 158 in the generated java file

The code of method _jspService(HttpServletRequest, HttpServletResponse) is exceeding the 65535 bytes limit.
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><div><pre><code><span><span><span>&lt;</span>servlet</span><span>></span></span>
    <span><span><span>&lt;</span>servlet-name</span><span>></span></span>jsp<span><span><span>&lt;/</span>servlet-name</span><span>></span></span>
    <span><span><span>&lt;</span>servlet-class</span><span>></span></span>org.apache.jasper.servlet.JspServlet<span><span><span>&lt;/</span>servlet-class</span><span>></span></span>
    <span><span><span>&lt;</span>init-param</span><span>></span></span>
        <span><span><span>&lt;</span>param-name</span><span>></span></span>fork<span><span><span>&lt;/</span>param-name</span><span>></span></span>
        <span><span><span>&lt;</span>param-value</span><span>></span></span>false<span><span><span>&lt;/</span>param-value</span><span>></span></span>
    <span><span><span>&lt;/</span>init-param</span><span>></span></span>
    <span><span><span>&lt;</span>init-param</span><span>></span></span>
        <span><span><span>&lt;</span>param-name</span><span>></span></span>xpoweredBy<span><span><span>&lt;/</span>param-name</span><span>></span></span>
        <span><span><span>&lt;</span>param-value</span><span>></span></span>false<span><span><span>&lt;/</span>param-value</span><span>></span></span>
    <span><span><span>&lt;/</span>init-param</span><span>></span></span>
    <span><span><span>&lt;</span>init-param</span><span>></span></span>
        <span><span><span>&lt;</span>param-name</span><span>></span></span>enablePooling<span><span><span>&lt;/</span>param-name</span><span>></span></span>
        <span><span><span>&lt;</span>param-value</span><span>></span></span>false<span><span><span>&lt;/</span>param-value</span><span>></span></span>
    <span><span><span>&lt;/</span>init-param</span><span>></span></span>
    <span><span><span>&lt;</span>init-param</span><span>></span></span>
        <span><span><span>&lt;</span>param-name</span><span>></span></span>mappedfile<span><span><span>&lt;/</span>param-name</span><span>></span></span>
        <span><span><span>&lt;</span>param-value</span><span>></span></span>false<span><span><span>&lt;/</span>param-value</span><span>></span></span>
    <span><span><span>&lt;/</span>init-param</span><span>></span></span>
    <span><span><span>&lt;</span>load-on-startup</span><span>></span></span>3<span><span><span>&lt;/</span>load-on-startup</span><span>></span></span>
<span><span><span>&lt;/</span>servlet</span><span>></span></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><p>在web.xml中添加上段红色代码，之后重启Tomcat再次即可。</p>
<hr>
<p>转载自:https://www.cnblogs.com/mayabei/p/6856602.html</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-01-26T09:31:26.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">Long返回给前台在js中丢失精度</title>
    <id>/2021/06/03/long%E8%BF%94%E5%9B%9E%E7%BB%99%E5%89%8D%E5%8F%B0%E5%9C%A8js%E4%B8%AD%E4%B8%A2%E5%A4%B1%E7%B2%BE%E5%BA%A6/</id>
    <link href="https://fangweilong.github.io/2021/06/03/long%E8%BF%94%E5%9B%9E%E7%BB%99%E5%89%8D%E5%8F%B0%E5%9C%A8js%E4%B8%AD%E4%B8%A2%E5%A4%B1%E7%B2%BE%E5%BA%A6/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="现象"> 现象</h2>
<p>1.后台id等使用long（雪花算法生成id）存储
2.后台将id返回给前台
3.js接收id，发现精度丢失。数字末尾变成了00</p>
<h2 id="说明"> 说明</h2>
<p>在mybatis plus中使用了雪花算法生成id，<a href="https://mybatis.plus/guide/faq.html#id-worker-%E7%94%9F%E6%88%90%E4%B8%BB%E9%94%AE%E5%A4%AA%E9%95%BF%E5%AF%BC%E8%87%B4-js-%E7%B2%BE%E5%BA%A6%E4%B8%A2%E5%A4%B1" target="_blank" rel="noopener noreferrer">MP也提供了解决思路，点我跳转</a></p>
<h2 id="解决办法"> 解决办法</h2>
<p>我使用了注解处理</p>
<div><pre><code><span>@JsonSerialize</span><span>(</span>using<span>=</span><span>ToStringSerializer</span><span>.</span><span>class</span><span>)</span>
<span>private</span> <span>Long</span> id<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><p>那么问题来了。我给前台传输的id是String类型，那前台传输给后台的时候也会是String。<strong>类型对不上怎么办？</strong></p>
<p>我寻思着既然@JsonSerialize可以序列化（Getter）给前台，有没有注解提供了反向序列化（Setter）的方法呢？</p>
<p>翻了一下，发现@JsonDeserialize可以实现</p>
<div><pre><code><span>@JsonSerialize</span><span>(</span>using<span>=</span><span>ToStringSerializer</span><span>.</span><span>class</span><span>)</span>
<span>@JsonDeserialize</span><span>(</span>using <span>=</span> <span>ToLongDeserializer</span><span>.</span><span>class</span><span>)</span>
<span>private</span> <span>Long</span> id<span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><div><pre><code><span>public</span> <span>class</span> <span>ToLongDeserializer</span> <span>extends</span> <span>JsonDeserializer</span><span><span>&lt;</span><span>Long</span><span>></span></span> <span>{</span>

	<span>@Override</span>
	<span>public</span> <span>Long</span> <span>deserialize</span><span>(</span><span>JsonParser</span> jsonParser<span>,</span> <span>DeserializationContext</span> deserializationContext<span>)</span> <span>throws</span> <span>IOException</span><span>,</span> <span>JsonProcessingException</span> <span>{</span>
		<span>String</span> value <span>=</span> jsonParser<span>.</span><span>getText</span><span>(</span><span>)</span><span>;</span>
		<span>try</span> <span>{</span>
			<span>return</span> value <span>==</span> <span>null</span> <span>?</span> <span>null</span> <span>:</span> <span>Long</span><span>.</span><span>parseLong</span><span>(</span>value<span>)</span><span>;</span>
		<span>}</span> <span>catch</span> <span>(</span><span>NumberFormatException</span> e<span>)</span> <span>{</span>
			<span>return</span> <span>null</span><span>;</span>
		<span>}</span>
	<span>}</span>

<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h3 id="结尾"> 结尾</h3>
<p>我没找到@JsonDeserialize可以直接使用的class，如果有请留言给我谢谢</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-06-03T11:24:06.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">MongoDB查询</title>
    <id>/2018/02/07/mongodb%E6%9F%A5%E8%AF%A2/</id>
    <link href="https://fangweilong.github.io/2018/02/07/mongodb%E6%9F%A5%E8%AF%A2/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>//配置</p>
<div><pre><code>public class Mongodb {
   private static String host = &quot;&quot;;//域名
   private static int port = ;//端口
   private static String user = &quot;sc&quot;;
   private static String pwd = &quot;sc_1!$&quot;;

   public final MongoClient getDB(String dbName) {
      // 连接到MongoDB服务 如果是远程连接可以替换“localhost”为服务器所在IP地址
      // ServerAddress()两个参数分别为 服务器地址 和 端口
      ServerAddress serverAddress = new ServerAddress(host, port);
      List&lt;ServerAddress&gt; addrs = new ArrayList&lt;ServerAddress&gt;();
      addrs.add(serverAddress);

      // MongoCredential.createScramSha1Credential()三个参数分别为 用户名 数据库名称 密码
      MongoCredential credential = MongoCredential.createScramSha1Credential(user, dbName, pwd.toCharArray());
      List&lt;MongoCredential&gt; credentials = new ArrayList&lt;MongoCredential&gt;();
      credentials.add(credential);

      // 通过连接认证获取MongoDB连接
      return new MongoClient(addrs, credentials);
   }
}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div><p>//指定库配置</p>
<div><pre><code>private final static MongoClient client = new Mongodb().getDB(&quot;&quot;);//库名
MongoDatabase mongoDatabase = client.getDatabase(&quot;&quot;);//数据库
MongoCollection&lt;Document&gt; collection = mongoDatabase.getCollection(“”);//表名

//查询语句
BasicDBList bsList = new BasicDBList();
bsList.add(&quot;&quot;);//添加值
//使用这种方法更简单方便，写起来也命了。另一种方法相当于手拼json，未作记录
Bson _filters = Filters.and(
        Filters.eq(&quot;&quot;, cityName),//属性名  值
        Filters.in(&quot;&quot;,)//要使用 in 函数   值必须为BasicDBList类型
        Filters.gte(&quot;&quot;, ) //大于等于: 
 Filters.gt(&quot;&quot;, ) //大于
        Filters.lte(&quot;&quot;,),//小于等于
        Filters.lt(&quot;&quot;,),//小于
  Filters.ne(&quot;&quot;, ),//不等于
        Filters.or(
                Filters.regex(&quot;name&quot;,str),// 属性名 值
                Filters.regex(&quot;category&quot;,str), //属性名 值
                Filters.regex(&quot;detail.address&quot;,str)  //如果不是最外层的属性，则需要从外层属性一层层点进去
        ),
 Filters.near(&quot;point&quot;, new Point(new Position(lng, lat)), 1000000000d, 0d)) //经纬度 必须要创立索引  第一个值为经纬度的属性，第二个是经纬度的值（double），第三个是最大距离，第四个是最小距离  默认包含排序
);
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br></div></div><p>//总条数</p>
<div><pre><code>int totalCount = (int) collection.count(_filters);
</code></pre>
<div><span>1</span><br></div></div><p>// 查询器</p>
<div><pre><code>FindIterable&lt;Document&gt; ret = collection.find();//这样可以创立公共的
</code></pre>
<div><span>1</span><br></div></div><p>//查询</p>
<div><pre><code>ret = ret.filter(_filters).sort(new BasicDBObject(“”,1?1:-1)).skip(pageSize * (pageIndex-1)).limit(pageSize).batchSize(pageSize);//sort 排序前面是属性名，后面是1=正序 -1=倒序    skip 跳过多少条   limit 接下来查到多少条  bathSize  返回的条数
</code></pre>
<div><span>1</span><br></div></div><p>//如果需要对查询结果操作</p>
<div><pre><code>for(Document:document:ret){
//方法1  直接拿key对应的value
document.get(&quot;key&quot;);
//方法2  转成model   这里不做介绍，mongo的数据是json形式的数据所以直接google json怎么转model就可以
}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="mongo"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-02-07T11:03:48.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">bootdo框架使用步骤总结</title>
    <id>/2018/04/19/bootdo%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4%E6%80%BB%E7%BB%93/</id>
    <link href="https://fangweilong.github.io/2018/04/19/bootdo%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4%E6%80%BB%E7%BB%93/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h4 id="_2020-06-21-16-01-00"> 2020-06-21 16:01:00</h4>
<p>食言了 不更新了 自己写框架真快乐</p>
<p>=================================</p>
<p>仅作为个人学习纪录，其他人只作为参考，图较少，会不断更新。
项目地址 <a href="http://www.bootdo.com/blog%20bootdo%E5%AE%98%E7%BD%91" target="_blank" rel="noopener noreferrer">bootdo官网</a></p>
<ol>
<li>因为从git上下载的文件结构并不是习惯，所以将里面一层的复制到最完成根目录</li>
<li>idea导入，选择到项目以后，选择maven，一路默认选择到打开项目</li>
<li>将sql文件复制并在mysql中运行创建好数据库表</li>
<li>打开application-dev.yml文件，修改其中的数据库连接+用户名+密码。另外一个application-pro.yml文件是生产环境使用，具体使用哪一个是在application.yml中指定
<img src="https://img-blog.csdn.net/20180419174130503?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></li>
<li>启动成功后应该是这样的
<img src="https://img-blog.csdn.net/20180419174227281?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></li>
<li>访问  localhost  就能直接进项目主页了</li>
</ol>
<p><em><strong>2018-05-02更新</strong></em>
<em><strong>更新内容:将mysql数据库更改为oracle数据库</strong></em>
详细:
1.修改端口   在application.yml的port从80改为8080
如图：<img src="https://img-blog.csdn.net/20180502141839524?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" />
访问路径也从localhost改为http://localhost:8080/login</p>
<p>2.oracle不在maven仓库中必须要手动安装到本地maven仓库中。访问地址:http://www.oracle.com/technetwork/indexes/downloads/index.html   找到对应的版本下载好ojdbc的驱动。(我这边用的oracel版本为11.2.0.1.0，使用ojdbc6.jar就行)
然后将ojdbc6.jar放到C:/用户   目录下，这样不用再改代码路径
打开cmd运行</p>
<div><pre><code>mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc14 -Dversion=11.2.0.1.0 -Dpackaging=jar -Dfile=ojdbc6.jar  
</code></pre>
<div><span>1</span><br></div></div><p>运行成功后会提示&quot;BULLD SUCCESS&quot;说明安装成功了，我们可以去本地的maven仓库查看一下
<img src="https://img-blog.csdn.net/2018050214283716?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" />
如果你也是跟我一样的说明你安装成功了。</p>
<p>接下来再pom.xml中添加ojdbc的引用即可</p>
<div><pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.oracle&lt;/groupId&gt;
    &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;
    &lt;version&gt;11.2.0.1.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>相应的在application-dev.yml中更改驱动包并且更换查询连接sql<img src="https://img-blog.csdn.net/20180503090542805?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></p>
<p>同时我们也需要更改activate流创建的数据库表，即在ActivitiConfig.java中将我红线框起来的部分改为oracle<img src="https://img-blog.csdn.net/20180502143358163?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></p>
<p>最后就是改mapper里面的sql语句了，这里不做记录。</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="bootdo"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-04-19T17:45:00.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">filter 拦截器 获取http请求参数</title>
    <id>/2018/04/19/filter%E6%8B%A6%E6%88%AA%E5%99%A8%E8%8E%B7%E5%8F%96http%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0/</id>
    <link href="https://fangweilong.github.io/2018/04/19/filter%E6%8B%A6%E6%88%AA%E5%99%A8%E8%8E%B7%E5%8F%96http%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p><em>PS:里面一些方法使用了hutool的工具类 可以替换成你自己习惯的 工具类不是记录的主要东西。</em></p>
<p>记录点
1.怎么创建拦截器
2.怎么统一管理拦截器是否启用和输用顺序
3.怎么获取传入的参数
4.怎么获取返回值</p>
<p>直接上代码===================================================</p>
<p>filter配置</p>
<div><pre><code>@Configuration 	
public class FilterConfig { 	  //log拦截器启动
    @Bean
    public FilterRegistrationBean logFilterRegistration() {
        FilterRegistrationBean registration = new FilterRegistrationBean();
        registration.setDispatcherTypes(DispatcherType.REQUEST);
        registration.setFilter(new LogFilter());
        registration.addUrlPatterns(&quot;/*&quot;);
        registration.setName(&quot;logFilter&quot;);
        registration.setOrder(Integer.MAX_VALUE-1);
        return registration;
    } 	}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p>LogFilter</p>
<div><pre><code>/**
 * log过滤
 *
 * @author Teler
 */
public class LogFilter implements Filter {


    @Override
    public void init(FilterConfig config) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)
            throws IOException, ServletException {

        //为了在post的时候能继续传递
        LogHttpServletRequestWrapper request = new LogHttpServletRequestWrapper((HttpServletRequest) servletRequest);
        MyResponseWrapper response = new MyResponseWrapper((HttpServletResponse) servletResponse);

        StaticLog.info(&quot;=====================LogFilter前置start=====================&gt;&quot;);

        //封装log实体类
         Map&lt;String, Object&gt; parameterMap=new LinkedHashMap&lt;&gt;();
        if(&quot;GET&quot;.equals(request.getMethod())){
            parameterMap= JSONUtil.parseObj(ServletUtil.getParams(request));
        }else{
            parameterMap= JSONUtil.parseObj(request.getBody());
        }
        StaticLog.info(&quot;请求来源： =》{}&quot;, request.getRemoteAddr());
        StaticLog.info(&quot;请求URI：{}&quot;, request.getRequestURI());
        StaticLog.info(&quot;请求方式：{}&quot;, request.getMethod());
        StaticLog.info(&quot;请求参数：{}&quot;, parameterMap);
        StaticLog.info(&quot;=====================LogFilter前置  end=====================&gt;&quot;);
        //消耗时间
        long start = System.currentTimeMillis();

        // 执行主体方法start==================================================================
        chain.doFilter(request, response);
        // 执行主体方法  end==================================================================

        //耗时
        long time = System.currentTimeMillis() - start;
        StaticLog.info(&quot;=====================LogFilter后置start=====================&gt;&quot;);
        byte[] content=response.getContent();
        String resultParams=new String();
        if (content.length &gt; 0) {
            resultParams= new String(content, &quot;UTF-8&quot;);
        }
             StaticLog.info(&quot;返回值：{}&quot;, resultParams);
        StaticLog.info(&quot;耗时（毫秒）：&quot;, time);
        //返回消息 否则前台收不到消息
        servletResponse.getOutputStream().write(resultParams.getBytes());
        StaticLog.info(&quot;=====================LogFilter后置  end=====================&gt;&quot;);
    }

    @Override
    public void destroy() {
    }
}

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br></div></div><p>LogHttpServletRequestWrapper.java</p>
<div><pre><code>public class LogHttpServletRequestWrapper extends HttpServletRequestWrapper {
    private final String body;

    public LogHttpServletRequestWrapper(HttpServletRequest request) {
        super(request);
        StringBuilder stringBuilder = new StringBuilder();
        BufferedReader bufferedReader = null;
        InputStream inputStream = null;
        try {
            inputStream = request.getInputStream();
            if (inputStream != null) {
                bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
                char[] charBuffer = new char[128];
                int bytesRead = -1;
                while ((bytesRead = bufferedReader.read(charBuffer)) &gt; 0) {
                    stringBuilder.append(charBuffer, 0, bytesRead);
                }
            } else {
                stringBuilder.append(&quot;&quot;);
            }
        } catch (IOException ex) {

        } finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                }
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (bufferedReader != null) {
                try {
                    bufferedReader.close();
                }
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        body = stringBuilder.toString();
    }

    @Override
    public ServletInputStream getInputStream() throws IOException {
        final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(body.getBytes());
        ServletInputStream servletInputStream = new ServletInputStream() {
            @Override
            public boolean isFinished() {
                return false;
            }
            @Override
            public boolean isReady() {
                return false;
            }
            @Override
            public void setReadListener(ReadListener readListener) {
            }
            @Override
            public int read() throws IOException {
                return byteArrayInputStream.read();
            }
        };
        return servletInputStream;

    }

    @Override
    public BufferedReader getReader() throws IOException {
        return new BufferedReader(new InputStreamReader(this.getInputStream()));
    }

    public String getBody() {
        return this.body;
    }

}

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br></div></div><p>MyResponseWrapper.java</p>
<div><pre><code>public class MyResponseWrapper extends HttpServletResponseWrapper {
    private ByteArrayOutputStream buffer;

    private ServletOutputStream out;

    public MyResponseWrapper(HttpServletResponse httpServletResponse) {
        super(httpServletResponse);
        buffer = new ByteArrayOutputStream();
        out = new WrapperOutputStream(buffer);
    }

    @Override
    public ServletOutputStream getOutputStream() throws IOException {
        return out;
    }

    @Override
    public void flushBuffer()
            throws IOException {
        if (out != null) {
            out.flush();
        }
    }

    public byte[] getContent() throws IOException {
        flushBuffer();
        return buffer.toByteArray();
    }

    class WrapperOutputStream extends ServletOutputStream {
        private ByteArrayOutputStream bos;

        public WrapperOutputStream(ByteArrayOutputStream bos) {
            this.bos = bos;
        }

        @Override
        public void write(int b)
                throws IOException {
            bos.write(b);
        }

        @Override
        public boolean isReady() {

            // TODO Auto-generated method stub
            return false;

        }

        @Override
        public void setWriteListener(WriteListener arg0) {

            // TODO Auto-generated method stub

        }
    }
}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-04-19T17:45:00.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java-String字符串split分割无效</title>
    <id>/2018/06/26/java-string%E5%AD%97%E7%AC%A6%E4%B8%B2split%E5%88%86%E5%89%B2%E6%97%A0%E6%95%88/</id>
    <link href="https://fangweilong.github.io/2018/06/26/java-string%E5%AD%97%E7%AC%A6%E4%B8%B2split%E5%88%86%E5%89%B2%E6%97%A0%E6%95%88/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>这个问题之前就遇到过，这次又遇到了特别纪录一下。
1。
<img src="https://img-blog.csdn.net/20180626095402193?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" />
按照我们正常的逻辑走，一串字符串通过split()分割以后会变成数组，我们可以通过下表直接获取到拆分以后的字符串。ok这样是没问题的，我们继续试。</p>
<p>2。
<img src="https://img-blog.csdn.net/20180626095705156?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" />
在字符串中通过   |   分割的时候就出现了问题，在此次分割中返回给我们的数据变成了每个字符而不是完整的字符串</p>
<p>3。
经过查阅得知，在split()中有部分分隔符需要转义以后才能使用，即加&quot;\\&quot;变成split(&quot;\\|&quot;)
<img src="https://img-blog.csdn.net/20180626100550239?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" />
OK这样就可以了。</p>
<p>4。试验了一些常用的符号，用到以下分隔符的时候时候需要转义。</p>
<div><pre><code>   \\*   \\+   这两个不转义会报java.util.regex.PatternSyntaxException
   \\\\        单个\需要转变成四个\
   \\.         .如果不转义的话会不返回任何值          
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>如果还遇到有需要转义的字符，欢迎留言</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-06-26T10:21:12.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java.lang.NoSuchMethodError</title>
    <id>/2018/03/20/java-lang-nosuchmethoderror/</id>
    <link href="https://fangweilong.github.io/2018/03/20/java-lang-nosuchmethoderror/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p><strong>出现这个问题检查</strong></p>
<p><strong>1.jar包版本</strong>
有些jar包对版本有要求，不同版本之间是不互通的，有些还对jdk有强制要求，比如Google的番石榴就要求JDK1.8版本</p>
<p><strong>2.是否将所有修改的class文件布置到服务器</strong>
这个问题是最容易出现的，可能有一天更改的文件较多，布置的时候又是点对点布置，就会遗漏掉一两个class文件。
解决办法就是在每次更改文件就用文本记下来，或者用Git等版本控制读取到更改记录，一个个文件对照着布置。</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-03-20T10:25:27.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">javax.el.PropertyNotFoundException</title>
    <id>/2018/03/19/javax-el-propertynotfoundexception/</id>
    <link href="https://fangweilong.github.io/2018/03/19/javax-el-propertynotfoundexception/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-model中没有get-和set方法"> 1.model中没有get()和set方法</h2>
<p><em>如果没有get()和set()方法，el表达式就会出现javax.el.PropertyNotFoundException错误</em></p>
<h2 id="_2-model中有get-和set-方法"> 2.model中有get()和set()方法</h2>
<p><em>检查过后发现model中有get()和set()方法，并且编译出来的class文件中也有get()和set()方法，但是就是报错。这时候检查你的字段开头是不是大写字母开头，<strong>如果是大写字母则更改为小写字母开头</strong>。el表达式是找get()方法读取值的，我们需要使用规范的规则来命名我们的变量名。</em></p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-03-19T14:03:04.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java表单提交，调用.net的webservice乱码</title>
    <id>/2018/04/19/java%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4-%E8%B0%83%E7%94%A8-net%E7%9A%84webservice%E4%B9%B1%E7%A0%81/</id>
    <link href="https://fangweilong.github.io/2018/04/19/java%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4-%E8%B0%83%E7%94%A8-net%E7%9A%84webservice%E4%B9%B1%E7%A0%81/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>昨天调用webservice接口的时候发现传进去的中文参数全部变成了  '?'，但是使用main方法去调用的时候一切正常，今天终于解决了，特此记录。</p>
<p>这是我之前的的form表单</p>
<div><pre><code>&lt;form action=&quot;&quot; method=&quot;post&quot; id=&quot;form&quot;&gt;
&lt;/form&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><p>更改后的</p>
<div><pre><code>&lt;form action=&quot;&quot; method=&quot;post&quot; id=&quot;form&quot; accept-charset=&quot;UTF-8&quot;&gt;
&lt;form&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><p>其实就是加了指定编码格式。出现乱码问题一般都是两边的编码格式不统一，所以我们在项目都要指定编码格式。如果你使用此方法仍未解决乱码，请尝试以下几种方法:</p>
<ol>
<li>web.xml中添加统一的编码格式</li>
<li>request添加编码格式</li>
<li>encoding中文字符串</li>
</ol>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-04-19T09:38:46.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java访问webservice</title>
    <id>/2018/04/13/java%E8%AE%BF%E9%97%AEwebservice/</id>
    <link href="https://fangweilong.github.io/2018/04/13/java%E8%AE%BF%E9%97%AEwebservice/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="直接调用"> 直接调用</h1>
<p>使用这种方法可以较为方便，也比较直观，网上找到的方法感觉不太友好，而且还有区分什么的</p>
<div><pre><code><span>import</span> <span>org<span>.</span>dom4j<span>.</span></span><span>VisitorSupport</span><span>;</span>
<span>import</span> <span>java<span>.</span>io<span>.</span></span><span>InputStream</span><span>;</span>
<span>import</span> <span>java<span>.</span>io<span>.</span></span><span>OutputStream</span><span>;</span>
<span>import</span> <span>java<span>.</span>net<span>.</span></span><span>HttpURLConnection</span><span>;</span>
<span>import</span> <span>java<span>.</span>net<span>.</span></span>URL<span>;</span>


<span>public</span> <span>class</span> <span>ReceSoapService</span> <span>extends</span> <span>VisitorSupport</span> <span>{</span>
	   <span>//以下为主体部分</span>

```
	<span>//路径</span>
	    <span>private</span> <span>static</span> <span>String</span> urlStr<span>=</span><span>"http://localhost:8080/FoodOrderCCTWebService/FoodOrderCCTWebService.asmx"</span><span>;</span>
	    <span>/**
	     * @param code 查询值
	     * @param userName 用户名(登录时)
	     * @param pwd 密码(登录时)
	     * @return
	     */</span>
	    <span>public</span> <span>static</span> <span>void</span> <span>receSoap</span><span>(</span><span>String</span> code<span>,</span><span>String</span> userName<span>,</span><span>String</span> pwd<span>)</span> <span>throws</span> <span>Exception</span> <span>{</span>
	        <span>//服务的地址</span>
	        <span>URL</span> wsUrl <span>=</span> <span>new</span> <span>URL</span><span>(</span>urlStr<span>)</span><span>;</span>
	        <span>HttpURLConnection</span> conn <span>=</span> <span>(</span><span>HttpURLConnection</span><span>)</span> wsUrl<span>.</span><span>openConnection</span><span>(</span><span>)</span><span>;</span>
	        conn<span>.</span><span>setDoInput</span><span>(</span><span>true</span><span>)</span><span>;</span>
	        conn<span>.</span><span>setDoOutput</span><span>(</span><span>true</span><span>)</span><span>;</span>
	        conn<span>.</span><span>setRequestMethod</span><span>(</span><span>"POST"</span><span>)</span><span>;</span>
	        conn<span>.</span><span>setRequestProperty</span><span>(</span><span>"Content-Type"</span><span>,</span> <span>"text/xml;charset=UTF-8"</span><span>)</span><span>;</span><span>//根据返回的数据类型</span>
	        <span>OutputStream</span> os <span>=</span> conn<span>.</span><span>getOutputStream</span><span>(</span><span>)</span><span>;</span>
	
	        <span>//请求体  一般只改这地方</span>
	        <span>String</span> soap <span>=</span> <span>"&lt;?xml version=\"1.0\" encoding=\"utf-8\"?>\n"</span> <span>+</span>
	                <span>"&lt;soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"</span> <span>+</span>
	                <span>"  &lt;soap:Body>\n"</span> <span>+</span>
	                <span>"    &lt;GetInfo xmlns=\"http://tempuri.org/\">\n"</span> <span>+</span>
	                <span>"      &lt;method>"</span><span>+</span>code<span>+</span><span>"&lt;/method>\n"</span> <span>+</span>
	                <span>"      &lt;paramValue>"</span><span>+</span>userName<span>+</span><span>"|"</span><span>+</span>pwd<span>+</span><span>"&lt;/paramValue>\n"</span> <span>+</span>
	                <span>"      &lt;online>&lt;/online>\n"</span> <span>+</span>
	                <span>"    &lt;/GetInfo>\n"</span> <span>+</span>
	                <span>"  &lt;/soap:Body>\n"</span> <span>+</span>
	                <span>"&lt;/soap:Envelope>"</span><span>;</span>
	
	        os<span>.</span><span>write</span><span>(</span>soap<span>.</span><span>getBytes</span><span>(</span><span>)</span><span>)</span><span>;</span>
	        <span>try</span> <span>{</span>
	            <span>InputStream</span> is <span>=</span> conn<span>.</span><span>getInputStream</span><span>(</span><span>)</span><span>;</span>
	            <span>byte</span><span>[</span><span>]</span> b <span>=</span> <span>new</span> <span>byte</span><span>[</span><span>1024</span><span>]</span><span>;</span>
	            <span>int</span> len <span>=</span> <span>0</span><span>;</span>
	            <span>String</span> s <span>=</span> <span>""</span><span>;</span>
	            <span>while</span> <span>(</span><span>(</span>len <span>=</span> is<span>.</span><span>read</span><span>(</span>b<span>)</span><span>)</span> <span>!=</span> <span>-</span><span>1</span><span>)</span> <span>{</span>
	                <span>String</span> ss <span>=</span> <span>new</span> <span>String</span><span>(</span>b<span>,</span> <span>0</span><span>,</span> len<span>,</span> <span>"UTF-8"</span><span>)</span><span>;</span>
	                s <span>+=</span> ss<span>;</span>
	            <span>}</span>
	            is<span>.</span><span>close</span><span>(</span><span>)</span><span>;</span>
	            os<span>.</span><span>close</span><span>(</span><span>)</span><span>;</span>
	            conn<span>.</span><span>disconnect</span><span>(</span><span>)</span><span>;</span>
	            
	            <span>//输出返回的xml数据</span>
	            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>s<span>)</span><span>;</span>
	            <span>//根据需求解析xml，我这里没写，有需求的另外再找吧</span>
	            
	        <span>}</span> <span>catch</span> <span>(</span><span>Exception</span> e<span>)</span> <span>{</span>
	            <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span><span>"异常:"</span> <span>+</span> e<span>.</span><span>getMessage</span><span>(</span><span>)</span><span>)</span><span>;</span>
	        <span>}</span>
	    <span>}</span>
```

<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-04-13T15:19:15.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">org.springframework.beans.factory.BeanInitializationExceptionCouldnotloadproperties;</title>
    <id>/2018/01/24/org-springframework-beans-factory-beaninitializationexceptioncouldnotloadproperties/</id>
    <link href="https://fangweilong.github.io/2018/01/24/org-springframework-beans-factory-beaninitializationexceptioncouldnotloadproperties/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="基本报错信息表现为"> 基本报错信息表现为:</h2>
<div><pre><code>严重: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/db.properties]
at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.postProcessBeanFactory(PropertySourcesPlaceholderConfigurer.java:147)
at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:694)
at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:669)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:461)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5118)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5634)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1571)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1561)
at java.util.concurrent.FutureTask.run(FutureTask.java:266)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at java.lang.Thread.run(Thread.java:745)
Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/db.properties]
at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:140)
at org.springframework.core.io.support.EncodedResource.getInputStream(EncodedResource.java:143)
at org.springframework.core.io.support.PropertiesLoaderUtils.fillProperties(PropertiesLoaderUtils.java:98)
at org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:175)
at org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:156)
at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.postProcessBeanFactory(PropertySourcesPlaceholderConfigurer.java:137)
... 15 more

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><h3 id="可能性1-没有引入数据源"> 可能性1:没有引入数据源</h3>
<p>在applicationContext.xml添加数据源   (请根据自己的项目引用)</p>
<div><pre><code>&lt;context:property-placeholder location=&quot;classpath:db.properties&quot;/&gt;
</code></pre>
<div><span>1</span><br></div></div><h3 id="可能性2-引入了数据源但是找不到文件"> 可能性2：引入了数据源但是找不到文件</h3>
<p>这个问题目前我只在idea中遇到,myEclipse中没出现过。</p>
<p>找到项目的资源文件(resources),查看是否是这种图标<p><img src="https://img-blog.csdn.net/20180124141515461?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>
<p>如果不是则在文件上右键→ Mark Dirextory as</p>
<img src="https://img-blog.csdn.net/20180124141744475?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="">
<p>将文件属性设置为 Resources Root 后重新编译项目重试(我这边已经改过了，所以在上面看不到有Resources Root属性)</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-01-24T14:21:35.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">使用java生成微信随机加好友的链接</title>
    <id>/2019/08/14/%E4%BD%BF%E7%94%A8java%E7%94%9F%E6%88%90%E5%BE%AE%E4%BF%A1%E9%9A%8F%E6%9C%BA%E5%8A%A0%E5%A5%BD%E5%8F%8B%E7%9A%84%E9%93%BE%E6%8E%A5/</id>
    <link href="https://fangweilong.github.io/2019/08/14/%E4%BD%BF%E7%94%A8java%E7%94%9F%E6%88%90%E5%BE%AE%E4%BF%A1%E9%9A%8F%E6%9C%BA%E5%8A%A0%E5%A5%BD%E5%8F%8B%E7%9A%84%E9%93%BE%E6%8E%A5/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="随机生成链接"> 随机生成链接</h1>
<h2 id="前言"> 前言</h2>
<ol>
<li>Java写的，其他语言自己翻译，其实就是一个随机数生成</li>
<li>微信PC复制会自动加空格把这个a标签破坏掉，所以用其他工具复制</li>
<li>朋友圈发不了，跟（2）一样 会自动加空格把a标签破坏掉，其他自测</li>
</ol>
<h2 id="先看一下效果"> 先看一下效果</h2>
<p><img src="https://img-blog.csdnimg.cn/20190814105615981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
你看用微信复制的时候，a标签就被破坏了 要自己重新改一下
<img src="https://img-blog.csdnimg.cn/20190814105651238.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
点击以后进去这个页面。但是这种应该是没有真人的，我没加好友，自行测试。</p>
<p>首先是main</p>
<div><pre><code>public static void main(String[] args) {
        //12位数
        String str=&quot;&lt;a href=\&quot;weixin://contacts/profile/wxid_%s\&quot;&gt;点击加好友%s&lt;/a&gt;&quot;;
        boolean flag=true;
        int num=0;
        System.out.println(&quot;请输入一个大于0小于10000的正整数：&quot;);
        while (flag){
            Scanner scanner = new Scanner(System.in);
            try {
                num = scanner.nextInt();
                if(num&lt;=0||num&gt;=10000){
                    System.out.println(&quot;输入错误！请输入一个大于0小于10000的正整数：&quot;);
                }else{
                    flag=false;
                }
            }catch (Exception e){
                System.out.println(&quot;输入错误！请输入一个大于0小于10000的正整数：&quot;);
            }
        }

        for (int i = 0; i &lt;num ; i++) {
            //生成随机id
            String randomString= getRandomString(12);
            //format替换里面的参数
            System.out.println(String.format(str,randomString,i));
        }
    }
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br></div></div><p>然后是生成随机id的方法</p>
<div><pre><code> //生成随机数
    public static String getRandomString(int length){
        String str=&quot;abcdefghijklmnopqrstuvwxyz0123456789&quot;;
        StringBuffer sb = new StringBuffer();
        Random random = new Random();
        for (int i = 0; i &lt; length; i++)
        {
            sb.append(str.charAt(random.nextInt(str.length())));
        }
        return sb.toString();
    }
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><p>最后是控制台效果
<img src="https://img-blog.csdnimg.cn/20190814105936985.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="java"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-08-14T11:01:22.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">ajax返回成功却进入了error</title>
    <id>/2018/05/16/ajax%E8%BF%94%E5%9B%9E%E6%88%90%E5%8A%9F%E5%8D%B4%E8%BF%9B%E5%85%A5%E4%BA%86error/</id>
    <link href="https://fangweilong.github.io/2018/05/16/ajax%E8%BF%94%E5%9B%9E%E6%88%90%E5%8A%9F%E5%8D%B4%E8%BF%9B%E5%85%A5%E4%BA%86error/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<div><pre><code>$.ajax({
        type: &quot;POST&quot;,
        url: &quot;&quot;,
        data: {},
        dataType: &quot;json&quot;,//注意这里
        success: function(data){
            console.log(data)
        },
        error:function(data){
            console.log(data)
        }
    })
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p>返回的数据明明是成功的，状态也都是200，但是就是没进success。
<strong>其实原因很简单，后台返回的数据类型不是json的，而我们在ajax里面指定的dataType类型是json的，数据类型不一致就会导致出现进入error的问题，只要返回的类型和ajax指定类型一致就ok了。</strong></p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-05-16T13:08:03.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">echarts词云会渲染两次</title>
    <id>/2019/12/13/echarts%E8%AF%8D%E4%BA%91%E4%BC%9A%E6%B8%B2%E6%9F%93%E4%B8%A4%E6%AC%A1/</id>
    <link href="https://fangweilong.github.io/2019/12/13/echarts%E8%AF%8D%E4%BA%91%E4%BC%9A%E6%B8%B2%E6%9F%93%E4%B8%A4%E6%AC%A1/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>词云是比较容易出现这个问题的一个图表，所以拿词云做一个示例。</p>
<p><img src="https://img-blog.csdnimg.cn/20191213110612320.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
在上面这张图中可以比较清晰的看到有两个“数值模拟”的词云，在普通的业务逻辑中，我们只需要在代码中这样写</p>
<div><pre><code>this.chart.setOption(this.config.option, true);
</code></pre>
<div><span>1</span><br></div></div><p>即可使图表只渲染一次。</p>
<div><pre><code>	原理：
		option:图表的配置项和数据
		notMerge:可选，是否不跟之前设置的option进行合并，默认为false，即合并。
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>但是在我们的系统业务中，因为一些特殊的业务需求，导致这个function被调用了两次，但是又不能去掉调用。也都尝试过clear()或者resize()，都无法达到要求。
后来猜测会不会是因为同时调用两次渲染导致echarts认为这是一次，所以加一个延迟加载的配置</p>
<div><pre><code>this.chart.setOption(this.config.option, true，true);
</code></pre>
<div><span>1</span><br></div></div><p>发现成功了
<img src="https://img-blog.csdnimg.cn/20191213111501697.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<div><pre><code>原理：
	option:图表的配置项和数据
	notMerge:可选，是否不跟之前设置的option进行合并，默认为false，即合并。（这里是导致二次渲染不成功的根本）
	lazyUpdate:可选，在设置完option后是否不立即更新图表，默认为false，即立即更新。
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-12-13T11:16:38.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">elementui-table默认勾选</title>
    <id>/2019/11/30/elementui-table%E9%BB%98%E8%AE%A4%E5%8B%BE%E9%80%89/</id>
    <link href="https://fangweilong.github.io/2019/11/30/elementui-table%E9%BB%98%E8%AE%A4%E5%8B%BE%E9%80%89/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="html-table"> html table</h2>
<div><pre><code>&lt;el-table :stripe=&quot;true&quot; style=&quot;width: 100%&quot; border highlight-current-row
                  ref=&quot;table&quot;
                  :data=&quot;tableData&quot;
                  row-key=&quot;id&quot;&gt;
&lt;/el-table&gt;
</code></pre>
</div><p><strong>PS:注意 ref=&quot;table&quot; 配置 不加这个在vue中会找不到这个组件</strong></p>
<h2 id="vue"> vue</h2>
<div><pre><code>//为了防止指向错误 所以我都是直接提出来的
let self=this;
$.each(vm.tableData, function (index, item) {
	//这里可以用你的条件
    if (item.state == &quot;0&quot;) {
             //默认选中
             self.$nextTick(function () {
                 self.$refs.table.toggleRowSelection(item, true);
             })
     }
})
</code></pre>
</div><p>如果有更好的解决办法 请留言</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-11-30T11:58:37.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">elementui禁止浏览器自动填充用户名密码</title>
    <id>/2019/11/30/elementui%E7%A6%81%E6%AD%A2%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E7%94%A8%E6%88%B7%E5%90%8D%E5%AF%86%E7%A0%81/</id>
    <link href="https://fangweilong.github.io/2019/11/30/elementui%E7%A6%81%E6%AD%A2%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E7%94%A8%E6%88%B7%E5%90%8D%E5%AF%86%E7%A0%81/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>浏览器这功能在登录的时候挺好用的，但是在注册和管理的时候就很难受了</p>
<p>所以</p>
<p>在普通的input上直接off就行了</p>
<div><pre><code>&lt;input type=&quot;password&quot; autoComplete=&quot;off&quot;/&gt;
</code></pre>
<div><span>1</span><br></div></div><p>而在elementui上使用autoComplete=&quot;off&quot;是没用的 得使用new-password</p>
<div><pre><code>&lt;el-input v-model=&quot;form.password&quot; show-password auto-complete=&quot;new-password&quot;&gt;&lt;/el-input&gt;
</code></pre>
<div><span>1</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-11-30T11:58:37.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">vue+elementui打开弹窗，但是弹窗的接口只会初始调用一次</title>
    <id>/2019/11/30/vue-elementui%E6%89%93%E5%BC%80%E5%BC%B9%E7%AA%97-%E4%BD%86%E6%98%AF%E5%BC%B9%E7%AA%97%E7%9A%84%E6%8E%A5%E5%8F%A3%E5%8F%AA%E4%BC%9A%E5%88%9D%E5%A7%8B%E8%B0%83%E7%94%A8%E4%B8%80%E6%AC%A1/</id>
    <link href="https://fangweilong.github.io/2019/11/30/vue-elementui%E6%89%93%E5%BC%80%E5%BC%B9%E7%AA%97-%E4%BD%86%E6%98%AF%E5%BC%B9%E7%AA%97%E7%9A%84%E6%8E%A5%E5%8F%A3%E5%8F%AA%E4%BC%9A%E5%88%9D%E5%A7%8B%E8%B0%83%E7%94%A8%E4%B8%80%E6%AC%A1/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>使用element的dialog弹窗的时候</p>
<div><pre><code>	&lt;el-dialog
      :title=&quot;title&quot;
      :visible.sync=&quot;dialogVisible&quot;
      width=&quot;68vw&quot;
    &gt;
      &lt;Info&gt;&lt;/Info&gt;
    &lt;/el-dialog&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>这样样式比较美观好看 而且也好控制
但是如果你是在列表页使用 根据每次传入的id不同获取不同的数据的时候，你会发现只有在第一次使用的时候才能调用接口</p>
<p>修改的办法也很简单，在dialog层加一个v-if判定</p>
<div><pre><code>&lt;el-dialog
      :title=&quot;title&quot;
      v-if=&quot;dialogVisible&quot;
      :visible.sync=&quot;dialogVisible&quot;
      width=&quot;68vw&quot;
    &gt;
      &lt;Info&gt;&lt;/Info&gt;
    &lt;/el-dialog&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>详细原因请查看vue官网文档：https://cn.vuejs.org/v2/guide/conditional.html#v-if-vs-v-show</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-11-30T11:58:37.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">input下拉选择框可以自行输入也可以下拉选择</title>
    <id>/2018/04/18/input%E4%B8%8B%E6%8B%89%E9%80%89%E6%8B%A9%E6%A1%86%E5%8F%AF%E4%BB%A5%E8%87%AA%E8%A1%8C%E8%BE%93%E5%85%A5%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%B8%8B%E6%8B%89%E9%80%89%E6%8B%A9/</id>
    <link href="https://fangweilong.github.io/2018/04/18/input%E4%B8%8B%E6%8B%89%E9%80%89%E6%8B%A9%E6%A1%86%E5%8F%AF%E4%BB%A5%E8%87%AA%E8%A1%8C%E8%BE%93%E5%85%A5%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%B8%8B%E6%8B%89%E9%80%89%E6%8B%A9/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>我这里使用的是原生H5标签  datalist</p>
<div><pre><code>			&lt;input class=&quot;browsers&quot; list=&quot;browsers&quot;&gt;
			&lt;datalist id=&quot;browsers&quot;&gt;browsers
				&lt;option value=&quot;清醒&quot;&gt;
				&lt;option value=&quot;嗜睡&quot;&gt;
				&lt;option value=&quot;烦躁&quot;&gt;
				&lt;option value=&quot;昏迷&quot;&gt;
			&lt;/datalist&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><p>获取值可以使用  $(&quot;.browsers&quot;).val()
优点:原生，不需要引入第三方插件，直观，少写代码
缺点:样式支持上不太好，没有第三方美观，版本低的浏览器可能不支持</p>
<p>第三方插件  :   helloweba     select2     chosen
请根据个人需求选择对应插件，我搜索到的博客很多人都会推荐chosen，建议尝试</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-04-18T09:35:35.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">jquery 节流防抖</title>
    <id>/2020/03/25/jquery-%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/</id>
    <link href="https://fangweilong.github.io/2020/03/25/jquery-%E8%8A%82%E6%B5%81%E9%98%B2%E6%8A%96/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言"> 前言</h2>
<h4 id="在一些大数量或者有延迟性的操作下-为了页面不要每次输入或者点击的时候闪烁-我们需要对接口进行调用频率限制。"> 在一些大数量或者有延迟性的操作下，为了页面不要每次输入或者点击的时候闪烁，我们需要对接口进行调用频率限制。</h4>
<p>直接上代码</p>
<h2 id="代码"> 代码</h2>
<div><pre><code>//需要定义在方法外
<span>let</span> <span>timeout</span><span>;</span>
<span>function</span> <span>throttling</span><span>(</span><span>)</span><span>{</span>
	//先清理
	clearTimeout<span>(</span>timeout<span>)</span>	
	<span>timeout</span> <span>=</span> setTimeout<span>((</span><span>)</span> <span>=</span><span>></span> <span>{</span>
		//在此处写调用的方法，可以实现仅最后一次操作生效
    	console.log<span>(</span><span>'abc'</span><span>)</span>
	<span>}</span>, <span>3000</span><span>)</span>
<span>}</span>
               
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-03-25T16:02:12.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">jquery点击浏览器返回上一页按钮并能直接刷新</title>
    <id>/2018/11/06/jquery%E7%82%B9%E5%87%BB%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E9%A1%B5%E6%8C%89%E9%92%AE%E5%B9%B6%E8%83%BD%E7%9B%B4%E6%8E%A5%E5%88%B7%E6%96%B0/</id>
    <link href="https://fangweilong.github.io/2018/11/06/jquery%E7%82%B9%E5%87%BB%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E9%A1%B5%E6%8C%89%E9%92%AE%E5%B9%B6%E8%83%BD%E7%9B%B4%E6%8E%A5%E5%88%B7%E6%96%B0/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>A，B两个页面，从B页面点击浏览器的返回上一页按钮，跳转到A页面，此时需要A页面重新加载，则可以在A页面加上这一段</p>
<div><pre><code> var isPageHide = false;  
    window.addEventListener('pageshow', function () {  
        if (isPageHide) {  
            window.location.reload();  
        }  
    });  
    window.addEventListener('pagehide', function () {  
        isPageHide = true;  
    });
</code></pre>
</div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-11-06T11:17:36.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">js_jquery获取不到页面元素 需要点击一下才能找到</title>
    <id>/2018/02/06/js-jquery%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0-%E9%9C%80%E8%A6%81%E7%82%B9%E5%87%BB%E4%B8%80%E4%B8%8B%E6%89%8D%E8%83%BD%E6%89%BE%E5%88%B0/</id>
    <link href="https://fangweilong.github.io/2018/02/06/js-jquery%E8%8E%B7%E5%8F%96%E4%B8%8D%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0-%E9%9C%80%E8%A6%81%E7%82%B9%E5%87%BB%E4%B8%80%E4%B8%8B%E6%89%8D%E8%83%BD%E6%89%BE%E5%88%B0/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>2018-03-23 更新
更新内容:检查在获取的时候是不是使用class获取元素，如果是则修改为通过id获取元素。通过id获取元素是可以直接获取到的</p>
<p>以下为原文  ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
在项目中，尤其是后台管理常用到iframe嵌套，但是最近遇到一个问题。
我在页面上想要去获取页面的一个元素，却无法获取到元素
<img src="http://img.blog.csdn.net/20180206192530612?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="只能找到document，定位不到具体元素" />
但是使用chrome自带的调试台去选中元素，然后再执行jquery方法，此时可以正常获取到元素
<img src="http://img.blog.csdn.net/20180206192859897?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="已经可以获取到元素" />
一开始想到可能是未来元素的原因，尝试过后发现并没有用处。
后来想到在form表单提交的时候如果有两层form嵌套，就会出现提交不了的现象。那会不会iframe嵌套也会出现这个问题呢？
当只使用一层iframe层时，也是可以正常获取元素的。那么两层的时候为什么会不行了呢？
查阅资料得知，当我们去获取元素时，js会默认在外层iframe中寻找元素，如果我们要寻找里层iframe的元素，必须要切换到指定iframe层中。</p>
<div><pre><code>var obj=document.getElementById(&quot;mainframe&quot;).contentWindow; //填你的需要找到元素的那一层iframe的id
obj.document.getElementsByClassName(&quot;odd_bg&quot;);//我们可以对元素进行正常的操作了，我这里是寻找的class名，同理可以使用id等获取

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-02-06T19:39:42.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">js_jquery限制input输入框只能输入两位小数的数字</title>
    <id>/2018/01/31/js-jquery%E9%99%90%E5%88%B6input%E8%BE%93%E5%85%A5%E6%A1%86%E5%8F%AA%E8%83%BD%E8%BE%93%E5%85%A5%E4%B8%A4%E4%BD%8D%E5%B0%8F%E6%95%B0%E7%9A%84%E6%95%B0%E5%AD%97/</id>
    <link href="https://fangweilong.github.io/2018/01/31/js-jquery%E9%99%90%E5%88%B6input%E8%BE%93%E5%85%A5%E6%A1%86%E5%8F%AA%E8%83%BD%E8%BE%93%E5%85%A5%E4%B8%A4%E4%BD%8D%E5%B0%8F%E6%95%B0%E7%9A%84%E6%95%B0%E5%AD%97/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>//正整数 两位小数</p>
<div><pre><code>$(&#39;.inputWrap&#39;).on(&#39;input&#39;, function () {
        var num = $(this).val();
        if(num.indexOf(&quot;.&quot;) !== 0){
	         num = num.replace(/[^\d.]/g, &quot;&quot;);  //清除“数字”和“.”以外的字符  
	         num = num.replace(/\.{2,}/g, &quot;.&quot;); //只保留第一个. 清除多余的  
	         num = num.replace(&quot;.&quot;, &quot;$#$&quot;).replace(/\./g, &quot;&quot;).replace(&quot;$#$&quot;, &quot;.&quot;);
	         num = num.replace(/^(\-)*(\d+)\.(\d\d).*$/, &#39;$1$2.$3&#39;); //只能输入两个小数  
	         if (num.indexOf(&quot;.&quot;) &lt; 0 &amp;&amp; num != &quot;&quot;) {//以上已经过滤，此处控制的是如果没有小数点，首位不能为类似于 01、02的金额 
	             num = parseFloat(num);
	         }  
         }else{
          num = &quot;&quot;;
         }
	    $(this).val(num);
   });
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-01-31T20:53:55.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">layui-lay_verify-form表单自定义验证规则</title>
    <id>/2018/10/25/layui-lay-verify-form%E8%A1%A8%E5%8D%95%E8%87%AA%E5%AE%9A%E4%B9%89%E9%AA%8C%E8%AF%81%E8%A7%84%E5%88%99/</id>
    <link href="https://fangweilong.github.io/2018/10/25/layui-lay-verify-form%E8%A1%A8%E5%8D%95%E8%87%AA%E5%AE%9A%E4%B9%89%E9%AA%8C%E8%AF%81%E8%A7%84%E5%88%99/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>官方文档详见：https://www.layui.com/doc/modules/form.html#verify
虽然layui的官方文档已经是写的比较详细，但是初次使用的时候总会懵一下，这里纪录一下lay-verify自定义验证规则的时候到底放哪。</p>
<div><pre><code>html：
&lt;input type=&quot;text&quot; lay-verify=&quot;digital&quot; placeholder=&quot;请输入数字&quot;&gt;
&lt;button type=&quot;button&quot; class=&quot;layui-btn layui-btn-norma&quot; lay-submit lay-filter=&quot;submit_button&quot;&gt;提交&lt;/button&gt;

js：
form.verify({
  //数组的两个值分别代表：[正则匹配、匹配不符时的提示文字]
  ,digital: [
     /^[0-4]*$/
    ,&#39;请填入0-4的分数&#39;
  ] 
}); 
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><p>这样写没问题，但是form.verify放置的位置没讲清楚，还是要自己试一下。</p>
<div><pre><code>layui.use([&#39;form&#39;], function () {
        var form = layui.form;
        //要放在form.on外面，千万不能放在提交步骤中，否则会不触发
        form.verify({
            //数组的两个值分别代表：[正则匹配、匹配不符时的提示文字]
            digital: [
                /^[0-4]*$/
                ,&#39;请填入0-4的分数&#39;
            ]
        });
        form.on(&quot;submit(submit_button)&quot;, function (data) {
            return false;
        });
    });
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-10-25T14:56:06.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">layui的laydate控件的使用</title>
    <id>/2018/04/28/layui%E7%9A%84laydate%E6%8E%A7%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8/</id>
    <link href="https://fangweilong.github.io/2018/04/28/layui%E7%9A%84laydate%E6%8E%A7%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>目前使用的layui版，没有单独使用laydate。
官网上的例子是每个属性单独设置的，我稍微整合了一下常用属性。</p>
<p>引入了css和js以后</p>
<div><pre><code>//初始化时间
layui.use(&#39;laydate&#39;, function() {
    //初始化layui
    var laydate = layui.laydate;
    //执行一个laydate实例
    laydate.render({
        elem: &#39;.date&#39; //指定元素  元素选择器
        , type: &#39;date&#39;  //选择时间类型 可选值:year(年) month(年月)  date(年月日)  time(时分秒)  datetime(年月日时分秒)
        , format: &#39;MM-dd&#39;  //时间格式  常用时间格式:yyyy-MM-dd HH:mm:ss
        , range: false  //是否开始左侧选择  为true时可以左右选择时间
        , value: new Date() //初始值 今天
        , min: 0 //几天前或者指定日期&#39;2018-04-28 12:30:00&#39;
        , max: 1 //几天后或者指定日期&#39;2017-04-29 12:30:00&#39;
        , btns: [&#39;clear&#39;, &#39;now&#39;, &#39;confirm&#39;] //选择框右下角显示的按钮 清除-现在-确定
        ,done: function(value, date){//时间回调
            console.log(value);
            console.log(date);
        }
    });
});
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-04-28T10:53:26.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">利用layer实现放大图片的效果</title>
    <id>/2018/02/07/%E5%88%A9%E7%94%A8layer%E5%AE%9E%E7%8E%B0%E6%94%BE%E5%A4%A7%E5%9B%BE%E7%89%87%E7%9A%84%E6%95%88%E6%9E%9C/</id>
    <link href="https://fangweilong.github.io/2018/02/07/%E5%88%A9%E7%94%A8layer%E5%AE%9E%E7%8E%B0%E6%94%BE%E5%A4%A7%E5%9B%BE%E7%89%87%E7%9A%84%E6%95%88%E6%9E%9C/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>引用layer.js</p>
<p>//小图</p>
<div><pre><code>&lt;a href=&quot;javascript:amplificationImg(&#39;图片名&#39;,&#39;图片地址&#39;)&quot;&gt;&lt;img src=&quot;&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;
</code></pre>
<div><span>1</span><br></div></div><p>//隐藏域 也就是放大以后的图片位置</p>
<div><pre><code>&lt;img alt=&quot;&quot; style=&quot;display:none&quot; id=&quot;displayImg&quot; src=&quot;&quot; /&gt;
</code></pre>
<div><span>1</span><br></div></div><p>//js方法体</p>
<div><pre><code>function amplificationImg(name, url) {
   $(&quot;#displayImg&quot;).attr(&quot;src&quot;, url);
   var height = $(&quot;#displayImg&quot;).height();//拿的图片原来宽高，建议自定义宽高
   var width = $(&quot;#displayImg&quot;).width();
   layer.open({
      type: 1,
      title: false,
      closeBtn: 0,
      shadeClose: true,
      area: [width + &#39;px&#39;, height + &#39;px&#39;], //宽高
	  content: &quot;&lt;img alt=&quot; + name + &quot; title=&quot; + name + &quot; src=&quot; + url + &quot; /&gt;&quot;
   });
}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-02-07T13:59:18.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">mapbox-glStyleisnotdone_loading</title>
    <id>/2019/05/16/mapbox-gl-style-is-not-done-loading/</id>
    <link href="https://fangweilong.github.io/2019/05/16/mapbox-gl-style-is-not-done-loading/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>这个错误是因为画的时候样式还没加载完成，下面就调用了。
在一些论坛上也能找到别人有遇到这些问题：
https://stackoverflow.com/questions/44394573/mapbox-gl-js-style-is-not-done-loading?rq=1
https://www.javaear.com/question/44394573.html</p>
<p>这个时候在你调用的的方法中加一个监听：</p>
<div><pre><code>function loadSurface(_map, option) {
            //监听等样式加载完成以后再调用
            _map.on(&#39;load&#39;, function () {
            	//完成以后再处理当前逻辑 
                _map.setLayoutProperty(&#39;regionFillLayer&#39;, &#39;visibility&#39;, &#39;visible&#39;);
                _map.setFilter(&#39;regionFillLayer&#39;, filter);
                _map.setPaintProperty(&#39;regionFillLayer&#39;, &quot;fill-extrusion-color&quot;, {
                    &quot;property&quot;: &quot;REGIONNAME&quot;,
                    &quot;type&quot;: &quot;categorical&quot;,
                    &quot;stops&quot;: option
                });
                _map.setPaintProperty(&#39;regionFillLayer&#39;, &quot;fill-extrusion-height&quot;, 1);
                _map.setPaintProperty(&#39;regionFillLayer&#39;, &quot;fill-extrusion-opacity&quot;, 0.5);
            });
        }
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><p>不知道这样讲能不能看懂 毕竟不是专业前端。简单总结就是加一个监听，实在不行加一个延迟都行，但是不保险</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-05-16T11:01:54.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">radio取消选中并能再次选中</title>
    <id>/2018/05/09/radio%E5%8F%96%E6%B6%88%E9%80%89%E4%B8%AD%E5%B9%B6%E8%83%BD%E5%86%8D%E6%AC%A1%E9%80%89%E4%B8%AD/</id>
    <link href="https://fangweilong.github.io/2018/05/09/radio%E5%8F%96%E6%B6%88%E9%80%89%E4%B8%AD%E5%B9%B6%E8%83%BD%E5%86%8D%E6%AC%A1%E9%80%89%E4%B8%AD/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>网上很多都是只能取消选中，之后就无法选中了。
按照这个方法可以再次选中</p>
<div><pre><code>$(document).ready(function(){
        var old = null; //用来保存原来的对象
        $(&quot;.radioCheck&quot;).each(function(){//循环绑定事件
            if(this.checked){
                old = this; //如果当前对象选中，保存该对象
            }
            this.onclick = function(){
                if(this == old){//如果点击的对象原来是选中的，取消选中
                    this.checked = false;
                    old = null;
                } else{
                    old = this;
                }
            }
        });
    });
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br></div></div><p>转载自  http://iswift.iteye.com/blog/1736015</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-05-09T17:28:11.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">一组数差距过大的问题：symbolsize计算公式</title>
    <id>/2021/04/02/%E4%B8%80%E7%BB%84%E6%95%B0%E5%B7%AE%E8%B7%9D%E8%BF%87%E5%A4%A7%E7%9A%84%E9%97%AE%E9%A2%98-symbolsize%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F/</id>
    <link href="https://fangweilong.github.io/2021/04/02/%E4%B8%80%E7%BB%84%E6%95%B0%E5%B7%AE%E8%B7%9D%E8%BF%87%E5%A4%A7%E7%9A%84%E9%97%AE%E9%A2%98-symbolsize%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h3 id="解决的问题"> 解决的问题</h3>
<p>当一组数据的值相差太大，导致在页面渲染的效果太差。比如一个点占据了整个屏幕，一个点小到看不见。这时候这个计算公式就可以起作用了</p>
<div><pre><code><span>/**
 * symbolsize计算公式
 * minSize：最小的尺寸
 * coefficientSize：系数，自己定义
 * currentValue：当前symbol的值
 * maxValue：所有symbol的最大值
 * minValue：所有symbol的最小值
 * defaultValue：计算失败时的默认值，可不传。默认20
 */</span>
<span>function</span> <span>symbolSizeCalcu</span><span>(</span><span>minSize<span>,</span> coefficientSize<span>,</span> currentValue<span>,</span> maxValue<span>,</span> minValue<span>,</span> defaultValue</span><span>)</span> <span>{</span>
    <span>let</span> result<span>=</span><span>20</span><span>;</span>
	<span>//TODO 这边没写传参为空的判断，有需要请自己加上</span>
    <span>if</span> <span>(</span>maxValue <span>-</span> minValue <span>&lt;=</span> <span>0</span><span>)</span> <span>{</span>
        result <span>=</span> defaultValue <span>?</span> defaultValue <span>:</span> <span>20</span><span>;</span>
    <span>}</span> <span>else</span> <span>{</span>
        result <span>=</span> minSize <span>+</span> coefficientSize <span>*</span> <span>(</span>currentValue <span>-</span> minValue<span>)</span> <span>/</span> <span>(</span>maxValue <span>-</span> minValue<span>)</span>
    <span>}</span>
    <span>return</span> result<span>;</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-04-02T16:48:56.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">微信浏览器访问ajax接口十秒钟未响应自动重发</title>
    <id>/2018/11/08/%E5%BE%AE%E4%BF%A1%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AEajax%E6%8E%A5%E5%8F%A3%E5%8D%81%E7%A7%92%E9%92%9F%E6%9C%AA%E5%93%8D%E5%BA%94%E8%87%AA%E5%8A%A8%E9%87%8D%E5%8F%91/</id>
    <link href="https://fangweilong.github.io/2018/11/08/%E5%BE%AE%E4%BF%A1%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AEajax%E6%8E%A5%E5%8F%A3%E5%8D%81%E7%A7%92%E9%92%9F%E6%9C%AA%E5%93%8D%E5%BA%94%E8%87%AA%E5%8A%A8%E9%87%8D%E5%8F%91/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>2018-12-21更新：
在url或者ajax带上 connect_redirect=1 这个参数，我在项目中遇到的会自动重发的手机确实不重发了，但是有人说有很小一部分的手机还是会重发
原文地址见：https://developers.weixin.qq.com/community/develop/doc/b8f9f09573e92ffb0e23308d54bcdcf7
评论区9楼</p>
<p>===================================================================
以下为原文</p>
<p>在微信内资的浏览器中调用程序(ios暂未发现，android上面会出现)，当网络不稳定或服务器处理慢，ajax调用服务器十秒钟未响应，微信的浏览器默认就会关闭上一次的请求，重新发起新请求。
在日常的查询处理中可能还好，但是涉及到订单等数据必须唯一的时候，就会出现下两次订单的情况，并且每次的间隔都是十秒钟(很少一部分会有9秒钟的情况)
所以我加了两个方式来处理
<strong>1.ajax超时</strong></p>
<div><pre><code>ajaxTimeoutTest=$.ajax({
            url: &quot;&quot;,
            type: &quot;post&quot;,
            data: {
            },
            timeout : 8000, //超时时间设置，单位毫秒
            datatype: &quot;json&quot;,
            success: function (msg) {
            }
             error: function (msg) {
            },
            complete : function(XMLHttpRequest,status){ //请求完成后最终执行参数
                if(status==&#39;timeout&#39;){//超时,status还有success,error等值的情况
                    ajaxTimeoutTest.abort();
                    alert(&quot;网络请求超时,请检查网络后再试&quot;);
                }
            }
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><p>在网络不好的时候要给用户提示而不是一直在等数据返回，并且主动切断ajax。
<strong>2.查询订单状态(以订单举例，最常见的一种)</strong>
即便不存在重发的情况下，在对订单进行操作的时候也是需要先判断订单的状态，如果已经支付成功应该就返回给前端支付成功不要重复支付的提醒。
但是之前做的一套系统里面，下单的时候没有生成订单而是在最终确认支付的时候才会生成订单(不知道为啥会这样设计，姑且这样用吧)，这个时候可以用session（cookie）来判断。</p>
<div><pre><code>		if(session().getAttribute(&quot;orderSessios&quot;)!=null){
            errorMsg = &quot;请勿在一分钟内重复提交订单&quot;;
            outJson(errorMsg);
            return;
        }else{
            session().setAttribute(&quot;orderSessios&quot;, &quot;orderSession&quot;);
            session().setMaxInactiveInterval(60);//秒
        }
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><p>代码仅供参考，请根据实际业务增加判断逻辑</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-11-08T14:41:47.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">手机社会化分享到qq好友、qq空间、微信、微信朋友圈、微博等(区分浏览器)</title>
    <id>/2018/02/07/%E6%89%8B%E6%9C%BA%E7%A4%BE%E4%BC%9A%E5%8C%96%E5%88%86%E4%BA%AB%E5%88%B0qq%E5%A5%BD%E5%8F%8B%E3%80%81qq%E7%A9%BA%E9%97%B4%E3%80%81%E5%BE%AE%E4%BF%A1%E3%80%81%E5%BE%AE%E4%BF%A1%E6%9C%8B%E5%8F%8B%E5%9C%88%E3%80%81%E5%BE%AE%E5%8D%9A%E7%AD%89-%E5%8C%BA%E5%88%86%E6%B5%8F%E8%A7%88%E5%99%A8/</id>
    <link href="https://fangweilong.github.io/2018/02/07/%E6%89%8B%E6%9C%BA%E7%A4%BE%E4%BC%9A%E5%8C%96%E5%88%86%E4%BA%AB%E5%88%B0qq%E5%A5%BD%E5%8F%8B%E3%80%81qq%E7%A9%BA%E9%97%B4%E3%80%81%E5%BE%AE%E4%BF%A1%E3%80%81%E5%BE%AE%E4%BF%A1%E6%9C%8B%E5%8F%8B%E5%9C%88%E3%80%81%E5%BE%AE%E5%8D%9A%E7%AD%89-%E5%8C%BA%E5%88%86%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>先下载js包并引用
官网:http://www.calledt.com/soshm/
github:https://github.com/calledT/soshm</p>
<p>//隐藏域 点击分享以后弹出本隐藏域</p>
<div><pre><code>&lt;div class=&quot;soshm&quot; id=&quot;share&quot;&gt;&lt;/div&gt;
</code></pre>
<div><span>1</span><br></div></div><p>js代码</p>
<div><pre><code>&lt;script&gt;
		//所有支持的分享出去的网站
		// weixin,weixintimeline,qq,qzone,yixin,weibo,tqq,renren,douban,tieba
		var supportUrl=[&#39;qq&#39;, &#39;qzone&#39;,&#39;weibo&#39;,&#39;yixin&#39;,&#39;weibo&#39;,&#39;tqq&#39;,&#39;renren&#39;,&#39;douban&#39;,&#39;tieba&#39;];//初始化支持的分享网站
		//qq浏览器或者uc浏览器才能调起微信好友和微信朋友圈功能,所以在这加一个判断能调起的功能
		if(navigator.userAgent.indexOf(&#39;UCBrowser&#39;) &gt; -1||navigator.userAgent.indexOf(&#39;MQQBrowser&#39;) &gt; -1) {
			//push两个元素进数组
			supportUrl.push(&#39;weixin&#39;,&#39;weixintimeline&#39;);
		} 
		soshm(&#39;#share&#39;, {
			  // 分享的链接，默认使用location.href。
			  url:&#39;&#39;,
			  // 分享的标题，默认使用document.title
			  title: &#39;&#39;,
			  // 分享的摘要，默认使用&lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;content的值
			  digest: &#39;&#39;,
			  // 分享的图片，默认获取本页面第一个img元素的src
			  pic: &#39;&#39;,
			  // 显示的支持分享的网站
			  sites: supportUrl
		});				
	    &lt;/script&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-02-07T14:18:05.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">百度地图js-UncaughtTypeErrorCannotreadproperty‘gc‘of_undefined</title>
    <id>/2018/02/26/%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BEjs-uncaught-typeerror-cannot-read-property-gc-of-undefined/</id>
    <link href="https://fangweilong.github.io/2018/02/26/%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BEjs-uncaught-typeerror-cannot-read-property-gc-of-undefined/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>我们在使用百度地图的js时往往是这样初始化参数它的</p>
<div><pre><code>	var map = new BMap.Map(&quot;allmap&quot;);//请注意这段
	var lng=&#39;&#39;;
	var	lat=&#39;&#39;;
    var point = new BMap.Point(lng, lat);
    map.centerAndZoom(point, 17);
    map.zoomOut(); map.zoomOut(); map.zoomOut(); map.zoomOut();//缩放比例
    var marker = new BMap.Marker(point);  // 创建标注
    map.addOverlay(marker);               // 将标注添加到地图中
    marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
    map.enableScrollWheelZoom(true); //设置鼠标放大
    var top_left_control = new BMap.ScaleControl({ anchor: BMAP_ANCHOR_TOP_LEFT }); // 左上角，添加比例尺
    var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件
    map.addControl(top_left_control);
    map.addControl(top_left_navigation);
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div><p>这也是百度官方Demo的写法。
而<em>Cannot read property 'gc' of undefined</em>错误说起来也很简单，就是我们在页面上少了一个DIV.
比如我们初始化的id是“allmap”,那我们只需要在页面上添加一个div</p>
<div><pre><code>&lt;div id=&quot;allmap&quot;&gt;&lt;/div&gt;
</code></pre>
<div><span>1</span><br></div></div><p>就OK啦。这里的id根据你自己初始化的id为准，通常是使用&quot;allmap&quot;。</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-02-26T15:07:32.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">centos7-docker-更换迁移数据目录</title>
    <id>/2020/02/02/centos7-docker-%E6%9B%B4%E6%8D%A2%E8%BF%81%E7%A7%BB%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95/</id>
    <link href="https://fangweilong.github.io/2020/02/02/centos7-docker-%E6%9B%B4%E6%8D%A2%E8%BF%81%E7%A7%BB%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="先决条件"> 先决条件</h1>
<h3 id="版本"> 版本</h3>
<div><pre><code>docker version:19.03.3, build a872fc2f86
</code></pre>
</div><h3 id="安装方式"> 安装方式</h3>
<div><pre><code>使用yum在线安装 离线安装方式因为安装路径等原因 可能导致路径不同 请执行测试
</code></pre>
</div><p>其他版本未测试</p>
<h1 id="操作"> 操作</h1>
<ol>
<li>
<p>进入目录</p>
<div><pre><code><span>cd</span> /etc/docker
</code></pre>
<div><span>1</span><br></div></div></li>
<li>
<p>新建或者编辑文件</p>
<div><pre><code><span>vi</span> daemon.json
</code></pre>
<div><span>1</span><br></div></div></li>
<li>
<p>放入内容
graph后面是你自己设置的存储路径
我这里只有一个配置，如果设置了仓库地址，也可以在此处加上</p>
<div><pre><code><span>{</span>
	<span>"graph"</span><span>:</span> <span>"/home/docker"</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div></li>
<li>
<p>重启docker
实际上docker自己会加载配置文件 但是为了保险起见 我们还是手动重启一下</p>
<div><pre><code>systemctl restart docker
</code></pre>
<div><span>1</span><br></div></div></li>
<li>
<p>查看
通过命令查看</p>
</li>
</ol>
<div><pre><code>docker info
</code></pre>
<div><span>1</span><br></div></div><p><img src="https://img-blog.csdnimg.cn/20200303142501202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
可以看到路径已经切换过来了</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="docker"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-02-02T22:45:01.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">centos7离线安装docker和docker-compose</title>
    <id>/2020/02/02/centos7%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker%E5%92%8Cdocker-compose/</id>
    <link href="https://fangweilong.github.io/2020/02/02/centos7%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85docker%E5%92%8Cdocker-compose/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="实测版本说明"> 实测版本说明</h2>
<div><pre><code>centos：7.5
docker：19.03.5
docker-compose：1.24.3
</code></pre>
</div><h2 id="官方资源下载地址"> 官方资源下载地址</h2>
<div><pre><code>自行下载需要的版本。
[docker](https://download.docker.com/linux/static/stable/x86_64/)
[docker-compose](https://github.com/docker/compose/releases)
</code></pre>
</div><h2 id="上传到服务器"> 上传到服务器</h2>
<div><pre><code>上传 install-docker-offline.sh docker.service docker-ce docker-compose-Linux-x86_64压缩包到任意的同一文件夹下  
建议到/home
</code></pre>
</div><h2 id="执行"> 执行</h2>
<div><pre><code>sh install-docker-offline.sh

其他的根据脚本提示操作
</code></pre>
</div><h2 id="install-sh"> install.sh</h2>
<div><pre><code><span>#!/bin/sh</span>
<span>echo</span> -e <span>'作者：Teler'</span>
<span>echo</span> -e <span>'版本：v0.0.1'</span>
<span>echo</span> -e <span>'创建时间:2020-02-02'</span>
<span>echo</span> -e <span>'更新时间:2020-02-02 22:21'</span>

<span>echo</span> -e <span>'给自己赋权限\n'</span>
<span>chmod</span> +x ./<span>$0</span>

<span>#初始化</span>
<span>function</span> <span>init</span><span>(</span><span>)</span><span>{</span>
    <span>clear</span>
    <span>echo</span> -e <span>'请选择操作\n'</span>
    <span>echo</span> -e <span>'1.安装docker\n'</span>
    <span>echo</span> -e <span>'2.安装docker-compose\n'</span>
    <span>echo</span> -e <span>'exit:退出'</span>
    
    call
<span>}</span> 

<span>#决定调用什么方法</span>
<span>function</span> <span>call</span><span>(</span><span>)</span><span>{</span>
    <span>echo</span> -e <span>'\n'</span>
    <span>read</span> -p <span>'请输入:'</span> INPUT
    <span>case</span> <span>$INPUT</span> <span>in</span>
        <span>1</span><span>)</span>
        installDocker
        <span>;</span><span>;</span>
        <span>2</span><span>)</span>
        installDockerCompose
        <span>;</span><span>;</span>
               
        *<span>)</span>
        <span>#noFound</span>
        <span>echo</span> <span>'感谢使用........'</span>
        <span>exit</span>
        <span>;</span><span>;</span>
    <span>esac</span>

    <span>if</span> <span>[</span> <span>$?</span> -eq <span>0</span> <span>]</span><span>;</span><span>then</span>
        init
    <span>fi</span> 
<span>}</span>

<span>#安装docker</span>
<span>function</span> <span>installDocker</span><span>(</span><span>)</span><span>{</span>
    <span>read</span> -p <span>'请输入完整的docker压缩包文件名:'</span> FILENAME

    searchFile <span>$FILENAME</span>

    <span>if</span> <span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>;</span><span>then</span>
        <span>echo</span> -e <span>'\n文件不存在'</span>
        installDocker
    <span>fi</span>

    <span>echo</span> -e <span>'\n解压文件...'</span>
    <span>tar</span> -xzvf <span>$FILENAME</span>
    <span>if</span> <span>[</span> <span>$?</span> -eq <span>0</span> <span>]</span><span>;</span><span>then</span>
        <span>echo</span> -e <span>'\n将docker目录移到/usr/bin目录下...'</span>
        <span>cp</span> docker/* /usr/bin/
        <span>if</span> <span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>;</span><span>then</span>
            <span>echo</span> -e <span>'\n复制失败'</span>
            <span>exit</span>
        <span>fi</span>
        <span>echo</span> -e <span>'\n将docker.service 移到/etc/systemd/system/ 目录...'</span>
        <span>cp</span> docker.service /etc/systemd/system/
        <span>if</span> <span>[</span> <span>$?</span> -eq <span>0</span> <span>]</span><span>;</span><span>then</span>
            <span>echo</span> -e <span>'\n添加文件权限...'</span>
            <span>chmod</span> +x /etc/systemd/system/docker.service
            <span>if</span> <span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>;</span><span>then</span>
                <span>echo</span> -e <span>'\n添加失败'</span>
                <span>exit</span>
            <span>fi</span>
            <span>echo</span> -e <span>'\n重新加载配置文件...'</span>
            systemctl daemon-reload
            <span>if</span> <span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>;</span><span>then</span>
                <span>echo</span> -e <span>'\n加载失败'</span>
                <span>exit</span>
            <span>fi</span>
            <span>echo</span> -e <span>'\n启动docker...'</span>
            systemctl start docker
            <span>if</span> <span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>;</span><span>then</span>
                <span>echo</span> -e <span>'\n启动失败'</span>
                <span>exit</span>
            <span>fi</span>
            <span>echo</span> -e <span>'\n设置开机自启...'</span>
            systemctl <span>enable</span> docker.service
            <span>if</span> <span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>;</span><span>then</span>
                <span>echo</span> -e <span>'\n开机启动失败'</span>
                <span>exit</span>
            <span>fi</span>
            <span>echo</span> -e <span>'\ndocker版本：'</span>
            docker -v
        <span>else</span>
            <span>echo</span> -e <span>'\n复制失败'</span>
            <span>exit</span>
        <span>fi</span>
    <span>else</span>
        <span>echo</span> -e <span>'\n解压失败'</span>
        <span>exit</span>    
    <span>fi</span>
    <span>return</span> <span>0</span>
<span>}</span>
<span>#安装docker-compose</span>
<span>function</span> <span>installDockerCompose</span><span>(</span><span>)</span><span>{</span>
    <span>read</span> -p <span>'请输入完整的docker compose文件名:'</span> FILENAME

    searchFile <span>$FILENAME</span>

    <span>if</span> <span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>;</span><span>then</span>
        <span>echo</span> -e <span>'\n文件不存在'</span>
        installDockerCompose
    <span>fi</span>

    <span>echo</span> -e <span>'\n复制文件到/usr/local/bin下 并重命名为docker-compose'</span>
    <span>cp</span> -y <span>$FILENAME</span> /usr/local/bin/docker-compose
    <span>if</span> <span>[</span> <span>$?</span> -ne <span>0</span> <span>]</span><span>;</span><span>then</span>
        <span>echo</span> -e <span>'\n赋予执行权限'</span>
        <span>chmod</span> +x /usr/local/bin/docker-compose

        <span>echo</span> <span>'\ndocker-compose版本：'</span>
        docker-compose -v
    <span>else</span> 
        <span>echo</span> <span>'\n复制失败'</span>
    <span>fi</span>


    <span>return</span> <span>0</span>
<span>}</span>

<span>#暂未支持</span>
<span>function</span> <span>noFound</span><span>(</span><span>)</span><span>{</span>
    <span>echo</span> -e <span>'暂未支持'</span>
    <span>return</span> <span>0</span>
<span>}</span>

<span>#检查文件是否存在</span>
<span>#存在返回0 不存在返回1</span>
<span>function</span> <span>searchFile</span><span>(</span><span>)</span><span>{</span>
    <span>if</span> <span>[</span> -f <span>"<span>$1</span>"</span> <span>]</span><span>;</span> <span>then</span>
        <span>return</span> <span>0</span>
    <span>else</span> 
        <span>return</span> <span>1</span>
    <span>fi</span>
<span>}</span>




init


</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br><span>119</span><br><span>120</span><br><span>121</span><br><span>122</span><br><span>123</span><br><span>124</span><br><span>125</span><br><span>126</span><br><span>127</span><br><span>128</span><br><span>129</span><br><span>130</span><br><span>131</span><br><span>132</span><br><span>133</span><br><span>134</span><br><span>135</span><br><span>136</span><br><span>137</span><br><span>138</span><br><span>139</span><br><span>140</span><br><span>141</span><br><span>142</span><br><span>143</span><br><span>144</span><br><span>145</span><br><span>146</span><br><span>147</span><br><span>148</span><br><span>149</span><br><span>150</span><br><span>151</span><br><span>152</span><br></div></div><h2 id="docker-service"> docker.service</h2>
<div><pre><code><span>[</span>Unit<span>]</span>
<span>Description</span><span>=</span>Docker Application Container Engine
<span>Documentation</span><span>=</span>https://docs.docker.com
<span>After</span><span>=</span>network-online.target firewalld.service
<span>Wants</span><span>=</span>network-online.target
 
<span>[</span>Service<span>]</span>
<span>Type</span><span>=</span>notify
<span># the default is not to use systemd for cgroups because the delegate issues still</span>
<span># exists and systemd currently does not support the cgroup feature set required</span>
<span># for containers run by docker</span>
<span>ExecStart</span><span>=</span>/usr/bin/dockerd
<span>ExecReload</span><span>=</span>/bin/kill -s HUP <span>$MAINPID</span>
<span># Having non-zero Limit*s causes performance problems due to accounting overhead</span>
<span># in the kernel. We recommend using cgroups to do container-local accounting.</span>
<span>LimitNOFILE</span><span>=</span>infinity
<span>LimitNPROC</span><span>=</span>infinity
<span>LimitCORE</span><span>=</span>infinity
<span># Uncomment TasksMax if your systemd version supports it.</span>
<span># Only systemd 226 and above support this version.</span>
<span>#TasksMax=infinity</span>
<span>TimeoutStartSec</span><span>=</span><span>0</span>
<span># set delegate yes so that systemd does not reset the cgroups of docker containers</span>
<span>Delegate</span><span>=</span>yes
<span># kill only the docker process, not all processes in the cgroup</span>
<span>KillMode</span><span>=</span>process
<span># restart the docker process if it exits prematurely</span>
<span>Restart</span><span>=</span>on-failure
<span>StartLimitBurst</span><span>=</span><span>3</span>
<span>StartLimitInterval</span><span>=</span>60s
 
<span>[</span>Install<span>]</span>
<span>WantedBy</span><span>=</span>multi-user.target
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="docker"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-02-02T22:45:01.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">docker-hadoop伪分布式-java上传报错</title>
    <id>/2020/02/02/docker-hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F-java%E4%B8%8A%E4%BC%A0%E6%8A%A5%E9%94%99/</id>
    <link href="https://fangweilong.github.io/2020/02/02/docker-hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F-java%E4%B8%8A%E4%BC%A0%E6%8A%A5%E9%94%99/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p><mark>2020-11-06更新</mark></p>
<p><a href="https://gitee.com/Teler/docker-warehouse/tree/master/hadoop" target="_blank" rel="noopener noreferrer">docker-compose 脚本地址</a></p>
<h2 id="更新目的"> 更新目的</h2>
<p>原文的解决思路是对的，但是还是有点小问题。使用ip的话要更改好几个地方太麻烦。所以这几天重新试了一遍。</p>
<h2 id="步骤"> 步骤</h2>
<h3 id="方法一-更改host"> 方法一：更改host</h3>
<ul>
<li>
<p>通过docker ps找到datanode的容器id</p>
</li>
<li>
<p>编辑本机的hosts文件</p>
<ul>
<li>
<p>文件最后追加一行，内容为</p>
<div><pre><code>
  部署datanode节点的宿主机ip datanode节点容器的id

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div></li>
<li>
<p>举例：</p>
<ul>
<li>
<p>宿主机ip：192.168.2.10</p>
</li>
<li>
<p>容器id：123456</p>
</li>
<li>
<p>hosts追加内容为</p>
</li>
</ul>
<div><pre><code>      <span>192.168</span>.2.10 <span>123456</span>
</code></pre>
<div><span>1</span><br></div></div></li>
<li>
<p>使hosts生效</p>
</li>
<li>
<p>window</p>
<div><pre><code>    ipconfig /flushdns
</code></pre>
<div><span>1</span><br></div></div></li>
<li>
<p>centos</p>
<div><pre><code>      /etc/init.d/network restart
</code></pre>
<div><span>1</span><br></div></div></li>
</ul>
</li>
<li>
<p>注意
<strong>容器不能rm或者down，否则需要重新配制hosts。restart、stop、start无影响</strong></p>
</li>
</ul>
<h3 id="方法一-部署在同一台服务器"> 方法一：部署在同一台服务器</h3>
<hr>
<p><mark>以下为第一版本原文</mark></p>
<h1 id="版本"> 版本</h1>
<ul>
<li>docker：19.03.12</li>
<li>docker-compose：1.26.2</li>
<li>hadoop：3.2</li>
<li>镜像地址：https://github.com/big-data-europe/docker-hadoop</li>
</ul>
<hr>
<h1 id="报错信息"> 报错信息</h1>
<h2 id="could-only-be-written-to-0-of-the-1-minreplication-nodes-there-are-1-datanode-s-running-and-1-node-s-are-excluded-in-this-operation"> could only be written to 0 of the 1 minReplication nodes. There are 1 datanode(s) running and 1 node(s) are excluded in this operation.</h2>
<hr>
<h1 id="查错"> 查错</h1>
<h2 id="网络查到的一些修改"> 网络查到的一些修改</h2>
<ul>
<li>删库重新格式化
<ul>
<li>https://blog.csdn.net/qfxsxhfy/article/details/80909953</li>
<li>在docker中不应该出现这种问题，而且是全新搭建的</li>
</ul>
</li>
<li>dfs.replication
<ul>
<li>修改为相应的节点数量</li>
</ul>
</li>
<li>空间不够
<ul>
<li>删除无效数据或者扩容，这个问题因为我是新搭建的容器所以没出现，如果查找发现是此问题请慎重操作，<strong>数据无价</strong></li>
</ul>
</li>
<li>fs.defaultFS
<ul>
<li>在容器的hadoop.env中已经指定好，所以我也没修改，如果没设置的可以执行设置为hdfs://namenode:9000</li>
<li>如果是单独服务器部署节点，把namenode修改为主服务器的外网ip</li>
</ul>
</li>
<li>返回容器节点设置
<ul>
<li>进容器内部查看，发现hdfs-site.xml中已经添加</li>
</ul>
</li>
<li>hosts
<ul>
<li>添加hadoop节点ip信息到容器的hsots中，这个容器默认添加了</li>
</ul>
</li>
</ul>
<hr>
<h1 id="解决"> 解决</h1>
<p>所有网上能找到的问题都试过了，结果都是无法访问。后来想到容器节点和添加hosts步骤。虽然在容器内部添加了，但是在开发机(我本地机器)上可能没办法识别。
尝试在部署docker的宿主机上修改了一下hosts，果然能访问到了。</p>
<div><pre><code>  <span>vi</span> /etc/hosts

  <span># 追加</span>
  <span>&lt;</span>namenode 容器内部ip<span>></span> namenode

  <span>reboot</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><hr>
<p>PS:我是部署的伪分布式，并非在单独的服务器上修改，如果是部署的多服务器集群模式，需要保证各个容器节点上都能互相访问到。如果以后容器的ip变更，也需要修改hosts文件中的内容。</p>
<hr>
<p>最后吐槽一下，这几天为了解决这个问题，搜到的博客都是抄来抄去，完全不经思考，不知道他们有没有实践过。甚至有的直接删除数据格式化节点</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="docker"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-02-02T22:45:01.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">java打包成docker-images</title>
    <id>/2021/03/23/java%E6%89%93%E5%8C%85%E6%88%90docker-images/</id>
    <link href="https://fangweilong.github.io/2021/03/23/java%E6%89%93%E5%8C%85%E6%88%90docker-images/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="一个最简单的jar包的dockerfile制作"> 一个最简单的jar包的Dockerfile制作</h1>
<h2 id="openjdk的dockerhub地址"> <a href="https://hub.docker.com/_/openjdk" target="_blank" rel="noopener noreferrer">openjdk的dockerhub地址</a></h2>
<hr>
<h2 id="在代码根目录创建dockerfile文件-内容如下"> 在代码根目录创建Dockerfile文件，内容如下</h2>
<div><pre><code>FROM openjdk:8-alpine

LABEL <span>"Author"</span><span>=</span><span>"Teler"</span> <span>\</span>
    <span>"email"</span><span>=</span><span>"terler96@qq.com"</span> <span>\</span>
    <span>version</span><span>=</span><span>0.0</span>.1 <span>\</span>
    <span>description</span><span>=</span><span>"jar运行在docker中的示例系统"</span>

COPY target/app.jar /home/app/app.jar
WORKDIR /home/app

ENTRYPOINT <span>[</span><span>"java"</span>,<span>"-jar"</span>,<span>"app.jar"</span><span>]</span>

EXPOSE <span>8080</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div><h2 id="执行命令行"> 执行命令行</h2>
<ol>
<li>当前根目录</li>
</ol>
<div><pre><code>docker build -t teler/app:1.0.1 <span>.</span>
</code></pre>
<div><span>1</span><br></div></div><ul>
<li>-t指images名称</li>
<li>.指路径</li>
</ul>
<ol start="2">
<li>指定目录</li>
</ol>
<div><pre><code>    docker build -f <span>&lt;</span>path<span>></span>/Dockerfile -t <span>&lt;</span>name<span>></span>:<span>&lt;</span>version<span>></span> <span>.</span>
</code></pre>
<div><span>1</span><br></div></div><hr>
<h3 id="说明-注意点"> 说明&amp;注意点</h3>
<ul>
<li>我为了缩小体积使用的alpine版本，官方建议如下</li>
</ul>
<blockquote>
<p>This image is based on the popular Alpine Linux project, available in the alpine official image. Alpine Linux is much smaller than most distribution base images (~5MB), and thus leads to much slimmer images in general.
The OpenJDK port for Alpine is not in a supported release by OpenJDK, since it is not in the mainline code base. It is only available as early access builds of OpenJDK Project Portola. See also this comment. So this image follows what is available from the OpenJDK project's maintainers.
What this means is that Alpine based images are only released for early access release versions of OpenJDK. Once a particular release becomes a &quot;General-Availability&quot; release, the Alpine version is dropped from the &quot;Supported Tags&quot;; they are still available to pull, but will no longer be updated.</p>
</blockquote>
<ul>
<li>
<p>no main manifest attribute, in app.jar
没有主属性清单：忘了package，直接打包进去了</p>
</li>
<li>
<p>如果使用目录文件以外的文件，需要设置运行目录为 .. ，不再是 . ，这样才能找到文件</p>
</li>
</ul>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="docker"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-03-23T15:07:59.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">PostgreSQL使用数组类型</title>
    <id>/2020/09/01/postgresql%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B/</id>
    <link href="https://fangweilong.github.io/2020/09/01/postgresql%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="版本"> 版本</h1>
<h2 id="pgsql-9-6"> pgsql:9.6</h2>
<h2 id="navicat-15"> navicat:15</h2>
<hr>
<h1 id="创表"> 创表</h1>
<h2 id="使用navicat"> 使用navicat</h2>
<h3 id="字段类型"> 字段类型</h3>
<h5 id="字段类型找不到"> 字段类型找不到</h5>
<p>以varchar为例，在navicat中是找不到数组类型的。只能看到varchar类型
<img src="https://img-blog.csdnimg.cn/20200901095305595.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述" /></p>
<h5 id="自行设置"> 自行设置</h5>
<p>想定义成数组类型也很简单，直接在后面添加一个 [] 的符号
<img src="https://img-blog.csdnimg.cn/20200901095410793.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述" /></p>
<h5 id="保存"> 保存</h5>
<p>随意输入一个表名后保存
<img src="https://img-blog.csdnimg.cn/20200901095434806.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70#pic_center" alt="" /></p>
<h5 id="注意点"> 注意点</h5>
<p>保存以后你会发现代表数组的符号 []  消失了，同时字符串长度变成了0。这时候不是没设置成功，只是因为navicat显示不出来。
<img src="https://img-blog.csdnimg.cn/2020090109551623.png#pic_center" alt="在这里插入图片描述" /></p>
<h2 id="sql语句"> SQL语句</h2>
<div><pre><code><span>CREATE</span> <span>TABLE</span> test <span>(</span> arry <span>VARCHAR</span><span>[</span><span>]</span> <span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br></div></div><hr>
<h1 id="插入"> 插入</h1>
<h3 id="使用-array"> 使用 ARRAY</h3>
<div><pre><code>
<span>INSERT</span> <span>INTO</span> test
<span>VALUES</span>
	<span>(</span> ARRAY <span>[</span> <span>'x'</span><span>,</span> <span>'y'</span> <span>]</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h4 id="使用"> 使用 {}</h4>
<p>注意单引号双引号的位置</p>
<div><pre><code>	<span>INSERT</span> <span>INTO</span> test
<span>VALUES</span>
	<span>(</span> <span>'{"x","y"}'</span><span>)</span><span>;</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><h1 id="查询"> 查询</h1>
<h2 id="查询数组字段"> 查询数组字段</h2>
<div><pre><code><span>select</span> arry <span>from</span> test<span>;</span>
</code></pre>
<div><span>1</span><br></div></div><p>查找结果如图所示
<img src="https://img-blog.csdnimg.cn/20200901100308565.png#pic_center" alt="在这里插入图片描述" /></p>
<h2 id="查询数组下标"> 查询数组下标</h2>
<p><em>千万注意：我们在大部分语言中，数组下标都从0开始，但是在pgsql的数组中，数组下标是从1开始</em></p>
<div><pre><code><span>select</span> arry<span>[</span><span>1</span><span>]</span> <span>from</span> test<span>;</span>
</code></pre>
<div><span>1</span><br></div></div><p><img src="https://img-blog.csdnimg.cn/20200901100423183.png#pic_center" alt="在这里插入图片描述" /></p>
<h2 id="条件语句"> 条件语句</h2>
<p>查询要求：数组中某一个与 y 相等</p>
<div><pre><code><span>select</span> <span>*</span> <span>from</span> test <span>where</span> arry @<span>></span><span>'{"y"}'</span><span>;</span>
</code></pre>
<div><span>1</span><br></div></div><h2 id="常见的操作符"> 常见的操作符</h2>
<p><img src="https://img-blog.csdnimg.cn/20200901100931796.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述" /></p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="postgres"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-09-01T10:12:11.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">PostgreSQL在where条件中使用判断条件</title>
    <id>/2021/07/02/postgresql%E5%9C%A8where%E6%9D%A1%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6/</id>
    <link href="https://fangweilong.github.io/2021/07/02/postgresql%E5%9C%A8where%E6%9D%A1%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="postgresql在where条件中使用判断条件"> PostgreSQL在where条件中使用判断条件</h1>
<h2 id="需求"> 需求</h2>
<p>我们平时查询数据是使用的mybatis，所以是这么写的</p>
<div><pre><code><span>&lt;</span><span>select</span> id<span>=</span><span>"selectTable"</span> resultType<span>=</span><span>"java.util.Map"</span><span>></span>
    <span>select</span> <span>*</span> <span>from</span> <span>Table</span>
        <span>&lt;</span><span>where</span><span>></span>
            <span>&lt;</span><span>if</span> test<span>=</span><span>"keyword!=null and keyword!=''"</span><span>></span>
                <span>and</span> keyword<span>=</span><span>#{keyword}</span>
            <span>&lt;</span><span>/</span><span>if</span><span>></span>
        <span>&lt;</span><span>/</span><span>where</span><span>></span>

<span>&lt;</span><span>select</span><span>></span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><p>但是项目中有个使用动态sql直接查询的需求，在不能使用mybatis等解析查询语句的情况下该怎么实现呢？</p>
<h2 id="使用case-when"> 使用case when</h2>
<div><pre><code><span>select</span> <span>*</span> <span>from</span> <span>Table</span> <span>where</span>  <span>(</span><span>case</span> <span>when</span> 值<span>=</span><span>''</span> <span>then</span> <span>1</span><span>=</span><span>1</span> <span>else</span> <span>Table</span><span>.</span>字段<span>=</span>值 <span>end</span> <span>)</span>
</code></pre>
<div><span>1</span><br></div></div><div><p>提示</p>
<div><pre><code>这里的 == case when == 不是使用的 == case 字段 when ==
要使用 == case when 字段='' ==
</code></pre>
</div></div>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="postgres"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-07-02T15:49:03.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">PostgreSQL连接数过多</title>
    <id>/2021/06/28/postgresql%E8%BF%9E%E6%8E%A5%E6%95%B0%E8%BF%87%E5%A4%9A/</id>
    <link href="https://fangweilong.github.io/2021/06/28/postgresql%E8%BF%9E%E6%8E%A5%E6%95%B0%E8%BF%87%E5%A4%9A/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="报错信息"> 报错信息</h2>
<div><pre><code>FATAL: sorry, too many clients already
</code></pre>
</div><hr>
<h2 id="解释"> 解释</h2>
<p>原因是连接数太多，超过了在配置中设置的max_connections</p>
<hr>
<h2 id="查询"> 查询</h2>
<h3 id="查询设置的最大链接数"> 查询设置的最大链接数</h3>
<div><pre><code><span>show</span> max_connections<span>;</span>
</code></pre>
<div><span>1</span><br></div></div><h3 id="查询当前使用的链接数"> 查询当前使用的链接数</h3>
<div><pre><code><span>select</span> <span>count</span><span>(</span><span>1</span><span>)</span> <span>from</span> pg_stat_activity<span>;</span>
</code></pre>
<div><span>1</span><br></div></div><h3 id="查询空闲链接数-空闲链接数太多肯定有问题-可以使用下一条语句看那个ip使用的空闲链接数太多"> 查询空闲链接数-空闲链接数太多肯定有问题，可以使用下一条语句看那个ip使用的空闲链接数太多</h3>
<div><pre><code><span>select</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>from</span> pg_stat_activity <span>where</span> state<span>=</span><span>'idle'</span><span>;</span>
</code></pre>
<div><span>1</span><br></div></div><h3 id="查询当前使用的链接数-按照ip分组"> 查询当前使用的链接数-按照ip分组</h3>
<div><pre><code><span>select</span> <span>count</span><span>(</span><span>*</span><span>)</span> <span>,</span> a<span>.</span>client_addr <span>from</span>  pg_stat_activity a <span>group</span> <span>by</span> a<span>.</span>client_addr
</code></pre>
<div><span>1</span><br></div></div><h2 id="解决办法"> 解决办法</h2>
<h3 id="清除所有的空闲链接-治标"> - 清除所有的空闲链接-治标</h3>
<div><pre><code><span>SELECT</span> pg_terminate_backend<span>(</span>pid<span>)</span> <span>from</span> pg_stat_activity <span>where</span> state<span>=</span><span>'idle'</span><span>;</span>
</code></pre>
<div><span>1</span><br></div></div><h3 id="增大数据库的最大链接数-治标"> - 增大数据库的最大链接数-治标</h3>
<p>需要重启数据库</p>
<div><pre><code><span>alter</span> system <span>set</span> max_connections<span>=</span><span>1000</span><span>;</span>
</code></pre>
<div><span>1</span><br></div></div><h3 id="更改程序的最大链接数-治本"> - 更改程序的最大链接数-治本</h3>
<div><pre><code>- springboot+durid
  spring:
	datasource
  		druid:
  			maxActive: 10
			minIdle: 2
			minEvictableIdleTimeMillis: 600000
			maxEvictableIdleTimeMillis: 900000
- springboot+datasource
  spring:
  	datasource:
		tomcat:
  			maxActive: 10
			minIdle: 2
			minEvictableIdleTimeMillis: 600000
			maxEvictableIdleTimeMillis: 900000
</code></pre>
</div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="postgres"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-06-28T10:17:52.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">mysql-com.mysql.jdbc.exceptions.jdbc4.CommunicationsException</title>
    <id>/2018/12/19/mysql-com-mysql-jdbc-exceptions-jdbc4-communicationsexception/</id>
    <link href="https://fangweilong.github.io/2018/12/19/mysql-com-mysql-jdbc-exceptions-jdbc4-communicationsexception/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>1、现象：
连接mysql时报错</p>
<div><pre><code> com.mysql.jdbc.exceptions.jdbc4.CommunicationsException
</code></pre>
</div><p>这个在长时间连接但是又不操作的情况下会报这个错误，虽然可以改mysql的配置文件来达到目的，但是
我们是开发不是DBA，所以尽量还是通过程序来控制</p>
<p>2、解决
在连接串中添加下面一串配置</p>
<div><pre><code>&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;maxReconnects=10
</code></pre>
<div><span>1</span><br></div></div><p>3.释义
autoReconnect：自动重连
failOverReadOnly：自动重连成功后，连接是否设置为只读
maxReconnects：autoReconnect设置为true时，重试连接的次数</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="mysql"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-12-19T10:26:39.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">Noresultdefinedforaction,集群服务器出现的数据库连不上</title>
    <id>/2018/09/13/no-result-defined-for-action-%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%87%BA%E7%8E%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E4%B8%8D%E4%B8%8A/</id>
    <link href="https://fangweilong.github.io/2018/09/13/no-result-defined-for-action-%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%87%BA%E7%8E%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E4%B8%8D%E4%B8%8A/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>1.返回类型找不到
这种情况我没出现，但是我在翻阅资料中很多人都有出现，这里不详细介绍，请查阅他人的文章。</p>
<p>2.集群服务器
即一个oracle有多个ip连接(看oracle的配置文件)。在C#代码中使用一个ip可以连接，但是在java中使用thin方式连接就会报&quot;No result defined for action&quot;。
我们常规下oracle连接属性是这样配置的</p>
<div><pre><code>jdbc.url=jdbc:oracle:thin:@127.0.0.1:1521:oracle
jdbc.username=root
jdbc.password=123
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>但是在集群服务器中可就不行了。
解决办法:我们需要找到oracle目录中 tnsnames.ora 文件，复制其中的连接串并放到thin@后面
更改后的连接串</p>
<div><pre><code>jdbc.url=jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=yes)(ADDRESS=(PROTOCOL=TCP)(HOST=127.0.0.1)(PORT=1521))(ADDRESS=(PROTOCOL=TCP)(HOST=127.0.0.2)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME=oracle)))
jdbc.username=root
jdbc.password=123
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="oracle"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-09-13T14:38:10.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">oracle group by分类查询汇总 没数据的时候让此项显示为0</title>
    <id>/2019/07/24/oracle-group-by%E5%88%86%E7%B1%BB%E6%9F%A5%E8%AF%A2%E6%B1%87%E6%80%BB-%E6%B2%A1%E6%95%B0%E6%8D%AE%E7%9A%84%E6%97%B6%E5%80%99%E8%AE%A9%E6%AD%A4%E9%A1%B9%E6%98%BE%E7%A4%BA%E4%B8%BA0/</id>
    <link href="https://fangweilong.github.io/2019/07/24/oracle-group-by%E5%88%86%E7%B1%BB%E6%9F%A5%E8%AF%A2%E6%B1%87%E6%80%BB-%E6%B2%A1%E6%95%B0%E6%8D%AE%E7%9A%84%E6%97%B6%E5%80%99%E8%AE%A9%E6%AD%A4%E9%A1%B9%E6%98%BE%E7%A4%BA%E4%B8%BA0/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-表数据"> 1.表数据</h2>
<p>表名:table</p>
<table>
<thead>
<tr>
<th>id</th>
<th>date</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>2019-05</td>
</tr>
<tr>
<td>2</td>
<td>2019-06</td>
</tr>
<tr>
<td>3</td>
<td>2019-04</td>
</tr>
<tr>
<td>4</td>
<td>2019-06</td>
</tr>
</tbody>
</table>
<h2 id="_2-需求"> 2.需求</h2>
<p>现在要求按照指定五个月份统计每个月的数量，这五个月份为:
('2019-02','2019-03','2019-04','2019-05','2019-06')
查询出来的数据应该是这样的</p>
<table>
<thead>
<tr>
<th>date</th>
<th>num</th>
</tr>
</thead>
<tbody>
<tr>
<td>2019-02</td>
<td>0</td>
</tr>
<tr>
<td>2019-03</td>
<td>0</td>
</tr>
<tr>
<td>2019-04</td>
<td>1</td>
</tr>
<tr>
<td>2019-05</td>
<td>1</td>
</tr>
<tr>
<td>2019-06</td>
<td>2</td>
</tr>
</tbody>
</table>
<h2 id="_3-实现"> 3.实现</h2>
<p>3.1按照常规写法</p>
<div><pre><code>select date,count(*) as num from  table
where DATE in (&#39;2019-02&#39;,&#39;2019-03&#39;,&#39;2019-04&#39;,&#39;2019-05&#39;,&#39;2019-06&#39;)
group by dates
order by dates desc
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><p>然后发现出来的数据是这样的</p>
<table>
<thead>
<tr>
<th>date</th>
<th>num</th>
</tr>
</thead>
<tbody>
<tr>
<td>2019-04</td>
<td>1</td>
</tr>
<tr>
<td>2019-05</td>
<td>1</td>
</tr>
<tr>
<td>2019-06</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>3.2解决
我想到的解决思路是将这几个月份查成一张临时表做一个left join 这样月份就固定会显示在那，再使用nvl判断num为NULL的时候添加为0</p>
<div><pre><code>select A.date,nvl(num,0) 
from (
--固定写法，按照逗号分隔成一列
	SELECT DISTINCT REGEXP_SUBSTR (&#39;2019-02,2019-03,2019-04,2019-05,2019-06&#39;,&#39;[^,]+&#39;,1,LEVEL) as date
	FROM DUAL
	CONNECT BY REGEXP_SUBSTR (&#39;2019-02,2019-03,2019-04,2019-05,2019-06&#39;,&#39;[^,]+&#39;,1,LEVEL) IS NOT NULL
) A
LEFT JOIN 
(
--归类查询
	select count(*) as num,date from GREEN_ATTENDANCE
	where DATE in (&#39;2019-02&#39;,&#39;2019-03&#39;,&#39;2019-04&#39;,&#39;2019-05&#39;,&#39;2019-06&#39;)
	group by date
) B
on A.date=B.date
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><p>这样写会有点繁琐了，如有更好的办法请指教</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="oracle"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-07-24T10:20:18.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">oracle mybatis DATE无法存时分秒</title>
    <id>/2018/05/29/oracle-mybatis-date%E6%97%A0%E6%B3%95%E5%AD%98%E6%97%B6%E5%88%86%E7%A7%92/</id>
    <link href="https://fangweilong.github.io/2018/05/29/oracle-mybatis-date%E6%97%A0%E6%B3%95%E5%AD%98%E6%97%B6%E5%88%86%E7%A7%92/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<div><pre><code>&lt;sql id=&quot;sys_sms_id&quot;&gt;SYS_SMS_ID.NEXTVAL&lt;/sql&gt;
&lt;insert id=&quot;save&quot; parameterType=&quot;SmsDO&quot;&gt;
		insert into SYS_SMS
		(
			ID,
            PHONE,
            CODE,
            SENDDATE
		)
		values
		(
			&lt;include refid=&quot;sys_sms_id&quot;/&gt;,
			#{phone,jdbcType=VARCHAR},
			#{code,jdbcType=VARCHAR},
			#{sendDate,jdbcType=DATE}
		)
	&lt;/insert&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><p>在将时间存到oracle里面的时候发现怎么都无法将带时分秒的日期存进去，每次存只能存到年月日。
结果发现在mybatis里面设置传参的jdbcType=DATE的话就会出现问题。
所以改为</p>
<div><pre><code>&lt;sql id=&quot;sys_sms_id&quot;&gt;SYS_SMS_ID.NEXTVAL&lt;/sql&gt;
&lt;insert id=&quot;save&quot; parameterType=&quot;SmsDO&quot;&gt;
		insert into SYS_SMS
		(
			ID,
            PHONE,
            CODE,
            SENDDATE
		)
		values
		(
			&lt;include refid=&quot;sys_sms_id&quot;/&gt;,
			#{phone,jdbcType=VARCHAR},
			#{code,jdbcType=VARCHAR},
			#{sendDate}
		)
	&lt;/insert&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div><p><strong>2018-05-30更新</strong>
当使用的数据库为oracle时，时间类型全部使用TIMESTAMP,即</p>
<div><pre><code>```
</code></pre>
</div><p><sql id="sys_sms_id">SYS_SMS_ID.NEXTVAL</sql>
<insert id="save" parameterType="SmsDO">
insert into SYS_SMS
(
ID,
PHONE,
CODE,
SENDDATE
)
values
(
<include refid="sys_sms_id"/>,
#{phone,jdbcType=VARCHAR},
#{code,jdbcType=VARCHAR},
#{sendDate,jdbcType=TIMESTAMP}
)
</insert></p>
<div><pre><code>
DATE在oracle中只能存储年月日，TIMESTAMP可以存储到时分秒，所以在使用的时候全部换成TIMESTAMP</code></pre>
<div><span>1</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="oracle"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-05-29T16:36:44.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">oracle-full_join-多张表横向关联，拼接多张表所需字段</title>
    <id>/2019/07/12/oracle-full-join-%E5%A4%9A%E5%BC%A0%E8%A1%A8%E6%A8%AA%E5%90%91%E5%85%B3%E8%81%94-%E6%8B%BC%E6%8E%A5%E5%A4%9A%E5%BC%A0%E8%A1%A8%E6%89%80%E9%9C%80%E5%AD%97%E6%AE%B5/</id>
    <link href="https://fangweilong.github.io/2019/07/12/oracle-full-join-%E5%A4%9A%E5%BC%A0%E8%A1%A8%E6%A8%AA%E5%90%91%E5%85%B3%E8%81%94-%E6%8B%BC%E6%8E%A5%E5%A4%9A%E5%BC%A0%E8%A1%A8%E6%89%80%E9%9C%80%E5%AD%97%E6%AE%B5/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>我们在sql中使用最多的关联查询无非是left join.right join,union,union all。
这几种关联的区别和用法别的教程都太多了 这里不赘述.
这里讲一下full join的用法
1.需求
需要做一张统计表 要能实现多级表头
<img src="https://img-blog.csdnimg.cn/20190712165236680.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
但是这个数据又不是一张表中存在的，分为了乔木，灌木，行道树，古树 四张表
那么为了最简单有效办法就是考虑在sql中实现了</p>
<p>2.实现
直接上代码，有注意的地方会在sql中标出来</p>
<div><pre><code>select * from 					--最外层一个select，如果不需要rownum可以把*替换成你想要的字段或者使用mybatis中的resultType指定映射字段
	(select rownum rn,A.*    --这里需要 rownum 否则数据会是杂乱无章且重复的
		from (
			select catagoryA,count(catagory) amountA 
				from 表A group by catagory order by amount
		)A)B
	FULL JOIN                 --以full join 拼接
	(select rownum rn,C.* 
		from (
			select catagoryC,count(catagory) amountC 
				from 表C group by catagory order by amount
		)C)D
	ON B.rn=D.rn						--直接以rn相等就行了
	FULL JOIN
	(select rownum rn,E.* 
	from (
		select catagoryE,count(catagory) amountE
			from 表E group by catagory order by amount
	)E)F
	ON D.rn=F.rn or B.rn=F.rn   --注意 超过两张表的情况下on后面需要以（表数-2）个or拼接 
	
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div><p>注意：如果数据和表特别多，这种拼接写法会有很明显的性能问题</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="oracle"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-07-12T17:11:35.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">oracle用户被锁</title>
    <id>/2019/07/12/oracle%E7%94%A8%E6%88%B7%E8%A2%AB%E9%94%81/</id>
    <link href="https://fangweilong.github.io/2019/07/12/oracle%E7%94%A8%E6%88%B7%E8%A2%AB%E9%94%81/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>oracle的账户多次输入错误密码会被锁定(十次)，尤其是在新建立的时候动不动被锁
记录一下账户被锁的解锁步骤
请完整复制代码内容</p>
<h2 id="_1-打开cmd-输入"> 1.打开cmd,输入</h2>
<div><pre><code>sqlplus/noloog
</code></pre>
<div><span>1</span><br></div></div><p>应该会显示时间，这时候表明成功</p>
<h2 id="_2-以dba身份登录"> 2.以dba身份登录</h2>
<div><pre><code>conn / as sysdba
</code></pre>
<div><span>1</span><br></div></div><p>这样是不需要输入用户名密码就可以登录的</p>
<h2 id="_3-输入解锁语句"> 3.输入解锁语句</h2>
<div><pre><code>alter user system account unlock;
</code></pre>
<div><span>1</span><br></div></div><p>不输入 ; 会不执行 不知道为啥 有了解的烦请留言解答</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="oracle"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-07-12T10:05:54.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">oracle空间字段在java中能查询出来并返回给接口</title>
    <id>/2019/07/24/oracle%E7%A9%BA%E9%97%B4%E5%AD%97%E6%AE%B5%E5%9C%A8java%E4%B8%AD%E8%83%BD%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%9D%A5%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%BB%99%E6%8E%A5%E5%8F%A3/</id>
    <link href="https://fangweilong.github.io/2019/07/24/oracle%E7%A9%BA%E9%97%B4%E5%AD%97%E6%AE%B5%E5%9C%A8java%E4%B8%AD%E8%83%BD%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%9D%A5%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%BB%99%E6%8E%A5%E5%8F%A3/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>oracle虽然也支持空间信息，但是要做很多配置。比如安装sde等，不如pgsql等内置支持。
以下方法只在第三方支持都安装好的情况下适用</p>
<p>Entity:</p>
<div><pre><code>priavte String shape;
</code></pre>
<div><span>1</span><br></div></div><p>java里面直接用String类型接就可以了</p>
<p>XML</p>
<div><pre><code>select  sdo_util.to_gmlgeometry(shape) shape from table
</code></pre>
<div><span>1</span><br></div></div><p>这样会把shape转换为GML格式的数据传出来</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="oracle"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-07-24T09:24:18.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">nginx-代理项目内部跳转导致丢失端口</title>
    <id>/2019/11/29/nginx-%E4%BB%A3%E7%90%86%E9%A1%B9%E7%9B%AE%E5%86%85%E9%83%A8%E8%B7%B3%E8%BD%AC%E5%AF%BC%E8%87%B4%E4%B8%A2%E5%A4%B1%E7%AB%AF%E5%8F%A3/</id>
    <link href="https://fangweilong.github.io/2019/11/29/nginx-%E4%BB%A3%E7%90%86%E9%A1%B9%E7%9B%AE%E5%86%85%E9%83%A8%E8%B7%B3%E8%BD%AC%E5%AF%BC%E8%87%B4%E4%B8%A2%E5%A4%B1%E7%AB%AF%E5%8F%A3/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="外网访问的url"> 外网访问的url</h2>
<div><pre><code> xxxxx:8080/demo
</code></pre>
</div><h2 id="nginx代理"> nginx代理</h2>
<div><pre><code>server {
	   listen       8080;
	   server_name  localhost;
	  location /demo{
	       proxy_pass http://localhost:9090;
	   }
}
</code></pre>
</div><hr>
<h2 id="问题"> 问题</h2>
<p>如果你的项目里面有内部重定向到login，比如shiro，或者你自己 redirect 一个路径。你在浏览器上会发现你的路径此时变成了  	<em>xxxxx/demo/login</em> ，而不是我们想要的 <em>xxxxx:8080/demo/login</em>
百度搜索到的答案都是让你把nginx配置成这样</p>
<div><pre><code>server {
	    listen       8080;
	    server_name  localhost;
	    
		proxy_set_header X-Forwarded-Host $host;
		proxy_set_header X-Forwarded-Server $host;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header Host $host:$server_port;
		location /demo{
	       proxy_pass http://localhost:9090;
	   }
}
</code></pre>
</div><p>但是我在使用中发现这样并没有效果，也不知道这个配法从哪流传出来的。
实际上这个配置是对的 但是位置不对</p>
<p>配置文件应该是这样子的</p>
<div><pre><code>server {
	    listen       8080;
	    server_name  localhost;

		location /demo{
	       proxy_pass http://localhost:9090;
	       
		   proxy_set_header Referer $http_referer;
    	   proxy_set_header Host $host:9000;
	   }	
}
</code></pre>
</div><p>这样写 外网的端口被写死了 还没找出可以动态的配法 不过可以临时顶用</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="nginx"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-11-29T20:19:47.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">nginx-使用https加密ip</title>
    <id>/2021/07/23/nginx-%E4%BD%BF%E7%94%A8https%E5%8A%A0%E5%AF%86ip/</id>
    <link href="https://fangweilong.github.io/2021/07/23/nginx-%E4%BD%BF%E7%94%A8https%E5%8A%A0%E5%AF%86ip/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="openssl"> openssl</h2>
<h3 id="官网"> 官网</h3>
<div><pre><code>https://www.openssl.org/
</code></pre>
</div><h3 id="git自带"> git自带</h3>
<div><pre><code>我这里采用的是git bash中自带的openssl
</code></pre>
</div><h2 id="开始制作"> 开始制作</h2>
<h3 id="生成-key-私钥"> 生成 .key 私钥</h3>
<div><pre><code>openssl genrsa -out ssl.key 4096
</code></pre>
</div><h3 id="生成csr"> 生成csr</h3>
<div><pre><code>openssl req -new -key ssl.key -out ssl.csr
</code></pre>
</div><div><p>提示</p>
<p>需要输出 国家 省份 城市 项目名或个人用户名
如果没有非常严格的硬性要求，自己输入就好</p>
</div>
<h3 id="生成crt"> 生成crt</h3>
<div><pre><code>openssl x509 -req -days 365 -in ssl.csr -signkey ssl.key -out ssl.crt
</code></pre>
</div><div><p>提示</p>
<p>-days:设置过期天数，我这里是设置为了365天</p>
</div>
<h2 id="生成总览"> 生成总览</h2>
<table>
<thead>
<tr>
<th>文件名</th>
<th style="text-align:center">类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>ssl.key</td>
<td style="text-align:center">KEY文件</td>
</tr>
<tr>
<td>ssl.crt</td>
<td style="text-align:center">安全证书</td>
</tr>
<tr>
<td>ssl.csr</td>
<td style="text-align:center">CSR文件</td>
</tr>
</tbody>
</table>
<p>我们其实只需要里面的ssl.crt和ssl.key</p>
<h2 id="上传文件并设置"> 上传文件并设置</h2>
<div><pre><code>server <span>{</span>
    listen       <span>80</span> ssl<span>;</span>
    server_name  <span>$hostname</span><span>;</span>

    ssl_certificate /etc/nginx/ssl/ssl.crt<span>;</span>
    ssl_certificate_key /etc/nginx/ssl/ca.key<span>;</span>

    location / <span>{</span>
        root   /usr/share/nginx/html<span>;</span>
        index  index.html index.htm<span>;</span>
    <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div><h2 id="访问"> 访问</h2>
<p><a href="https://imgtu.com/i/WrOb8S" target="_blank" rel="noopener noreferrer"><img src="https://z3.ax1x.com/2021/07/23/WrOb8S.md.png" alt="WrOb8S.md.png" /></a>
虽然浏览器报了不安全，但是起码实现了https加密访问。</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="nginx"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-07-23T14:06:20.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">nginx-反代百度等外网地址</title>
    <id>/2021/07/19/nginx-%E5%8F%8D%E4%BB%A3%E7%99%BE%E5%BA%A6%E7%AD%89%E5%A4%96%E7%BD%91%E5%9C%B0%E5%9D%80/</id>
    <link href="https://fangweilong.github.io/2021/07/19/nginx-%E5%8F%8D%E4%BB%A3%E7%99%BE%E5%BA%A6%E7%AD%89%E5%A4%96%E7%BD%91%E5%9C%B0%E5%9D%80/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="需求"> 需求</h2>
<div><pre><code>由一台统一的外网服务器作中转，左右的外网接口请求都走这台服务器。
考虑下来使用nginx的反代。
</code></pre>
</div><h2 id="配置"> 配置</h2>
<div><pre><code>server <span>{</span>
    listen       <span>80</span><span>;</span>
    server_name  <span>$hostname</span><span>;</span>

    <span># 代理的外网端口 这块可加可不加，不是重点，重点在location中</span>
    proxy_set_header Host <span>$host</span>:15200<span>;</span>
    proxy_set_header X-Real-IP <span>$remote_addr</span><span>;</span>
    proxy_set_header REMOTE-HOST <span>$remote_addr</span><span>;</span>
    proxy_set_header X-NginX-Proxy <span>true</span><span>;</span>
    proxy_set_header X-Forwarded-For <span>$proxy_add_x_forwarded_for</span><span>;</span>

    <span>#转发到百度地址服务</span>
    location /baidumap/ <span>{</span>
        <span># 注意这行。如果需要代理其他地址也只需要改api.map.baidu.com就行了。</span>
        <span># 如果不加这行，默认会使用上面proxy_set_header Host $host:15200;的设置。所以我在下面再加一个proxy_set_header覆盖掉全聚德</span>
        proxy_set_header Host api.map.baidu.com<span>;</span>
        <span># 末尾加了 / 切掉 /baidumap/ ，在编写中要注意你自己的业务需不需要加 /</span>
        proxy_pass http://api.map.baidu.com/<span>;</span>
    <span>}</span>
<span>}</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="nginx"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-07-19T11:46:23.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">nginx-反向代理端口丢失</title>
    <id>/2020/03/17/nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%AB%AF%E5%8F%A3%E4%B8%A2%E5%A4%B1/</id>
    <link href="https://fangweilong.github.io/2020/03/17/nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%AB%AF%E5%8F%A3%E4%B8%A2%E5%A4%B1/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p><strong>此情况会出现在代理外网情况下 访问端口不是80、443，并且访问url末尾不带 / 的时候</strong></p>
<h3 id="举例"> 举例</h3>
<h5 id="xx-xx-xx-xx-9000-url-经过nginx转代-url会变成-xx-xx-xx-xx-url-而实际资源需求的url是这样的-xx-xx-xx-xx-9000-url"> <em>xx.xx.xx.xx:9000/url</em> 经过nginx转代 url会变成  	<em>xx.xx.xx.xx/url</em>，而实际资源需求的url是这样的 <em>xx.xx.xx.xx:9000/url/</em></h5>
<p>所以我们直接在nginx配置中更改</p>
<div><pre><code>server <span>{</span>
    listen       <span>80</span><span>;</span>
    server_name  localhost<span>;</span>
    client_max_body_size 100m<span>;</span>
    
    proxy_connect_timeout 300s<span>;</span>
	
	<span>#重点 start 这一点写location里面是一样的 但是提在外面就不用重复写了</span>
	<span>#如果内网nginx监听端口与外网访问的端口不一致 需要配置成这样</span>
	<span>#proxy_set_header Host $host:9000;</span>
    proxy_set_header Host <span>$host</span><span>:</span><span>$server_port</span><span>;</span>
    proxy_set_header X-Real-IP <span>$remote_addr</span><span>;</span>
    proxy_set_header REMOTE-HOST <span>$remote_addr</span><span>;</span>
    proxy_set_header X-Forwarded-For <span>$proxy_add_x_forwarded_for</span><span>;</span>
    <span>#重点 end</span>
	
	<span># 资源转发</span>
    location /url<span>{</span>
        proxy_pass http://192.168.1.1:11111<span>;</span>

    <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="nginx"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-03-17T11:25:00.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">nginx-基础配置：多个location转发任意请求或访问静态资源文件</title>
    <id>/2018/08/09/nginx-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE-%E5%A4%9A%E4%B8%AAlocation%E8%BD%AC%E5%8F%91%E4%BB%BB%E6%84%8F%E8%AF%B7%E6%B1%82%E6%88%96%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/</id>
    <link href="https://fangweilong.github.io/2018/08/09/nginx-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE-%E5%A4%9A%E4%B8%AAlocation%E8%BD%AC%E5%8F%91%E4%BB%BB%E6%84%8F%E8%AF%B7%E6%B1%82%E6%88%96%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>2018-08-10更新</p>
<div><pre><code>server {
		#监听的端口
        listen       80;
		#监听的域名
        server_name  localhost;

		#监听带后缀的url
		location ^~\.txt {
			#文件放到/html文件夹下
            root /;
        }
		#监听所有url，没有特殊需求就用这一个location就够了
		#使用通配符只有在没有匹配上其他location的情况下会进入
        location / {
			#去掉了只有url才转发的限制，因为直接访问域名会通不过if从而转发不了请求。
			
			proxy_pass http://localhost:8080;
        }
    }
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br></div></div><p>附带上匹配规则：<img src="https://img-blog.csdn.net/20180810164225142?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" />
里面的规则自己尝试一下就明白了</p>
<p>以下 为原文↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</p>
<div><pre><code>server {
		#监听的端口
        listen       80;
		#监听的域名
        server_name  localhost;

		#监听带后缀的url
		location ^~\.txt {
			#文件放到/html文件夹下
            root /;
        }
		#监听所有url，没有特殊需求就用这一个location就够了
        location / {
			#没有后缀的请求才会转发 是为了配合上一个location能访问到资源文件而不是转发所有请求。没有特殊需求就不要判断直接proxy_pass到请求
			if (!-e $request_filename){
				proxy_pass http://localhost:8080;
				break;
			}
        }
    }
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br></div></div><p>location可以添加多个，但是要注意相互之间不要冲突，否则转发多种会请求超时</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="nginx"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-08-09T10:07:48.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">nginx-转发规则案例详解</title>
    <id>/2019/01/11/nginx-%E8%BD%AC%E5%8F%91%E8%A7%84%E5%88%99%E6%A1%88%E4%BE%8B%E8%AF%A6%E8%A7%A3/</id>
    <link href="https://fangweilong.github.io/2019/01/11/nginx-%E8%BD%AC%E5%8F%91%E8%A7%84%E5%88%99%E6%A1%88%E4%BE%8B%E8%AF%A6%E8%A7%A3/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>本文以http协议举例，https的暂未列举
如有错误请指正</p>
<div><pre><code>
http {
	#文件扩展名与文件类型映射表
    include       mime.types;				
	#默认文件类型，默认为text/plain	
    default_type  application/octet-stream;										

	#是否启用服务日志   
	access_log on;
	#自定义格式	
    log_format myFormat &#39;$remote_addr–$remote_user [$time_local] &#39;
						&#39;$request $status $body_bytes_sent $http_referer &#39;
						&#39;$http_user_agent $http_x_forwarded_for&#39;;
	#日志存放地址  指定的格式
    access_log logs/access.log myFormat;

	#允许sendfile方式传输文件，默认为off，可以在http块，server块，location块。
    sendfile        on;															
    
	#每个进程每次调用传输数量不能大于设定的值，默认为0，即不设上限。
	sendfile_max_chunk 100k;  		
	#连接超时时间，默认为75s，可以在http，server，location块。	
    keepalive_timeout 65;  														
    #开启Gzip 加快访问速度
    #gzip  on;

    server {
		#监听的端口
        listen       80;
		#监听的域名
        server_name  localhost;

        #charset koi8-r;
		#可以在这边指定只属于当前server的日志
        #access_log  logs/host.access.log  main;
		
		#等号匹配 优先级最高
		location = /50x.html {								
            root   html;
        }
		
		#^~ 匹配 优先级第二，不支持正则表达式
		#匹配成功就不再匹配其他location，如果有多个location匹配的话，则使用表达式最长的那个
		location ^~\.txt {
            root /;#文件放到/html文件夹下
        }
		
		#正则匹配 优先级第三，地址不可以带/，可以使用 /x$1 拼接。
		#例：proxy_pass http://127.0.0.1/x$;  
		location ~ /abc(.*) {
            root /;#文件放到/html文件夹下
        }
		
		#常规匹配1 如果有多个location匹配的话，则使用表达式最长的那个
        location /test1 {
			proxy_pass http://localhost:8080;
        }
		
		#常规匹配2 如果proxy_pass最后带/，则表示剪切掉匹配到的项目名重新拼接。如果有携带session等需要另外配置，此项会造成session丢失
		#例:http://localhost/test2/1经过转发后变为http://localhost/1
		location /test2 {
			proxy_pass http://localhost:8080/;
        }
		
        #错误页
        error_page   500 502 503 504  /50x.html;							
    }
}
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="nginx"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-01-11T13:24:09.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">nginx-部署多个vue项目，分vue-cli2.x和3.x</title>
    <id>/2019/07/16/nginx-%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AAvue%E9%A1%B9%E7%9B%AE-%E5%88%86vue-cli2-x%E5%92%8C3-x/</id>
    <link href="https://fangweilong.github.io/2019/07/16/nginx-%E9%83%A8%E7%BD%B2%E5%A4%9A%E4%B8%AAvue%E9%A1%B9%E7%9B%AE-%E5%88%86vue-cli2-x%E5%92%8C3-x/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-vue-cli3-x"> 1.vue-cli3.x</h2>
<p><img src="https://img-blog.csdnimg.cn/2019071613392824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
在根目录下找到&quot;vue.config.js&quot;
<img src="https://img-blog.csdnimg.cn/20190716134038552.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
更改<code>publicPath: '/portal/'</code> 的 portal 为你自己的项目名，记得前后的&quot;/&quot;</p>
<h2 id="_2-vue-cli2-x"> 2.vue-cli2.x</h2>
<p>找到config/index.js文件
<img src="https://img-blog.csdnimg.cn/2019071616150043.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
找到&quot;build&quot;部分
<img src="https://img-blog.csdnimg.cn/20190716161557630.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
同样的更改<code>assetsPublicPath: '/gardan/',</code>为你自己的项目名， 别忘了前后的&quot;/&quot;</p>
<p>3.nginx的配置
在nginx的html下新建两个文件夹，一个gardan，一个portal</p>
<p>打开config/nginx.conf文件夹，按照下面的配置项更改，我做了部分删减，只留下了实际更改的部分</p>
<div><pre><code>server {
        listen       8080;
        server_name  localhost;

        location /gardan {#项目1
			try_files $uri $uri/ /gardan/index.html;#指定到目录下的index.jtml
		}
		
		location /portal {//项目2
			try_files $uri $uri/ /portal/index.html;#指定到目录下的index.jtml
		}
    }
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="nginx"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-07-16T16:23:23.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">vue-router_link-声明式返回上一页</title>
    <id>/2019/08/06/vue-router-link-%E5%A3%B0%E6%98%8E%E5%BC%8F%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E9%A1%B5/</id>
    <link href="https://fangweilong.github.io/2019/08/06/vue-router-link-%E5%A3%B0%E6%98%8E%E5%BC%8F%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E9%A1%B5/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>因为只有一个点击的操作，没有任何其他的逻辑操作，我就不想写一个方法来承载它，就一直在找声明式的写法</p>
<p>官网文档链接：https://router.vuejs.org/zh/guide/essentials/navigation.html</p>
<p>在文档中介绍了一种router.go(n)来返回上一页，但是没有示例，经过测试无法使用这种写法</p>
<div><pre><code>&lt;router-link :to=&quot;router.go(1)&quot;&gt;
	&lt;el-button&gt;返回&lt;/el-button&gt;
&lt;/router-link&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>搜索一些博客，都是使用的编程式的方法来返回上一页。
所以就经过简化后，将方法绑定在@click中</p>
<div><pre><code>&lt;router-link to&gt;
	&lt;el-button @click=&quot;$router.back(-1)&quot;&gt;返回&lt;/el-button&gt;
&lt;/router-link&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br></div></div><p>注意：router-link中的<strong>to要留空</strong>，否则@click方法不起作用</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="vue"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-08-06T15:34:28.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">Elastic_Search-添加split自定义分词方法</title>
    <id>/2020/08/12/elastic-search-%E6%B7%BB%E5%8A%A0split%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E8%AF%8D%E6%96%B9%E6%B3%95/</id>
    <link href="https://fangweilong.github.io/2020/08/12/elastic-search-%E6%B7%BB%E5%8A%A0split%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E8%AF%8D%E6%96%B9%E6%B3%95/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="版本"> 版本</h1>
<div><pre><code>5.4.2
</code></pre>
</div><h1 id="准备"> 准备</h1>
<div><pre><code>需要删除索引，否则会报已存在的错误
</code></pre>
</div><h1 id="正文"> 正文</h1>
<ul>
<li>以 <strong>;</strong> 分割，如果需要其他符号的自己修改 <strong>pattern</strong> 后面的内容</li>
<li>fielddata是为了aggs，不需要的可以不要</li>
</ul>
<div><pre><code>PUT 索引名
<span>{</span>
  <span>"settings"</span><span>:</span> <span>{</span>
    <span>"analysis"</span><span>:</span> <span>{</span>
      <span>"analyzer"</span><span>:</span> <span>{</span>
        <span>"自定义的分词器名"</span><span>:</span> <span>{</span>
          <span>"type"</span><span>:</span> <span>"pattern"</span>,
          <span>"pattern"</span><span>:</span><span>"自定义的分词字符，相当于 split(';')中的 ; "</span>
        <span>}</span>
      <span>}</span>
    <span>}</span>
  <span>}</span>,
  <span>"mappings"</span><span>:</span> <span>{</span>
    <span>"doc"</span><span>:</span> <span>{</span>
      <span>"properties"</span><span>:</span> <span>{</span>
         <span>"字段名"</span><span>:</span> <span>{</span>
          <span>"type"</span><span>:</span> <span>"text"</span>,
          <span>"analyzer"</span><span>:</span> <span>"上面定义的分词器名"</span>,
          <span>"search_analyzer"</span><span>:</span> <span>"上面定义的分词器名"</span>,
          <span>"fielddata"</span><span>:</span> <span>true</span>
        <span>}</span>
       <span>}</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="Elastic Search"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-08-12T15:32:07.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">Elastic_Search-通过reindex实现集群数据迁移</title>
    <id>/2021/03/18/elastic-search-%E9%80%9A%E8%BF%87reindex%E5%AE%9E%E7%8E%B0%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/</id>
    <link href="https://fangweilong.github.io/2021/03/18/elastic-search-%E9%80%9A%E8%BF%87reindex%E5%AE%9E%E7%8E%B0%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="以下方案仅适用于不同环境的集群数据迁移-如果是同一个集群内直接使用第三步-拉取数据-即可-不需要账号密码等参数"> 以下方案仅适用于不同环境的集群数据迁移，如果是同一个集群内直接使用第三步“拉取数据”即可，不需要账号密码等参数</h2>
<h2 id="版本"> 版本</h2>
<p>老集群ES 5.4
新集群ES 7.9</p>
<h2 id="背景"> 背景</h2>
<p>客户的ES集群做了升级，公司服务器上搭建的ES集群也做了相应升级。现在要把ES5的数据迁移到7.9上。</p>
<h2 id="说明"> 说明</h2>
<p>本文使用的reindex做迁移功能。如果数据量巨大的情况下可以考虑使用dump。reindex适合单索引几万十几万的情况下使用。</p>
<hr>
<h2 id="步骤"> 步骤</h2>
<ol>
<li>
<p>添加白名单</p>
<p>在新集群的 elasticsearch.yml 中添加</p>
<div><pre><code>reindex<span>.</span>remote<span>.</span>whitelist<span>:</span> 旧集群ip<span>:</span>端口
</code></pre>
<div><span>1</span><br></div></div><p>重启新集群</p>
</li>
<li>
<p>更改参数</p>
<div><pre><code>PUT _settings?pretty
<span>{</span>
  <span>"index.refresh_interval"</span><span>:</span> -1,
  <span>"index.number_of_replicas"</span><span>:</span> <span>0</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div></li>
<li>
<p>拉取数据</p>
<div><pre><code>POST _reindex
<span>{</span>
  <span>"source"</span><span>:</span> <span>{</span>
    <span>"remote"</span><span>:</span> <span>{</span>
      <span>"host"</span><span>:</span> <span>"旧集群ip:端口"</span>,
      <span>"username"</span><span>:</span> <span>"用户名"</span>,
      <span>"password"</span><span>:</span> <span>"密码"</span>
    <span>}</span>,
    <span>"index"</span><span>:</span> <span>"索引名"</span>
  <span>}</span>,
  <span>"dest"</span><span>:</span> <span>{</span>
    <span>"index"</span><span>:</span> <span>"新的索引名，注意不要重复"</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br></div></div></li>
<li>
<p>如果数据量比较大 也可以设置后台运行</p>
<div><pre><code>POST _reindex?wait_for_completion<span>=</span>false
</code></pre>
<div><span>1</span><br></div></div><p>这时候会返回task_id
我们可以使用这个id查看状态</p>
<div><pre><code>GET _tasks/task_id
</code></pre>
<div><span>1</span><br></div></div></li>
<li>
<p>恢复设置</p>
<div><pre><code>PUT _settings?pretty
<span>{</span>
  <span>"index.refresh_interval"</span><span>:</span> <span>"30s"</span>,
  <span>"index.number_of_replicas"</span><span>:</span> <span>1</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>删掉elasticsearch.yml中的	reindex.remote.whitelist并重启服务</p>
</li>
</ol>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="Elastic Search"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-03-18T14:58:00.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">Elastic_search-字段指定自带分词器</title>
    <id>/2020/08/12/elastic-search-%E5%AD%97%E6%AE%B5%E6%8C%87%E5%AE%9A%E8%87%AA%E5%B8%A6%E5%88%86%E8%AF%8D%E5%99%A8/</id>
    <link href="https://fangweilong.github.io/2020/08/12/elastic-search-%E5%AD%97%E6%AE%B5%E6%8C%87%E5%AE%9A%E8%87%AA%E5%B8%A6%E5%88%86%E8%AF%8D%E5%99%A8/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="版本"> 版本</h1>
<h2 id="es"> ES</h2>
<div><pre><code>5.4.2
</code></pre>
</div><h2 id="自带的几种分词器"> 自带的几种分词器</h2>
<table>
<thead>
<tr>
<th>分词器</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>standard</td>
<td>标准标记器，标准过滤器，小写过滤器，停止过滤器</td>
</tr>
<tr>
<td>simple</td>
<td>小写的分词器</td>
</tr>
<tr>
<td>stop</td>
<td>小写标记器，停止过滤器</td>
</tr>
<tr>
<td>keyword</td>
<td>不分词，内容整体作为一个值</td>
</tr>
<tr>
<td>whitespace</td>
<td>以空格分词</td>
</tr>
<tr>
<td>language</td>
<td>以语言分词</td>
</tr>
<tr>
<td>snowball</td>
<td>标准标记器，标准过滤器，小写过滤器，停止过滤器，雪球过滤器</td>
</tr>
<tr>
<td>custom</td>
<td>自定义分词。至少需要指定一个 Tokenizer, 零个或多个Token Filter, 零个或多个Char Filter</td>
</tr>
<tr>
<td>pattern</td>
<td>正则分词</td>
</tr>
</tbody>
</table>
<h2 id="准备"> 准备</h2>
<ul>
<li>删除之前的索引，否则会报已存在错误</li>
</ul>
<h2 id="正文"> 正文</h2>
<ul>
<li>fielddata是为了能使用aggs，不需要的可以不加</li>
</ul>
<div><pre><code>PUT index名
<span>{</span>
  <span>"mappings"</span>:<span>{</span>
    <span>"doc"</span>:<span>{</span>
      <span>"properties"</span>:<span>{</span>
        <span>"字段名"</span><span>:</span> <span>{</span>
            <span>"type"</span><span>:</span> <span>"指定字段类型，如text"</span>,
            <span>"analyzer"</span><span>:</span> <span>"指定分词器，如whitespace"</span>,
            <span>"fielddata"</span><span>:</span> <span>true</span>
        <span>}</span>,
         <span>"其他字段名"</span><span>:</span> <span>{</span>
           <span>"type"</span><span>:</span> <span>"keyword"</span>
         <span>}</span>
      <span>}</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="Elastic Search"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-08-12T15:32:07.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">Elastic_search-报错汇总</title>
    <id>/2021/07/12/elastic-search-%E6%8A%A5%E9%94%99%E6%B1%87%E6%80%BB/</id>
    <link href="https://fangweilong.github.io/2021/07/12/elastic-search-%E6%8A%A5%E9%94%99%E6%B1%87%E6%80%BB/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="字段聚合"> 字段聚合</h2>
<div><p>注意</p>
<p>Text fields are not optimised for operations that require per-document field data like aggregations and sorting, so these operations are disabled by default. Please use a keyword field instead. Alternatively, set fielddata=true on [] in order to load field data by uninverting the inverted index. Note that this can use significant memory.</p>
</div>
<h3 id="解决办法"> 解决办法</h3>
<p>添加fileddata。但是不推荐，占用内存太大。</p>
<div><pre><code>POST 索引名/_mapping
    <span>{</span>
    <span>"properties"</span><span>:</span> <span>{</span>
        <span>"字段名"</span><span>:</span> <span>{</span>
            <span>"type"</span><span>:</span> <span>"text"</span>,
            <span>"fielddata"</span>:true
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="Elastic Search"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-07-12T15:53:26.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">window的linux子系统-wsl</title>
    <id>/2019/09/04/window%E7%9A%84linux%E5%AD%90%E7%B3%BB%E7%BB%9F-wsl/</id>
    <link href="https://fangweilong.github.io/2019/09/04/window%E7%9A%84linux%E5%AD%90%E7%B3%BB%E7%BB%9F-wsl/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="如何开启安装linux子系统请自行百度-这里只记录一些详细的操作点-给自己一个留档"> 如何开启安装linux子系统请自行百度，这里只记录一些详细的操作点，给自己一个留档</h2>
<p>1.安装目录</p>
<div><pre><code>C:\Users\{用户名}\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs
</code></pre>
<div><span>1</span><br></div></div><p><img src="https://img-blog.csdnimg.cn/20190904175954589.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p>2.访问磁盘目录</p>
<div><pre><code>cd /mnt
</code></pre>
<div><span>1</span><br></div></div><p>这样就能进入本地磁盘了，通过ls -h就能看到C盘的目录（不知道为什么是绿色，应该可以看出来）</p>
<p><img src="https://img-blog.csdnimg.cn/20190904180106536.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
附上几个ls的命令</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>显示指定目录下所有子目录与文件，包括隐藏文件</td>
</tr>
<tr>
<td>-l</td>
<td>以列表方式显示文件的详细信息</td>
</tr>
<tr>
<td>-h</td>
<td>配合 -l 以人性化的方式显示文件大小</td>
</tr>
</tbody>
</table>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="wsl"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-09-04T18:05:22.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">kibana-查询ES 的一些语法</title>
    <id>/2020/08/06/kibana-%E6%9F%A5%E8%AF%A2es-%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AF%AD%E6%B3%95/</id>
    <link href="https://fangweilong.github.io/2020/08/06/kibana-%E6%9F%A5%E8%AF%A2es-%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AF%AD%E6%B3%95/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="前言"> 前言</h1>
<h2 id="不断增补ing"> 不断增补ing</h2>
<h2 id="版本7-8-0"> 版本	7.8.0</h2>
<h2 id="替换的关键字使用中文说明-根据需求自行替换"> 替换的关键字使用中文说明，根据需求自行替换</h2>
<hr>
<h1 id="正文"> 正文</h1>
<h2 id="基础知识"> 基础知识</h2>
<h3 id="命令"> 命令</h3>
<p>-7.x中的type已经过时，默认设置为_doc</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>url</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>put</td>
<td>/索引名称/类型名称/文档ID</td>
<td>创建文档（指定文档ID）</td>
</tr>
<tr>
<td>POST</td>
<td>/索引名称/索引类型</td>
<td>创建文档（随机文档ID）</td>
</tr>
<tr>
<td>POST</td>
<td>/索引名称/类型名称/文档id/_update</td>
<td>修改文档</td>
</tr>
<tr>
<td>POST</td>
<td>/索引名称/类型名称/_search</td>
<td>查询数据</td>
</tr>
<tr>
<td>DELETE</td>
<td>/索引名称/类型名称/文档id</td>
<td>删除文档/或者索引</td>
</tr>
<tr>
<td>GET</td>
<td>/索引名称/类型名称/文档id</td>
<td>查询文档通过文档ID</td>
</tr>
</tbody>
</table>
<h3 id="字段类型"> 字段类型</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>对应类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>字符串</td>
<td>text keyword</td>
<td>text自动分词，keyword全文匹配</td>
</tr>
<tr>
<td>整型</td>
<td>byte short integer long</td>
<td></td>
</tr>
<tr>
<td>浮点型</td>
<td>float double half_float scaled_float</td>
<td></td>
</tr>
<tr>
<td>日期</td>
<td>date</td>
<td></td>
</tr>
<tr>
<td>布尔</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>二进制</td>
<td>binary</td>
<td></td>
</tr>
<tr>
<td>范围</td>
<td>range</td>
<td></td>
</tr>
<tr>
<td>数组</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>对象</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>嵌套</td>
<td>nested</td>
<td></td>
</tr>
<tr>
<td>ip</td>
<td>ip (IPv4 和 IPv6 地址)</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="创建"> 创建</h2>
<div><pre><code>PUT 索引名
</code></pre>
<div><span>1</span><br></div></div><h2 id="创建携带mappings和settings的索引"> 创建携带mappings和settings的索引</h2>
<div><pre><code>PUT 索引名
<span>{</span>
 <span>"settings"</span><span>:</span> <span>{</span>
    <span>"analysis"</span><span>:</span> <span>{</span>
      <span>"analyzer"</span><span>:</span> <span>{</span>
        <span>"default"</span><span>:</span> <span>{</span>
          <span># 我使用了ik分词，也可以使用其他分词器</span>
          <span>"type"</span><span>:</span> <span>"ik_max_word"</span>
        <span>}</span>,
        <span># 自定义分词器</span>
        <span>"splitByComma"</span><span>:</span> <span>{</span>
          <span>"type"</span><span>:</span> <span>"pattern"</span>,
          <span># 分词规则</span>
          <span>"pattern"</span><span>:</span> <span>","</span>
        <span>}</span>
      <span>}</span>
    <span>}</span>
  <span>}</span>,
  <span>"mappings"</span><span>:</span> <span>{</span>
    <span>"properties"</span>:<span>{</span>
      <span>"字段名"</span>:<span>{</span>
        <span># 也可以设置为keyword</span>
        <span>"type"</span><span>:</span><span>"text"</span>,
        <span># 如果只需要一种，就不需要添加下面的</span>
        <span>"fields"</span>:<span>{</span>
          <span>"type"</span><span>:</span><span>"keyword"</span>
        <span>}</span>,
        <span># 如果并不需要另外分词器，则不加这句。会使用setting中的默认分词器。</span>
        <span>"analyzer"</span><span>:</span> <span>"splitByComma"</span>
      <span>}</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br></div></div><h2 id="测试分词器"> 测试分词器</h2>
<div><pre><code>GET 索引名/_analyze
<span>{</span>
  <span># 填要使用的索引名称</span>
  <span>"analyzer"</span><span>:</span><span>"ik_max_word"</span>,
  <span># 输入要分词的文本</span>
  <span>"text"</span><span>:</span> <span>"文本"</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br></div></div><h2 id="添加数据"> 添加数据</h2>
<div><pre><code>POST 索引名/_doc
<span>{</span>
  你要添加的内容
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><h2 id="删除索引"> 删除索引</h2>
<div><pre><code>DELETE 索引名
</code></pre>
<div><span>1</span><br></div></div><h2 id="查全部-match-all"> 查全部 match_all</h2>
<div><pre><code>GET 索引名/_search?pretty
<span>{</span>
  <span>"query"</span><span>:</span> <span>{</span>
    <span>"match_all"</span><span>:</span> <span>{</span><span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br></div></div><h2 id="单条件模糊查询-match"> 单条件模糊查询 match</h2>
<div><pre><code>GET 索引名/_search?pretty
<span>{</span>
  <span>"query"</span><span>:</span> <span>{</span>
    <span>"match"</span><span>:</span> <span>{</span>
      <span>"字段"</span><span>:</span> <span>"条件内容"</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h3 id="精确查询-term"> 精确查询 term</h3>
<div><pre><code>GET 索引名/_search?pretty
<span>{</span>
  <span>"query"</span><span>:</span> <span>{</span>
    <span>"term"</span><span>:</span> <span>{</span>
      <span>"字段"</span><span>:</span> <span>"条件内容"</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br></div></div><h2 id="单条件模糊查询-match-2"> 单条件模糊查询 match</h2>
<ul>
<li>指定查询条数，类似于sql的分页 from size</li>
</ul>
<div><pre><code>GET 索引名/_search?pretty
<span>{</span>
  <span>"from"</span><span>:</span> <span>0</span>,
  <span>"size"</span><span>:</span> <span>2</span>,
  <span>"query"</span><span>:</span> <span>{</span>
    <span>"match"</span><span>:</span> <span>{</span>
      <span>"字段"</span><span>:</span> <span>"条件内容"</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div><h2 id="单条件模糊查询-match-3"> 单条件模糊查询 match</h2>
<ul>
<li>限制返回的字段 _source</li>
</ul>
<div><pre><code>GET 索引名/_search?pretty
<span>{</span>
  <span>"from"</span><span>:</span> <span>0</span>,
  <span>"size"</span><span>:</span> <span>2</span>,
  <span>"_source"</span><span>:</span> <span>[</span><span>"字段"</span><span>]</span>,
  <span>"query"</span><span>:</span> <span>{</span>
    <span>"match"</span><span>:</span> <span>{</span>
      <span>"字段"</span><span>:</span> <span>"条件内容"</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h2 id="多条件模糊查询-multi-match"> 多条件模糊查询 multi_match</h2>
<div><pre><code>GET 索引名/_search?pretty
<span>{</span>
  <span>"from"</span><span>:</span> <span>0</span>,
  <span>"size"</span><span>:</span> <span>2</span>,
  <span>"query"</span><span>:</span> <span>{</span>
     <span>"multi_match"</span><span>:</span> <span>{</span>
      <span>"fields"</span>:<span>[</span><span>"字段1"</span>,<span>"字段2"</span><span>]</span>,
      <span>"query"</span><span>:</span> <span>"条件内容"</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></div></div><h2 id="filter过滤"> filter过滤</h2>
<ul>
<li>gte 大于等于</li>
<li>lte 小于等于</li>
<li>e 等于</li>
<li>bool
<ul>
<li>must 必须</li>
<li>should 或者</li>
<li>must_not 不等于</li>
</ul>
</li>
</ul>
<div><pre><code>GET 索引名/_search?pretty
<span>{</span>
  <span>"query"</span><span>:</span> <span>{</span>
    <span>"bool"</span><span>:</span> <span>{</span>
      <span>"filter"</span><span>:</span> <span>{</span>
        <span>"range"</span><span>:</span> <span>{</span>
          <span>"过滤的字段"</span><span>:</span> <span>{</span>
            <span>"gte"</span><span>:</span> <span>10</span>,
            <span>"lte"</span><span>:</span> <span>200</span>
          <span>}</span>
        <span>}</span>
      <span>}</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h2 id="聚合查询-aggs"> 聚合查询 aggs</h2>
<div><pre><code>GET 索引名/_search?pretty
<span>{</span>
  <span>"size"</span><span>:</span> <span>0</span>,
  <span>"query"</span><span>:</span> <span>{</span>
   <span>"match_all"</span><span>:</span> <span>{</span>
   <span>}</span>
  <span>}</span>,
  <span>"aggs"</span><span>:</span> <span>{</span>
    <span>"聚合后返回的关键字"</span><span>:</span> <span>{</span>
      <span>"terms"</span><span>:</span> <span>{</span>
        <span>"field"</span><span>:</span> <span>"聚合字段.keyword"</span>
      <span>}</span>
    <span>}</span>
  <span>}</span>
<span>}</span>
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div><h2 id="查询所有命中文档数"> 查询所有命中文档数</h2>
<p>7.x默认只会命中10000条，如果需要跟数据库一样查询count(*)</p>
<div><pre><code>GET qh_journal/_search
<span>{</span>
  <span>"query"</span><span>:</span>
  <span>{</span>
    <span>"match_all"</span><span>:</span>
    <span>{</span>

    <span>}</span>
  <span>}</span>,
  <span>"track_total_hits"</span>:true
<span>}</span>


</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="Elastic Search"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-08-06T11:29:49.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">wsl-debian10使用问题汇总</title>
    <id>/2021/06/18/wsl-debian10%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</id>
    <link href="https://fangweilong.github.io/2021/06/18/wsl-debian10%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="切换root"> 切换root</h2>
<div><pre><code><span>sudo</span> <span>su</span> root
</code></pre>
<div><span>1</span><br></div></div><hr>
<h2 id="访问window目录"> 访问window目录</h2>
<div><pre><code><span>cd</span> /mnt
</code></pre>
<div><span>1</span><br></div></div><hr>
<h2 id="could-not-open-lock-file-var-lib-apt-lists-lock-open-13-permission-denied"> Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)</h2>
<p>使用root用户更新</p>
<hr>
<h2 id="编辑文件如sources-list没有权限"> 编辑文件如sources.list没有权限</h2>
<p>切换root用户</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="wsl"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-06-18T10:25:01.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">myEclipse项目报错叉，但能正常运行</title>
    <id>/2018/02/26/myeclipse%E9%A1%B9%E7%9B%AE%E6%8A%A5%E9%94%99%E5%8F%89-%E4%BD%86%E8%83%BD%E6%AD%A3%E5%B8%B8%E8%BF%90%E8%A1%8C/</id>
    <link href="https://fangweilong.github.io/2018/02/26/myeclipse%E9%A1%B9%E7%9B%AE%E6%8A%A5%E9%94%99%E5%8F%89-%E4%BD%86%E8%83%BD%E6%AD%A3%E5%B8%B8%E8%BF%90%E8%A1%8C/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>这种情况往往出现在别的项目更换了JDK版本，在当前项目上JDK版本也被更改了。虽然不会对项目造成什么影响，但是看着别扭啊。下面就分享下去除项目红叉的过程，我使用的MyEclipse版本为MyEclipse10。</p>
<ul>
<li>
<p>在项目文件的右上角找到小三角，点击选中 &quot;Filters&quot; 选项
<img src="http://img.blog.csdn.net/20180226143718167?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></p>
</li>
<li>
<p>如图所示</p>
<p><img src="http://img.blog.csdn.net/20180226143926384?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></p>
</li>
</ul>
<ol start="3">
<li></li>
</ol>
<div><pre><code>	 - 在文件管理器搜  org.eclipse.wst.common.project.facet.core.xml 文件
	 - 右键项目—properties—搜索 Project Facets
</code></pre>
</div><p><img src="http://img.blog.csdn.net/20180226144028983?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></p>
<div><pre><code>	 - 查看框起来的部分，将版本改为与xml文件中JDK一致的版本就OK了。
</code></pre>
</div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="myEclipse"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-02-26T14:44:28.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">idea关闭不必要的插件减少内存占用</title>
    <id>/2018/04/25/idea%E5%85%B3%E9%97%AD%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E6%8F%92%E4%BB%B6%E5%87%8F%E5%B0%91%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8/</id>
    <link href="https://fangweilong.github.io/2018/04/25/idea%E5%85%B3%E9%97%AD%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E6%8F%92%E4%BB%B6%E5%87%8F%E5%B0%91%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="_2021-08-11更新"> 2021-08-11更新</h1>
<h2 id="idea版本-2021-2"> idea版本：2021.2</h2>
<h2 id="项目"> 项目</h2>
<p>spring + springboot + springcloud + mybatis + mybatis-plus + maven + python 如果跟我差不多的可以参照我的修改</p>
<h2 id="长图-不清晰的可以保存后查看"> 长图，不清晰的可以保存后查看</h2>
<p><a href="https://imgtu.com/i/fUCSIJ" target="_blank" rel="noopener noreferrer"><img src="https://z3.ax1x.com/2021/08/11/fUCSIJ.png" alt="fUCSIJ.png" /></a>
<a href="https://imgtu.com/i/fUCaJs" target="_blank" rel="noopener noreferrer"><img src="https://z3.ax1x.com/2021/08/11/fUCaJs.png" alt="fUCaJs.png" /></a></p>
<hr>
<h1 id="_2020-06009-更新"> 2020 06009 更新</h1>
<h2 id="idea版本-2020-1-2"> idea版本：2020.1.2</h2>
<h2 id="项目-spring-springboot-springcloud-mybatis-mybatis-plus-maven-如果跟我差不多的可以参照我的修改"> 项目：spring+springboot+springcloud+mybatis+mybatis-plus+maven 如果跟我差不多的可以参照我的修改</h2>
<h3 id="自己安装的"> 自己安装的</h3>
<p><img src="https://img-blog.csdnimg.cn/20200609201450788.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<h3 id="自带的"> 自带的</h3>
<p><img src="https://img-blog.csdnimg.cn/20200609201803928.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20200609201818689.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20200609201831154.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/2020060920184444.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20200609201854542.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20200609201906212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20200609201917237.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/2020060920193034.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20200609201946297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20200609201955935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20200609202003719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<hr>
<hr>
<hr>
<p>2019-07-24更新
1.安装的插件
<img src="https://img-blog.csdnimg.cn/2019072410395536.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
2.自带的插件
里面有个ide setting sync插件需要配合 toolbox软件才能实现同步功能
<img src="https://img-blog.csdnimg.cn/20190724104159344.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104222228.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104241463.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104537125.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104551134.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104601948.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104617654.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104629275.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104645653.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104716294.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104726151.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/20190724104734885.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p>2019-05-28更新
Groovy一定得留着，否则快捷生成get/set/tostring等方法会无法使用</p>
<p>原文========================================================================
idea在java开发中是很好用，但是内存占用太高，里面有很多的插件是用不到的，所以现在我经过一个个使用测试，只留下了这部分插件。
<img src="https://img-blog.csdn.net/20180425094331834?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /><img src="https://img-blog.csdn.net/20180425094339290?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /><img src="https://img-blog.csdn.net/20180425094345784?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="idea"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-04-25T09:44:26.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">idea启动java avax.management.InstanceNotFoundExceptionorg.springframework.boot_type=Admin,name=SpringApplicati</title>
    <id>/2019/10/30/idea%E5%90%AF%E5%8A%A8java-avax-management-instancenotfoundexception-org-springframework-boot-type-admin-name-springapplicati/</id>
    <link href="https://fangweilong.github.io/2019/10/30/idea%E5%90%AF%E5%8A%A8java-avax-management-instancenotfoundexception-org-springframework-boot-type-admin-name-springapplicati/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/20191030100813384.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
<p>把这两个勾选去掉</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="idea"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-10-30T10:08:59.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">idea启动java-错误_ 找不到或无法加载主类xxx.xxx的解决方案</title>
    <id>/2019/12/19/idea%E5%90%AF%E5%8A%A8java-%E9%94%99%E8%AF%AF-%E6%89%BE%E4%B8%8D%E5%88%B0%E6%88%96%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%E4%B8%BB%E7%B1%BBxxx-xxx%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</id>
    <link href="https://fangweilong.github.io/2019/12/19/idea%E5%90%AF%E5%8A%A8java-%E9%94%99%E8%AF%AF-%E6%89%BE%E4%B8%8D%E5%88%B0%E6%88%96%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%E4%B8%BB%E7%B1%BBxxx-xxx%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>原因未知
通过idea的maven插件，install即可
<img src="https://img-blog.csdnimg.cn/20191219135916540.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
如果是eclipse等，自行使用maven命令行安装</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="idea"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-12-19T14:00:37.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">idea更改缩进线颜色</title>
    <id>/2018/02/24/idea%E6%9B%B4%E6%94%B9%E7%BC%A9%E8%BF%9B%E7%BA%BF%E9%A2%9C%E8%89%B2/</id>
    <link href="https://fangweilong.github.io/2018/02/24/idea%E6%9B%B4%E6%94%B9%E7%BC%A9%E8%BF%9B%E7%BA%BF%E9%A2%9C%E8%89%B2/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>idea不同的版本会更改一些功能设置的位置，之前将背景色改为了豆沙绿后缩进线就看不到了，在写HTML页面的时候很不舒服，但是网上搜到的一些答案又不对(版本不一致)，花了点功夫找了一下，特此记录。我当前版本为idea 2017.3.4</p>
<div><pre><code>Settings -&gt; Editor -&gt; Color Scheme -&gt; General -&gt; Editor -&gt; Guides -&gt; Indent guide 
</code></pre>
<div><span>1</span><br></div></div><h2 id=""> <img src="http://img.blog.csdn.net/20180224172326891?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdHV0aWFuMjAwMA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></h2>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="idea"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-02-24T17:16:17.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">idea设置创建.java文件的模板</title>
    <id>/2018/04/20/idea%E8%AE%BE%E7%BD%AE%E5%88%9B%E5%BB%BA-java%E6%96%87%E4%BB%B6%E7%9A%84%E6%A8%A1%E6%9D%BF/</id>
    <link href="https://fangweilong.github.io/2018/04/20/idea%E8%AE%BE%E7%BD%AE%E5%88%9B%E5%BB%BA-java%E6%96%87%E4%BB%B6%E7%9A%84%E6%A8%A1%E6%9D%BF/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>打开路径</p>
<div><pre><code>File-Settings-Editor-Code style-File and Code Templates-Includea-File Header
</code></pre>
<div><span>1</span><br></div></div><p>如图所示<img src="https://img-blog.csdn.net/20180420111804681?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" /></p>
<p>我的模板是这个</p>
<div><pre><code>/**
  *@Description      
  *@author          ${USER}
  *@create          ${YEAR}-${MONTH}-${DAY} ${TIME}
  */  
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><p>下面附上内置的一些参数</p>
<div><pre><code>${PACKAGE_NAME} - 将在其中创建新类或接口的目标包的名称
${PROJECT_NAME} - 当前项目的名称。
${FILE_NAME} - 当前项目的名称。
${NAME} - 创建文件期间在“新建文件”对话框中指定的新文件的名称。
${USER} - 当前用户的登录名。
${DATE} - 当前系统日期。
${TIME} - 当前系统日期。
${YEAR} - 当前系统年份
${MONTH} - 当前系统月份
${DAY} - 当前系统天
${HOUR} - 当前系统小时
${MINUTE} - 当前系统分钟
${PRODUCT_NAME} - 将在其中创建文件的IDE的名称。
${MONTH_NAME_SHORT} - 月份名称的前3个字母。例如: 1月、2月等。
${MONTH_NAME_FULL} - 一个月的全名。例如: 1月、2月等。
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="idea"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-04-20T11:22:27.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">idea部分或整体java文件不编译为class文件，或编译后不是最新的</title>
    <id>/2018/03/08/idea%E9%83%A8%E5%88%86%E6%88%96%E6%95%B4%E4%BD%93java%E6%96%87%E4%BB%B6%E4%B8%8D%E7%BC%96%E8%AF%91%E4%B8%BAclass%E6%96%87%E4%BB%B6-%E6%88%96%E7%BC%96%E8%AF%91%E5%90%8E%E4%B8%8D%E6%98%AF%E6%9C%80%E6%96%B0%E7%9A%84/</id>
    <link href="https://fangweilong.github.io/2018/03/08/idea%E9%83%A8%E5%88%86%E6%88%96%E6%95%B4%E4%BD%93java%E6%96%87%E4%BB%B6%E4%B8%8D%E7%BC%96%E8%AF%91%E4%B8%BAclass%E6%96%87%E4%BB%B6-%E6%88%96%E7%BC%96%E8%AF%91%E5%90%8E%E4%B8%8D%E6%98%AF%E6%9C%80%E6%96%B0%E7%9A%84/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>PS：2018-03-08 10:11更新 修改编译的路径
原路径为WebRoot，修改为WebRoot/classes，否则会出现include会找不到jsp等问题</p>
<h2 id="_1-出现这个问题先检查一下输出路径"> <strong>1.出现这个问题先检查一下输出路径</strong></h2>
<div><pre><code>	    idea的class输出路径与eclipse是不一样的，idea默认的是在项目根目录下的out文件夹下。
</code></pre>
</div><h2 id="_2-如果你的是在out文件夹下找到了你的class文件并且都正确-那恭喜你不用往下看了"> 2.如果你的是在out文件夹下找到了你的class文件并且都正确，那恭喜你不用往下看了</h2>
<h2 id="_3-如果你在out文件下-但是部分或整体java都没编译的话-请按照截图修改你的编译输出路径。"> 3.如果你在out文件下，但是部分或整体java都没编译的话，请按照截图修改你的编译输出路径。</h2>
<p><img src="https://img-blog.csdnimg.cn/img_convert/5ed382af96fc5ec47a18166d761b17d6.png" alt="这里写图片描述" />
<img src="https://img-blog.csdnimg.cn/img_convert/277762d1d44661cc5a65a165712b91a4.png" alt="这里写图片描述" /></p>
<p>按照截图方式修改，路径为你的项目根目录下WebRoot/classes文件夹，重新编译以后就能看到最新的class文件。</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="idea"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-03-08T09:45:17.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">Navicat12连接Oracle失败，报错ORA-28547或者oraclelibraryisnot_loaded</title>
    <id>/2019/04/16/navicat12%E8%BF%9E%E6%8E%A5oracle%E5%A4%B1%E8%B4%A5-%E6%8A%A5%E9%94%99-ora-28547-%E6%88%96%E8%80%85-oracle-library-is-not-loaded/</id>
    <link href="https://fangweilong.github.io/2019/04/16/navicat12%E8%BF%9E%E6%8E%A5oracle%E5%A4%B1%E8%B4%A5-%E6%8A%A5%E9%94%99-ora-28547-%E6%88%96%E8%80%85-oracle-library-is-not-loaded/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="首先看一下两种错误"> <strong>首先看一下两种错误</strong></h2>
<p>1：ORA-28547
原因：navicate Primium版本的OCi和本地数据库的OCI版本不一致。
<img src="https://img-blog.csdnimg.cn/201904161009174.png" alt="在这里插入图片描述" />
2.oracle library is not loaded
其实就是说dll文件不能正确载入</p>
<p>**</p>
<h2 id="解决"> 解决：</h2>
<p>**
这两种问题其实都可以通过一种办法结局
<strong>详细步骤：</strong></p>
<ol>
<li>
<p>点击链接前往<a href="https://www.oracle.com/technetwork/database/database-technologies/instant-client/downloads/index.html" target="_blank" rel="noopener noreferrer">Oracle官网</a>进行下载</p>
</li>
<li>
<p>选择与自己系统相对应的版本点进去  <img src="https://img-blog.csdnimg.cn/20190416101522274.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
</li>
<li>
<p>千万记得勾选上同意协议，否则无法下载
<img src="https://img-blog.csdnimg.cn/20190416101603200.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
</li>
<li>
<p>下载自己对应的Oracle版本到本地，解压缩。我下的是11.2版本的如图所示</p>
</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20190416101750932.png" alt="在这里插入图片描述" />
5.  找到Navicat的安装目录
<img src="https://img-blog.csdnimg.cn/20190416101931123.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
6.这个时候你会发现你解压出来的包和你目录里面的文件夹名字是一样的。
这个时候我看很多博文是直接复制oci.dll文件，但其实是应该整个“instantclient_11_2”文件夹覆盖到Navicat安装目录
7.接下来就是去navicat里面更改OCI.dll文件的位置了。<img src="https://img-blog.csdnimg.cn/20190416102342639.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
接下来就ok了。如有疑问欢迎留言</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="navicat"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-04-16T10:25:25.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">tomcat使用log4j2打日志</title>
    <id>/2018/08/21/tomcat%E4%BD%BF%E7%94%A8log4j2%E6%89%93%E6%97%A5%E5%BF%97/</id>
    <link href="https://fangweilong.github.io/2018/08/21/tomcat%E4%BD%BF%E7%94%A8log4j2%E6%89%93%E6%97%A5%E5%BF%97/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p><strong>开始前准备</strong></p>
<ol>
<li>tomcat版本8.0.51
(下载地址：http://archive.apache.org/dist/tomcat/tomcat-8/v8.0.51/bin/apache-tomcat-8.0.51.tar.gz) 2018-05-09可以访问</li>
<li>tomcat日志扩展接口包
tomcat-juli.jar
tomcat-juli-adapters.jar
(下载地址：http://archive.apache.org/dist/tomcat/tomcat-8/v8.0.51/bin/extras/) 2018-05-09可以访问</li>
<li>log4j2版本2.3
log4j-core-2.3.jar
log4j-api-2.3.jar
log4j-1.2-api-2.3.jar
(下载地址：http://www.apache.org/dist/logging/log4j/2.3/apache-log4j-2.3-bin.zip) 2018-05-09可以访问
(三个jar都在bin压缩包里)</li>
<li>新建log4j2.xml</li>
</ol>
<div><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;Configuration status=&quot;info&quot;&gt;
    &lt;Properties&gt;
        &lt;Property name=&quot;logdir&quot;&gt;${sys:catalina.base}/logs&lt;/Property&gt;
        &lt;Property name=&quot;layout&quot;&gt;%d [%t] %-5p %c-%m%n&lt;/Property&gt;
    &lt;/Properties&gt;
    &lt;Appenders&gt;
        &lt;Console name=&quot;CONSOLE&quot; target=&quot;SYSTEM_OUT&quot;&gt;
            &lt;PatternLayout charset=&quot;UTF-8&quot; pattern=&quot;${layout}&quot; /&gt;
        &lt;/Console&gt;
        &lt;RollingFile name=&quot;CATALINA&quot; fileName=&quot;${logdir}/catalina.log&quot;
            filePattern=&quot;${logdir}/catalina.%d{yyyy-MM-dd}.log.gz&quot;&gt;
            &lt;PatternLayout charset=&quot;UTF-8&quot; pattern=&quot;${layout}&quot; /&gt;
            &lt;!-- DefaultRolloverStrategy属性如不设置，则默认为最多同一文件夹下7个文件，这里设置了20 --&gt;
            &lt;SizeBasedTriggeringPolicy size=&quot;50MB&quot; /&gt;
            &lt;DefaultRolloverStrategy max=&quot;20&quot; /&gt;
        &lt;/RollingFile&gt;
        &lt;RollingFile name=&quot;LOCALHOST&quot; fileName=&quot;${logdir}/localhost.log&quot;
            filePattern=&quot;${logdir}/localhost.%d{yyyy-MM-dd}-%i.log.gz&quot;&gt;
            &lt;PatternLayout charset=&quot;UTF-8&quot; pattern=&quot;${layout}&quot; /&gt;
            &lt;SizeBasedTriggeringPolicy size=&quot;50MB&quot; /&gt;
            &lt;DefaultRolloverStrategy max=&quot;20&quot; /&gt;
        &lt;/RollingFile&gt;
    &lt;/Appenders&gt;
    &lt;Loggers&gt;
        &lt;Logger
            name=&quot;org.apache.catalina.core.ContainerBase.[Catalina].[localhost]&quot;
            level=&quot;info&quot;&gt;
            &lt;AppenderRef ref=&quot;LOCALHOST&quot; /&gt;
        &lt;/Logger&gt;
        &lt;Root level=&quot;info&quot;&gt;
            &lt;AppenderRef ref=&quot;CATALINA&quot; /&gt;
            &lt;AppenderRef ref=&quot;CONSOLE&quot; /&gt;
        &lt;/Root&gt;
    &lt;/Loggers&gt;
&lt;/Configuration&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br></div></div><p><strong>操作</strong></p>
<ol>
<li>jar包
三个 log4j2 的jar包 和 tomcat-juli-adapters.jar放到 tomact 目录下的lib文件夹下
tomcat-juli.jar 替换tomcat目录下 bin 文件夹下的同名文件</li>
<li>配置文件
删除或重命名tomact目录下conf文件夹下的logging.properties文件
log4j2.xml，放到tomcat目录下lib文件夹下</li>
</ol>
<p>启动tomcat，在tomcat目录下logs文件夹下查看日志文件</p>
<p>原文转载自：https://blog.csdn.net/Json0108/article/details/80258933</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="tomcat"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-08-21T11:00:56.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">tomcat布置多个项目</title>
    <id>/2018/06/21/tomcat%E5%B8%83%E7%BD%AE%E5%A4%9A%E4%B8%AA%E9%A1%B9%E7%9B%AE/</id>
    <link href="https://fangweilong.github.io/2018/06/21/tomcat%E5%B8%83%E7%BD%AE%E5%A4%9A%E4%B8%AA%E9%A1%B9%E7%9B%AE/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>常规的操作是一个Tomcat下只有一个项目，但是需求总是千变万化的，今天就遇到了一个服务器上需要布置两个项目。</p>
<p>详解步骤：
1、将两个项目打包放入tomcat的webapps目录下（这个步骤就不用说了，直接复制class还是war什么的随你开心）
2、修改tomcat的server.xml文件，原来的代码如下：</p>
<div><pre><code>      &lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot;
            unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;
	   &lt;!--中间还有一大串注释掉的不用管--&gt;
     &lt;/Host&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br></div></div><div><pre><code>	我们修改后的应该是这样:	
</code></pre>
</div><div><pre><code>       &lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;
		&lt;!--注意这行--&gt;
        &lt;Context path=&quot;root&quot; docBase=&quot;/ROOT&quot;/&gt;
       &lt;/Host&gt;
       
       &lt;Host name=&quot;myspring.com&quot;  appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;
            &lt;!--注意这行--&gt;
        &lt;Context path=&quot;omey&quot; docBase=&quot;/omey&quot;/&gt;
       &lt;/Host&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br></div></div><div><pre><code>	*注:  path表示项目名，即我们在浏览器访问时localhost:8080/项目名，如果为空则表示不加项目名。最多只能有一个path为空，不能有多个为空否则会报错
		  docBase表示项目路径，即你实际对应这个项目名的项目所在的目录 *
</code></pre>
</div><p>3.重启Tomcat，这时候应该就能访问了。</p>
<div><pre><code>如果你在重启Tomcat过程中报有关
</code></pre>
</div><h2 id="webapprootkey"> &quot;webAppRootKey&quot;</h2>
<p>的错，则修改你项目中web.xml中</p>
<div><pre><code>&lt;context-param&gt;
    &lt;param-name&gt;webAppRootKey&lt;/param-name&gt;
	&lt;!--注意这块，修改名字就行，修改为和你web.xml中一致的项目名--&gt;
	&lt;param-value&gt;omey&lt;/param-value&gt;
  &lt;/context-param&gt;
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="tomcat"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-06-21T16:02:00.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">windows-terminal-settings.json的一些个人配置与注释</title>
    <id>/2020/07/08/windows-terminal-settings-json%E7%9A%84%E4%B8%80%E4%BA%9B%E4%B8%AA%E4%BA%BA%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%B3%A8%E9%87%8A/</id>
    <link href="https://fangweilong.github.io/2020/07/08/windows-terminal-settings-json%E7%9A%84%E4%B8%80%E4%BA%9B%E4%B8%AA%E4%BA%BA%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%B3%A8%E9%87%8A/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="版本-1-0-1811-0"> 版本：1.0.1811.0</h2>
<div><pre><code>//该文件最初由Windows终端1.0.1811.0生成
//在更新的版本中它应该仍然可用，但是更新的版本可能有额外的设置、帮助文本或更改，除非您清除此文件并让我们为您生成一个新文件，否则您将看不到这些更改。

//要查看默认设置，按住alt键同时点击“设置”按钮。
//有关这些设置的文档，请参见:https://aka.ms/terminal-documentation
<span>{</span>
    <span>"<span>$schema</span>"</span><span>:</span> <span>"https://aka.ms/terminal-profiles-schema"</span>,

    <span>"defaultProfile"</span><span>:</span> <span>"{574e775e-4f2a-5b96-ac1e-a2962a402336}"</span>,

    //你可以在这里添加更多的全局应用设置。
    //要了解更多关于全局设置的信息，请访问https://aka.ms/terminal-global-settings

    //如果启用，选择将自动复制到剪贴板。
    <span>"copyOnSelect"</span><span>:</span> false,

    //如果启用，格式化的数据也会复制到剪贴板
    <span>"copyFormatting"</span><span>:</span> false,

    //配置文件指定要执行的命令与关于它应该如何外观和感觉的信息配对。
    //每一个都将出现在“New Tab”下拉菜单中，
    //可以通过命令行<span>' wt.exe -p xxx '</span>调用。
    //要了解关于配置文件的更多信息，请访问https://aka.ms/terminal-profile-settings
    <span>"profiles"</span><span>:</span>
    <span>{</span>
        //将你想应用于所有配置文件的设置放在这里。
        <span>"defaults"</span><span>:</span>
        <span>{</span>
            //启动毛玻璃
            <span>"useAcrylic"</span>:true,
            //毛玻璃透明度
            <span>"acrylicOpacity"</span>:0.6,
            //关闭窗口的时候退出所有挂载的程序
            <span>"closeOnExit"</span> <span>:</span> true,
            //输入的时候自动滚动到输入位置 
            <span>"snapOnInput"</span> <span>:</span> <span>true</span> ,
            //字体 等距跟纱
            <span>"fontFace"</span><span>:</span><span>"Sarasa Mono T SC"</span>,
            //字体大小
            <span>"fontSize"</span>:14,
            //如果设置为 true，则关闭多个选项卡处于打开状态的窗口时，需要确认。 如果设置为 false，则关闭多个选项卡处于打开状态的窗口时，不需要确认。
            <span>"confirmCloseAllTabs"</span>:true,
            //此方法控制呈现器中文本的消除锯齿方式。 请注意，更改此设置将需要启动新的终端实例。
            <span>"antialiasingMode"</span><span>:</span><span>"cleartype"</span>,
            //光标颜色
            <span>"cursorColor"</span><span>:</span><span>"#06ed50"</span>,
            //启动时的窗口位置，以x,y坐标形式
            <span>"initialPosition"</span><span>:</span><span>"0,0"</span>
        <span>}</span>,
        <span>"list"</span><span>:</span>
        <span>[</span>
            
            <span>{</span>
                <span>"guid"</span><span>:</span> <span>"{574e775e-4f2a-5b96-ac1e-a2962a402336}"</span>,
                <span>"name"</span><span>:</span> <span>"PowerShell 7"</span>,
                <span>"source"</span><span>:</span> <span>"Windows.Terminal.PowershellCore"</span>,
                <span>"hidden"</span><span>:</span> false,
                <span>"colorScheme"</span><span>:</span><span>"Dracula MOD"</span>
            <span>}</span>,
            <span>{</span>
                <span>"guid"</span><span>:</span> <span>"{61c54bbd-c2c6-5271-96e7-009a87ff44bf}"</span>,
                <span>"name"</span><span>:</span> <span>"Windows PowerShell"</span>,
                <span>"commandline"</span><span>:</span> <span>"powershell.exe"</span>,
                <span>"hidden"</span><span>:</span> <span>false</span>
            <span>}</span>,
            <span>{</span>
                <span>"guid"</span><span>:</span> <span>"{0caa0dad-35be-5f56-a8ff-afceeeaa6101}"</span>,
                <span>"name"</span><span>:</span> <span>"命令提示符"</span>,
                <span>"commandline"</span><span>:</span> <span>"cmd.exe"</span>,
                <span>"hidden"</span><span>:</span> <span>false</span>
            <span>}</span>,
            <span>{</span>
                <span>"guid"</span><span>:</span> <span>"{07b52e3e-de2c-5db4-bd2d-ba144ed6c273}"</span>,
                <span>"hidden"</span><span>:</span> false,
                <span>"name"</span><span>:</span> <span>"Ubuntu-20.04"</span>,
                <span>"source"</span><span>:</span> <span>"Windows.Terminal.Wsl"</span>
            <span>}</span>,
            <span>{</span>
                <span>"guid"</span><span>:</span> <span>"{b453ae62-4e3d-5e58-b989-0a998ec441b8}"</span>,
                <span>"hidden"</span><span>:</span> false,
                <span>"name"</span><span>:</span> <span>"Azure Cloud Shell"</span>,
                <span>"source"</span><span>:</span> <span>"Windows.Terminal.Azure"</span>
            <span>}</span>
        <span>]</span>
    <span>}</span>,

    //在数组中添加自定义的配色方案。
    //要了解更多配色方案，请访问https://aka.ms/terminal-colorscheme
    //开源配色方案： https://github.com/mbadolato/iTerm2-Color-Schemes<span>#cobalt-neon</span>
    <span>"schemes"</span><span>:</span> <span>[</span>
        <span>{</span>
            <span>"name"</span> <span>:</span> <span>"Dracula MOD"</span>,
            <span>"background"</span> <span>:</span> <span>"#2c2d36"</span>,
            <span>"black"</span> <span>:</span> <span>"#000000"</span>,
            <span>"blue"</span> <span>:</span> <span>"#001d7e"</span>,
            <span>"brightBlack"</span> <span>:</span> <span>"#abb7da"</span>,
            <span>"brightBlue"</span> <span>:</span> <span>"#D6ACFF"</span>,
            <span>"brightCyan"</span> <span>:</span> <span>"#A4FFFF"</span>,
            <span>"brightGreen"</span> <span>:</span> <span>"#69FF94"</span>,
            <span>"brightPurple"</span> <span>:</span> <span>"#FF92DF"</span>,
            <span>"brightRed"</span> <span>:</span> <span>"#fa9090"</span>,
            <span>"brightWhite"</span> <span>:</span> <span>"#FFFFFF"</span>,
            <span>"brightYellow"</span> <span>:</span> <span>"#FFFFA5"</span>,
            <span>"cyan"</span> <span>:</span> <span>"#8BE9FD"</span>,
            <span>"foreground"</span> <span>:</span> <span>"#F8F8F2"</span>,
            <span>"green"</span> <span>:</span> <span>"#32df5a"</span>,
            <span>"purple"</span> <span>:</span> <span>"#FF79C6"</span>,
            <span>"red"</span> <span>:</span> <span>"#fa9c4f"</span>,
            <span>"white"</span> <span>:</span> <span>"#F8F8F2"</span>,
            <span>"yellow"</span> <span>:</span> <span>"#F1FA8C"</span>
        <span>}</span>,
        <span>{</span>
           <span>"name"</span><span>:</span><span>"Atom"</span>,
            <span>"foreground"</span><span>:</span> <span>"#c5c8c6"</span>,
            <span>"background"</span><span>:</span> <span>"#161719"</span>,
            <span>"black"</span><span>:</span> <span>"#000000"</span>,
            <span>"blue"</span><span>:</span> <span>"#85befd"</span>,
            <span>"cyan"</span><span>:</span> <span>"#85befd"</span>,
            <span>"green"</span><span>:</span> <span>"#87c38a"</span>,
            <span>"magenta"</span><span>:</span> <span>"#b9b6fc"</span>,
            <span>"red"</span><span>:</span> <span>"#fd5ff1"</span>,
            <span>"white"</span><span>:</span> <span>"#e0e0e0"</span>,
            <span>"yellow"</span><span>:</span> <span>"#ffd7b1"</span>,
            <span>"brightBlack"</span><span>:</span> <span>"#000000"</span>,
            <span>"brightBlue"</span><span>:</span> <span>"#96cbfe"</span>,
            <span>"brightCyan"</span><span>:</span> <span>"#85befd"</span>,
            <span>"brightGreen"</span><span>:</span> <span>"#94fa36"</span>,
            <span>"brightMagenta"</span><span>:</span> <span>"#b9b6fc"</span>,
            <span>"brightRed"</span><span>:</span> <span>"#fd5ff1"</span>,
            <span>"brightWhite"</span><span>:</span> <span>"#e0e0e0"</span>,
            <span>"brightYellow"</span><span>:</span> <span>"#f5ffa8"</span>
        
        <span>}</span>
    <span>]</span>,

    // Add custom keybindings to this array.
    // To unbind a key combination from your defaults.json, <span>set</span> the <span>command</span> to <span>"unbound"</span><span>.</span>
    // To learn <span>more</span> about keybindings, visit https://aka.ms/terminal-keybindings
    <span>"keybindings"</span><span>:</span>
    <span>[</span>
        // Copy and <span>paste</span> are bound to Ctrl+Shift+C and Ctrl+Shift+V <span>in</span> your defaults.json.
        // These two lines additionally <span>bind</span> them to Ctrl+C and Ctrl+V.
        // To learn <span>more</span> about selection, visit https://aka.ms/terminal-selection
        <span>{</span> <span>"command"</span><span>:</span> <span>{</span><span>"action"</span><span>:</span> <span>"copy"</span>, <span>"singleLine"</span><span>:</span> <span>false</span> <span>}</span>, <span>"keys"</span><span>:</span> <span>"ctrl+c"</span> <span>}</span>,
        <span>{</span> <span>"command"</span><span>:</span> <span>"paste"</span>, <span>"keys"</span><span>:</span> <span>"ctrl+v"</span> <span>}</span>,

        // Press Ctrl+Shift+F to <span>open</span> the search box
        <span>{</span> <span>"command"</span><span>:</span> <span>"find"</span>, <span>"keys"</span><span>:</span> <span>"ctrl+shift+f"</span> <span>}</span>,

        // Press Alt+Shift+D to <span>open</span> a new pane.
        // - <span>"split"</span><span>:</span> <span>"auto"</span> makes this pane <span>open</span> <span>in</span> the direction that provides the <span>most</span> surface area.
        // - <span>"splitMode"</span><span>:</span> <span>"duplicate"</span> makes the new pane use the focused pane's profile.
        // To learn <span>more</span> about panes, visit https://aka.ms/terminal-panes
        <span>{</span> <span>"command"</span><span>:</span> <span>{</span> <span>"action"</span><span>:</span> <span>"splitPane"</span>, <span>"split"</span><span>:</span> <span>"auto"</span>, <span>"splitMode"</span><span>:</span> <span>"duplicate"</span> <span>}</span>, <span>"keys"</span><span>:</span> <span>"alt+shift+d"</span> <span>}</span>
    <span>]</span>
<span>}</span>

</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br><span>119</span><br><span>120</span><br><span>121</span><br><span>122</span><br><span>123</span><br><span>124</span><br><span>125</span><br><span>126</span><br><span>127</span><br><span>128</span><br><span>129</span><br><span>130</span><br><span>131</span><br><span>132</span><br><span>133</span><br><span>134</span><br><span>135</span><br><span>136</span><br><span>137</span><br><span>138</span><br><span>139</span><br><span>140</span><br><span>141</span><br><span>142</span><br><span>143</span><br><span>144</span><br><span>145</span><br><span>146</span><br><span>147</span><br><span>148</span><br><span>149</span><br><span>150</span><br><span>151</span><br><span>152</span><br><span>153</span><br><span>154</span><br><span>155</span><br><span>156</span><br><span>157</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="window"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2020-07-08T11:36:04.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">windows开机自启动jarnginxredis等</title>
    <id>/2019/01/11/windows%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8jar-nginx-redis%E7%AD%89/</id>
    <link href="https://fangweilong.github.io/2019/01/11/windows%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8jar-nginx-redis%E7%AD%89/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<ol>
<li>
<p>jar包需要命令行启动，所以做了一个bat+vbe启动的操作
1.1 新建一个文本文件，并修改文件后缀为.bat。我这里文件命名为startup.bat
<code>java -jar test.jar</code>
1.2 其实通过1.1就已经可以启动程序，但是为了防止到生产环境的时候cmd窗口还一直在所以就需要此步骤。需要cmd窗口或者不需要cmd窗口都可以通过更改最后的参数  1   来控制。新建一个文本文档并修改后缀名为.vbe</p>
<div><pre><code>   set ws=wscript.createobject(&quot;wscript.shell&quot;)  
   ws.run &quot;startup.bat&quot;,1  
</code></pre>
<div><span>1</span><br><span>2</span><br></div></div><p>1.3 创建好这两个文件以后，启动只需要双击
<em>PS:这两个文件需要跟jar包放在同级目录下</em>，否则需要加入cd 命令</p>
</li>
<li>
<p>创建快捷方式
jar包只需要创建.vbe的快捷方式，nginx创建.exe的快捷方式
即只需要创建执行程序的就可</p>
</li>
<li>
<p>在文档管理器中打开目录</p>
<p>C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp
把步骤2中的创建出来的快捷方式全部放到这个目录下即可实现开机启动。
<img src="https://img-blog.csdnimg.cn/20190111130559489.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R1dGlhbjIwMDA=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>
</li>
</ol>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="window"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-01-11T13:08:09.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">vuepress中markdown各种用法</title>
    <id>/2021/07/02/vuepress%E4%B8%ADmarkdown%E5%90%84%E7%A7%8D%E7%94%A8%E6%B3%95/</id>
    <link href="https://fangweilong.github.io/2021/07/02/vuepress%E4%B8%ADmarkdown%E5%90%84%E7%A7%8D%E7%94%A8%E6%B3%95/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="vuepress中markdown各种用法"> vuepress中markdown各种用法</h1>
<h2 id="基本都是vuepress官网的指南-为了方便自己查看"> 基本都是vuepress官网的指南，为了方便自己查看</h2>
<hr>
<h2 id="github风格的表格"> github风格的表格</h2>
<h3 id="输入"> 输入</h3>
<div><pre><code>| Tables        | Are           | Cool  |
| ------------- |:-------------:| -----:|
| col 3 is      | right-aligned | $1600 |
| col 2 is      | centered      |   $12 |
| zebra stripes | are neat      |    $1 |
</code></pre>
</div><h3 id="输出"> 输出</h3>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align:center">Are</th>
<th style="text-align:right">Cool</th>
</tr>
</thead>
<tbody>
<tr>
<td>col 3 is</td>
<td style="text-align:center">right-aligned</td>
<td style="text-align:right">$1600</td>
</tr>
<tr>
<td>col 2 is</td>
<td style="text-align:center">centered</td>
<td style="text-align:right">$12</td>
</tr>
<tr>
<td>zebra stripes</td>
<td style="text-align:center">are neat</td>
<td style="text-align:right">$1</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="emoji"> Emoji</h2>
<h3 id="输入-2"> 输入</h3>
<div><pre><code>:tada: :100:
</code></pre>
</div><h3 id="输出-2"> 输出</h3>
<p>🎉 💯</p>
<h3 id="所有的emoji"> <a href="https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/full.json" target="_blank" rel="noopener noreferrer">所有的emoji</a></h3>
<hr>
<h2 id="自定义容器"> 自定义容器</h2>
<h3 id="输入-3"> 输入</h3>
<div><pre><code>::: tip
这是一个提示
:::

::: warning
这是一个警告
:::

::: danger
这是一个危险警告
:::

::: details
这是一个详情块，在 IE / Edge 中不生效
:::
</code></pre>
</div><h3 id="输出-3"> 输出</h3>
<div><p>提示</p>
<p>这是一个提示</p>
</div>
<div><p>注意</p>
<p>这是一个警告</p>
</div>
<div><p>警告</p>
<p>这是一个危险警告</p>
</div>
<details><summary>DETAILS</summary>
<p>这是一个详情块，在 IE / Edge 中不生效</p>
</details>
<details><summary>或者自定义标题</summary>
<p>这是一个详情块，在 IE / Edge 中不生效</p>
</details>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="vuepress"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-07-02T16:25:57.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">无需软件通过修改注册表实现wind10透明状态栏效果</title>
    <id>/2021/08/10/%E6%97%A0%E9%9C%80%E8%BD%AF%E4%BB%B6%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9%E6%B3%A8%E5%86%8C%E8%A1%A8%E5%AE%9E%E7%8E%B0wind10%E9%80%8F%E6%98%8E%E7%8A%B6%E6%80%81%E6%A0%8F%E6%95%88%E6%9E%9C/</id>
    <link href="https://fangweilong.github.io/2021/08/10/%E6%97%A0%E9%9C%80%E8%BD%AF%E4%BB%B6%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9%E6%B3%A8%E5%86%8C%E8%A1%A8%E5%AE%9E%E7%8E%B0wind10%E9%80%8F%E6%98%8E%E7%8A%B6%E6%80%81%E6%A0%8F%E6%95%88%E6%9E%9C/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h2 id="原帖"> 原帖</h2>
<p>在52pojie上看到的一个帖子，不过原帖中需要手动修改注册表的值。<a href="https://www.52pojie.cn/forum.php?mod=viewthread&amp;tid=1461968&amp;highlight=%D7%B4%CC%AC%C0%B8" target="_blank" rel="noopener noreferrer">点击我跳转</a></p>
<h2 id="代码"> 代码</h2>
<p>我给做成了bat文件，双击调用</p>
<div><pre><code>@REM 在 HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced 路径下添加一个 REG_DWORD类型的TaskbarAcrylicOpacity文件，值为 0
reg add HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced /v TaskbarAcrylicOpacity /t REG_DWORD /d 0

@REM 重启任务管理器
taskkill /f /im explorer.exe &amp; start explorer.exe
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br></div></div><h2 id="效果"> 效果</h2>
<p><a href="https://imgtu.com/i/fGfzxU" target="_blank" rel="noopener noreferrer"><img src="https://z3.ax1x.com/2021/08/10/fGfzxU.png" alt="fGfzxU.png" /></a></p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="window"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-08-10T09:55:12.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">git-.gitignore通用配置文件</title>
    <id>/2019/08/30/git-gitignore%E9%80%9A%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</id>
    <link href="https://fangweilong.github.io/2019/08/30/git-gitignore%E9%80%9A%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<div><pre><code>## .gitignore for Grails 1.2 and 1.3

### maven  ###
target/
*.releaseBackup

### gradle ###
gradle
gradlew
gradlew.bat

## hack for graddle wrapper
!wrapper/*.jar
!**/wrapper/*.jar

### java ###
classes/
*.class
*.war
*.ear
 
###  ide ### 
/.classpath
/.launch
/.project
/.settings
/*.launch
/*.tmproj
/ivy*
/eclipse
.apt_generated
.factorypath
.springBeans

### idea ###
.idea
*.iml
*.ipr
*.iws

### eclipse ###
*.pydevproject
.project
.cproject
.metadata
.buildpath
bin/**
tmp/**
tmp/**/*
*.tmp
*.bak
*.swp
*~.nib
local.properties
.classpath
.settings/
.loadpath
*.launch
.externalToolBuilders/

### NetBeans ###
nbproject/private/
build/
nbbuild/
#dist/
nbdist/
.nb-gradle/
ticket-static/.sass-cache/
 
### hsql 数据库文件 ###
/prodDb.*
*Db.properties
*Db.script
 
### 日志 ###
/stacktrace.log
/test/reports
/logs
*.log
*.log.*
applogo/
 
### 较旧的插件安装位置 ###
/plugins
/web-app/plugins
/web-app/WEB-INF/classes
 
### 临时文件 ###
target/
out/
build/

### windows ###
Thumbs.db
ehthumbs.db
Desktop.ini
 
### linux ###
!.gitignore
*~
 
## mac ###
.DS_Store
.AppleDouble
.LSOverride
Icon
.Spotlight-V100
.Trashes

### npm yarn ###
node_modules/
/dist/
package-lock.json
npm-debug.log*
yarn-debug.log*
yarn-error.log*
yarn-lock.json
 
# Thumbnails
._*

### 其他 ###
*.iws
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br><span>119</span><br><span>120</span><br><span>121</span><br><span>122</span><br><span>123</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="git"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-08-30T17:32:36.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">kindeditor富文本编辑器通过参数初始化限制上传图片等功能</title>
    <id>/2018/01/31/kindeditor%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E9%80%9A%E8%BF%87%E5%8F%82%E6%95%B0%E5%88%9D%E5%A7%8B%E5%8C%96%E9%99%90%E5%88%B6%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E7%AD%89%E5%8A%9F%E8%83%BD/</id>
    <link href="https://fangweilong.github.io/2018/01/31/kindeditor%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%E9%80%9A%E8%BF%87%E5%8F%82%E6%95%B0%E5%88%9D%E5%A7%8B%E5%8C%96%E9%99%90%E5%88%B6%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E7%AD%89%E5%8A%9F%E8%83%BD/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>我们某些时候需要在kindeditor富文本编辑器上限制用户不能使用某些功能，虽然可以通过class来限制，但是这样毫无疑问很low。
无意翻到了官网的一篇初始化编辑器的参数。</p>
<p>详情点击↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
<a href="http://kindeditor.net/docs/option.html#items" target="_blank" rel="noopener noreferrer">点击跳转官网原文</a>
详情点击↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</p>
<p>使用过程中请注意项目中使用的版本，有些参数在新版中才能使用。
如有不明白的欢迎留言讨论。</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="javascript"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-01-31T21:04:10.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">中国城市中心点坐标</title>
    <id>/2019/05/30/%E4%B8%AD%E5%9B%BD%E5%9F%8E%E5%B8%82%E4%B8%AD%E5%BF%83%E7%82%B9%E5%9D%90%E6%A0%87/</id>
    <link href="https://fangweilong.github.io/2019/05/30/%E4%B8%AD%E5%9B%BD%E5%9F%8E%E5%B8%82%E4%B8%AD%E5%BF%83%E7%82%B9%E5%9D%90%E6%A0%87/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<p>原数据：https://www.cnblogs.com/hhhz/p/7591852.html</p>
<p>以下为经过整理的地区数据，可以直接复制到json中使用</p>
<div><pre><code>&#39;上海&#39;: [121.487899486, 31.24916171],
    &#39;临沧&#39;: [100.092612914, 23.8878061038],
    &#39;丽江&#39;: [100.229628399, 26.8753510895],
    &#39;保山&#39;: [99.1779956133, 25.1204891962],
    &#39;大理白族自治州&#39;: [100.223674789, 25.5968996394],
    &#39;德宏傣族景颇族自治州&#39;: [98.5894342874, 24.441239663],
    &#39;怒江傈僳族自治州&#39;: [98.8599320425, 25.8606769782],
    &#39;文山壮族苗族自治州&#39;: [104.246294318, 23.3740868504],
    &#39;昆明&#39;: [102.714601139, 25.0491531005],
    &#39;昭通&#39;: [103.725020656, 27.3406329636],
    &#39;普洱&#39;: [100.98005773, 22.7887777801],
    &#39;曲靖&#39;: [103.782538888, 25.5207581429],
    &#39;楚雄彝族自治州&#39;: [101.529382239, 25.0663556742],
    &#39;玉溪&#39;: [102.545067892, 24.3704471344],
    &#39;红河哈尼族彝族自治州&#39;: [103.384064757, 23.3677175165],
    &#39;西双版纳傣族自治州&#39;: [100.803038275, 22.0094330022],
    &#39;迪庆藏族自治州&#39;: [99.7136815989, 27.8310294612],
    &#39;乌兰察布&#39;: [113.112846391, 41.0223629468],
    &#39;乌海&#39;: [106.831999097, 39.6831770068],
    &#39;兴安盟&#39;: [122.048166514, 46.0837570652],
    &#39;包头&#39;: [109.846238532, 40.6471194257],
    &#39;呼伦贝尔&#39;: [119.760821794, 49.2016360546],
    &#39;呼和浩特&#39;: [111.66035052, 40.8283188731],
    &#39;巴彦淖尔&#39;: [107.42380672, 40.7691799024],
    &#39;赤峰&#39;: [118.930761192, 42.2971123203],
    &#39;通辽&#39;: [122.260363263, 43.633756073],
    &#39;鄂尔多斯&#39;: [109.993706251, 39.8164895606],
    &#39;锡林郭勒盟&#39;: [116.027339689, 43.9397048423],
    &#39;阿拉善盟&#39;: [105.695682871, 38.8430752644],
    &#39;北京&#39;: [116.395645038, 39.9299857781],
    &#39;台中&#39;: [119.337634104, 26.0911937119],
    &#39;台北&#39;: [114.130474436, 22.3748329286],
    &#39;台南&#39;: [121.360525873, 38.9658447898],
    &#39;嘉义&#39;: [114.246701335, 22.7288657203],
    &#39;高雄&#39;: [111.590952812, 21.9464822541],
    &#39;吉林&#39;: [126.564543989, 43.8719883344],
    &#39;四平&#39;: [124.391382074, 43.1755247011],
    &#39;延边朝鲜族自治州&#39;: [129.485901958, 42.8964136037],
    &#39;松原&#39;: [124.832994532, 45.1360489701],
    &#39;白城&#39;: [122.840776679, 45.6210862752],
    &#39;白山&#39;: [126.435797675, 41.945859397],
    &#39;辽源&#39;: [125.133686052, 42.9233026191],
    &#39;通化&#39;: [125.942650139, 41.7363971299],
    &#39;长春&#39;: [125.313642427, 43.8983376071],
    &#39;乐山&#39;: [103.760824239, 29.6009576111],
    &#39;内江&#39;: [105.073055992, 29.5994615348],
    &#39;凉山彝族自治州&#39;: [102.259590803, 27.8923929037],
    &#39;南充&#39;: [106.105553984, 30.8009651682],
    &#39;宜宾&#39;: [104.633019062, 28.7696747963],
    &#39;巴中&#39;: [106.757915842, 31.8691891592],
    &#39;广元&#39;: [105.81968694, 32.4410401584],
    &#39;广安&#39;: [106.635720331, 30.4639838879],
    &#39;德阳&#39;: [104.402397818, 31.1311396527],
    &#39;成都&#39;: [104.067923463, 30.6799428454],
    &#39;攀枝花&#39;: [101.722423152, 26.5875712571],
    &#39;泸州&#39;: [105.443970289, 28.8959298039],
    &#39;甘孜藏族自治州&#39;: [101.969232063, 30.0551441144],
    &#39;眉山&#39;: [103.841429563, 30.0611150799],
    &#39;绵阳&#39;: [104.705518975, 31.5047012581],
    &#39;自贡&#39;: [104.776071339, 29.3591568895],
    &#39;资阳&#39;: [104.635930302, 30.132191434],
    &#39;达州&#39;: [107.494973447, 31.2141988589],
    &#39;遂宁&#39;: [105.564887792, 30.5574913504],
    &#39;阿坝藏族羌族自治州&#39;: [102.228564689, 31.9057628583],
    &#39;雅安&#39;: [103.009356466, 29.9997163371],
    &#39;天津&#39;: [117.210813092, 39.1439299033],
    &#39;中卫&#39;: [105.196754199, 37.5211241916],
    &#39;吴忠&#39;: [106.208254199, 37.9935610029],
    &#39;固原&#39;: [106.285267996, 36.0215234807],
    &#39;石嘴山&#39;: [106.379337202, 39.0202232836],
    &#39;银川&#39;: [106.206478608, 38.5026210119],
    &#39;亳州&#39;: [115.787928245, 33.8712105653],
    &#39;六安&#39;: [116.505252683, 31.7555583552],
    &#39;合肥&#39;: [117.282699092, 31.8669422607],
    &#39;安庆&#39;: [117.058738772, 30.5378978174],
    &#39;宣城&#39;: [118.752096311, 30.9516423543],
    &#39;宿州&#39;: [116.988692412, 33.6367723858],
    &#39;池州&#39;: [117.494476772, 30.6600192482],
    &#39;淮北&#39;: [116.791447429, 33.9600233054],
    &#39;淮南&#39;: [117.018638863, 32.6428118237],
    &#39;滁州&#39;: [118.324570351, 32.3173505954],
    &#39;芜湖&#39;: [118.384108423, 31.3660197875],
    &#39;蚌埠&#39;: [117.357079866, 32.9294989067],
    &#39;铜陵&#39;: [117.819428729, 30.9409296947],
    &#39;阜阳&#39;: [115.820932259, 32.9012113306],
    &#39;马鞍山&#39;: [118.515881847, 31.6885281589],
    &#39;黄山&#39;: [118.293569632, 29.7344348562],
    &#39;东营&#39;: [118.583926333, 37.4871211553],
    &#39;临沂&#39;: [118.340768237, 35.0724090744],
    &#39;威海&#39;: [122.093958366, 37.5287870813],
    &#39;德州&#39;: [116.328161364, 37.4608259263],
    &#39;日照&#39;: [119.507179943, 35.4202251931],
    &#39;枣庄&#39;: [117.279305383, 34.8078830784],
    &#39;泰安&#39;: [117.089414917, 36.1880777589],
    &#39;济南&#39;: [117.024967066, 36.6827847272],
    &#39;济宁&#39;: [116.600797625, 35.4021216643],
    &#39;淄博&#39;: [118.059134278, 36.8046848542],
    &#39;滨州&#39;: [117.968292415, 37.4053139418],
    &#39;潍坊&#39;: [119.142633823, 36.7161148731],
    &#39;烟台&#39;: [121.30955503, 37.5365615629],
    &#39;聊城&#39;: [115.986869139, 36.4558285147],
    &#39;莱芜&#39;: [117.684666912, 36.2336541336],
    &#39;菏泽&#39;: [115.463359775, 35.2624404961],
    &#39;青岛&#39;: [120.384428184, 36.1052149013],
    &#39;临汾&#39;: [111.538787596, 36.0997454436],
    &#39;吕梁&#39;: [111.143156602, 37.527316097],
    &#39;大同&#39;: [113.290508673, 40.1137444997],
    &#39;太原&#39;: [112.550863589, 37.890277054],
    &#39;忻州&#39;: [112.727938829, 38.461030573],
    &#39;晋中&#39;: [112.7385144, 37.6933615268],
    &#39;晋城&#39;: [112.867332758, 35.4998344672],
    &#39;朔州&#39;: [112.479927727, 39.3376719662],
    &#39;运城&#39;: [111.006853653, 35.0388594798],
    &#39;长治&#39;: [113.120292086, 36.2016643857],
    &#39;阳泉&#39;: [113.569237602, 37.8695294932],
    &#39;东莞&#39;: [113.763433991, 23.0430238154],
    &#39;中山&#39;: [113.422060021, 22.5451775145],
    &#39;云浮&#39;: [112.050945959, 22.9379756855],
    &#39;佛山&#39;: [113.134025635, 23.0350948405],
    &#39;广州&#39;: [113.307649675, 23.1200491021],
    &#39;惠州&#39;: [114.41065808, 23.1135398524],
    &#39;揭阳&#39;: [116.379500855, 23.5479994669],
    &#39;梅州&#39;: [116.126403098, 24.304570606],
    &#39;汕头&#39;: [116.728650288, 23.3839084533],
    &#39;汕尾&#39;: [115.372924289, 22.7787305002],
    &#39;江门&#39;: [113.078125341, 22.5751167835],
    &#39;河源&#39;: [114.713721476, 23.7572508505],
    &#39;深圳&#39;: [114.025973657, 22.5460535462],
    &#39;清远&#39;: [113.040773349, 23.6984685504],
    &#39;湛江&#39;: [110.365067263, 21.2574631038],
    &#39;潮州&#39;: [116.630075991, 23.6618116765],
    &#39;珠海&#39;: [113.562447026, 22.2569146461],
    &#39;肇庆&#39;: [112.47965337, 23.0786632829],
    &#39;茂名&#39;: [110.931245331, 21.6682257188],
    &#39;阳江&#39;: [111.977009756, 21.8715173045],
    &#39;韶关&#39;: [113.594461107, 24.8029603119],
    &#39;北海&#39;: [109.122627919, 21.472718235],
    &#39;南宁&#39;: [108.297233556, 22.8064929356],
    &#39;崇左&#39;: [107.357322038, 22.4154552965],
    &#39;来宾&#39;: [109.231816505, 23.7411659265],
    &#39;柳州&#39;: [109.42240181, 24.3290533525],
    &#39;桂林&#39;: [110.260920147, 25.262901246],
    &#39;梧州&#39;: [111.30547195, 23.4853946367],
    &#39;河池&#39;: [108.069947709, 24.6995207829],
    &#39;玉林&#39;: [110.151676316, 22.6439736084],
    &#39;百色&#39;: [106.631821404, 23.9015123679],
    &#39;贵港&#39;: [109.613707557, 23.1033731644],
    &#39;贺州&#39;: [111.552594179, 24.4110535471],
    &#39;钦州&#39;: [108.638798056, 21.9733504653],
    &#39;防城港&#39;: [108.351791153, 21.6173984705],
    &#39;乌鲁木齐&#39;: [87.5649877411, 43.8403803472],
    &#39;伊犁哈萨克自治州&#39;: [81.2978535304, 43.9222480963],
    &#39;克孜勒苏柯尔克孜自治州&#39;: [76.1375644775, 39.7503455778],
    &#39;克拉玛依&#39;: [84.8811801861, 45.5943310667],
    &#39;博尔塔拉蒙古自治州&#39;: [82.0524362672, 44.9136513743],
    &#39;吐鲁番地区&#39;: [89.1815948657, 42.9604700169],
    &#39;和田地区&#39;: [79.9302386372, 37.1167744927],
    &#39;哈密地区&#39;: [93.5283550928, 42.8585963324],
    &#39;喀什地区&#39;: [75.9929732675, 39.4706271887],
    &#39;塔城地区&#39;: [82.9748805837, 46.7586836297],
    &#39;昌吉回族自治州&#39;: [87.2960381257, 44.0070578985],
    &#39;自治区直辖&#39;: [85.6148993383, 42.1270009576],
    &#39;阿克苏地区&#39;: [80.2698461793, 41.1717309015],
    &#39;阿勒泰地区&#39;: [88.1379154871, 47.8397444862],
    &#39;南京&#39;: [118.778074408, 32.0572355018],
    &#39;南通&#39;: [120.873800951, 32.0146645408],
    &#39;宿迁&#39;: [118.296893379, 33.9520497337],
    &#39;常州&#39;: [119.981861013, 31.7713967447],
    &#39;徐州&#39;: [117.188106623, 34.2715534311],
    &#39;扬州&#39;: [119.427777551, 32.4085052546],
    &#39;无锡&#39;: [120.305455901, 31.5700374519],
    &#39;泰州&#39;: [119.919606016, 32.4760532748],
    &#39;淮安&#39;: [119.030186365, 33.6065127393],
    &#39;盐城&#39;: [120.148871818, 33.3798618771],
    &#39;苏州&#39;: [120.619907115, 31.317987368],
    &#39;连云港&#39;: [119.173872217, 34.601548967],
    &#39;镇江&#39;: [119.455835405, 32.2044094436],
    &#39;上饶&#39;: [117.955463877, 28.4576225539],
    &#39;九江&#39;: [115.999848022, 29.7196395261],
    &#39;南昌&#39;: [115.893527546, 28.6895780001],
    &#39;吉安&#39;: [114.992038711, 27.1138476502],
    &#39;宜春&#39;: [114.400038672, 27.8111298958],
    &#39;抚州&#39;: [116.360918867, 27.9545451703],
    &#39;新余&#39;: [114.947117417, 27.8223215586],
    &#39;景德镇&#39;: [117.186522625, 29.3035627684],
    &#39;萍乡&#39;: [113.859917033, 27.639544223],
    &#39;赣州&#39;: [114.935909079, 25.8452955363],
    &#39;鹰潭&#39;: [117.035450186, 28.2413095972],
    &#39;保定&#39;: [115.494810169, 38.886564548],
    &#39;唐山&#39;: [118.183450598, 39.6505309225],
    &#39;廊坊&#39;: [116.703602223, 39.5186106251],
    &#39;张家口&#39;: [114.89378153, 40.8111884911],
    &#39;承德&#39;: [117.933822456, 40.9925210525],
    &#39;沧州&#39;: [116.863806476, 38.2976153503],
    &#39;石家庄&#39;: [114.522081844, 38.0489583146],
    &#39;秦皇岛&#39;: [119.604367616, 39.9454615659],
    &#39;衡水&#39;: [115.686228653, 37.7469290459],
    &#39;邢台&#39;: [114.520486813, 37.0695311969],
    &#39;邯郸&#39;: [114.482693932, 36.6093079285],
    &#39;三门峡&#39;: [111.181262093, 34.7833199411],
    &#39;信阳&#39;: [114.085490993, 32.1285823075],
    &#39;南阳&#39;: [112.542841901, 33.0114195691],
    &#39;周口&#39;: [114.654101942, 33.6237408181],
    &#39;商丘&#39;: [115.641885688, 34.4385886402],
    &#39;安阳&#39;: [114.351806508, 36.1102667222],
    &#39;平顶山&#39;: [113.300848978, 33.7453014565],
    &#39;开封&#39;: [114.351642118, 34.8018541758],
    &#39;新乡&#39;: [113.912690161, 35.3072575577],
    &#39;洛阳&#39;: [112.447524769, 34.6573678177],
    &#39;漯河&#39;: [114.0460614, 33.5762786885],
    &#39;濮阳&#39;: [115.026627441, 35.7532978882],
    &#39;焦作&#39;: [113.211835885, 35.234607555],
    &#39;省直辖&#39;: [113.486804058, 34.157183768],
    &#39;许昌&#39;: [113.83531246, 34.0267395887],
    &#39;郑州&#39;: [113.64964385, 34.7566100641],
    &#39;驻马店&#39;: [114.049153547, 32.9831581541],
    &#39;鹤壁&#39;: [114.297769838, 35.7554258742],
    &#39;丽水&#39;: [119.929575843, 28.4562995521],
    &#39;台州&#39;: [121.440612936, 28.6682832857],
    &#39;嘉兴&#39;: [120.760427699, 30.7739922396],
    &#39;宁波&#39;: [121.579005973, 29.8852589659],
    &#39;杭州&#39;: [120.219375416, 30.2592444615],
    &#39;温州&#39;: [120.690634734, 28.002837594],
    &#39;湖州&#39;: [120.137243163, 30.8779251557],
    &#39;绍兴&#39;: [120.592467386, 30.0023645805],
    &#39;舟山&#39;: [122.169872098, 30.0360103026],
    &#39;衢州&#39;: [118.875841652, 28.9569104475],
    &#39;金华&#39;: [119.652575704, 29.1028991054],
    &#39;三亚&#39;: [109.522771281, 18.2577759149],
    &#39;三沙&#39;: [112.350383075, 16.840062894],
    &#39;海口&#39;: [110.330801848, 20.022071277],
    &#39;省直辖&#39;: [109.733755488, 19.1805008013],
    &#39;十堰&#39;: [110.801228917, 32.6369943395],
    &#39;咸宁&#39;: [114.300060592, 29.8806567577],
    &#39;孝感&#39;: [113.935734392, 30.9279547842],
    &#39;宜昌&#39;: [111.310981092, 30.732757818],
    &#39;恩施土家族苗族自治州&#39;: [109.491923304, 30.2858883166],
    &#39;武汉&#39;: [114.316200103, 30.5810841269],
    &#39;省直辖&#39;: [112.410562192, 31.2093162501],
    &#39;荆州&#39;: [112.241865807, 30.332590523],
    &#39;荆门&#39;: [112.217330299, 31.0426112029],
    &#39;襄阳&#39;: [112.250092848, 32.2291685915],
    &#39;鄂州&#39;: [114.895594041, 30.3844393228],
    &#39;随州&#39;: [113.379358364, 31.7178576082],
    &#39;黄冈&#39;: [114.906618047, 30.4461089379],
    &#39;黄石&#39;: [115.050683164, 30.2161271277],
    &#39;娄底&#39;: [111.996396357, 27.7410733023],
    &#39;岳阳&#39;: [113.146195519, 29.3780070755],
    &#39;常德&#39;: [111.653718137, 29.0121488552],
    &#39;张家界&#39;: [110.481620157, 29.1248893532],
    &#39;怀化&#39;: [109.986958796, 27.5574829012],
    &#39;株洲&#39;: [113.131695341, 27.8274329277],
    &#39;永州&#39;: [111.614647686, 26.4359716468],
    &#39;湘潭&#39;: [112.935555633, 27.835095053],
    &#39;湘西土家族苗族自治州&#39;: [109.7457458, 28.3179507937],
    &#39;益阳&#39;: [112.366546645, 28.5880877799],
    &#39;衡阳&#39;: [112.583818811, 26.8981644154],
    &#39;邵阳&#39;: [111.461525404, 27.2368112449],
    &#39;郴州&#39;: [113.037704468, 25.7822639757],
    &#39;长沙&#39;: [112.979352788, 28.2134782309],
    &#39;无堂区划分区域&#39;: [113.557519102, 22.2041179884],
    &#39;澳门半岛&#39;: [113.566432335, 22.1950041592],
    &#39;澳门离岛&#39;: [113.557519102, 22.2041179884],
    &#39;临夏回族自治州&#39;: [103.215249178, 35.5985143488],
    &#39;兰州&#39;: [103.823305441, 36.064225525],
    &#39;嘉峪关&#39;: [98.2816345853, 39.8023973267],
    &#39;天水&#39;: [105.736931623, 34.5843194189],
    &#39;定西&#39;: [104.626637601, 35.5860562418],
    &#39;平凉&#39;: [106.688911157, 35.55011019],
    &#39;庆阳&#39;: [107.644227087, 35.7268007545],
    &#39;张掖&#39;: [100.459891869, 38.939320297],
    &#39;武威&#39;: [102.640147343, 37.9331721429],
    &#39;甘南藏族自治州&#39;: [102.917442486, 34.9922111784],
    &#39;白银&#39;: [104.171240904, 36.5466817062],
    &#39;酒泉&#39;: [98.5084145062, 39.7414737682],
    &#39;金昌&#39;: [102.208126263, 38.5160717995],
    &#39;陇南&#39;: [104.934573406, 33.3944799729],
    &#39;三明&#39;: [117.642193934, 26.2708352794],
    &#39;南平&#39;: [118.181882949, 26.6436264742],
    &#39;厦门&#39;: [118.103886046, 24.4892306125],
    &#39;宁德&#39;: [119.54208215, 26.6565274192],
    &#39;泉州&#39;: [118.600362343, 24.901652384],
    &#39;漳州&#39;: [117.676204679, 24.5170647798],
    &#39;福州&#39;: [119.330221107, 26.0471254966],
    &#39;莆田&#39;: [119.077730964, 25.4484501367],
    &#39;龙岩&#39;: [117.017996739, 25.0786854335],
    &#39;山南地区&#39;: [91.7506438744, 29.2290269317],
    &#39;拉萨&#39;: [91.111890896, 29.6625570621],
    &#39;日喀则地区&#39;: [88.8914855677, 29.2690232039],
    &#39;昌都地区&#39;: [97.18558158, 31.1405756319],
    &#39;林芝地区&#39;: [94.3499854582, 29.6669406258],
    &#39;那曲地区&#39;: [92.0670183689, 31.4806798301],
    &#39;阿里地区&#39;: [81.1076686895, 30.4045565883],
    &#39;六盘水&#39;: [104.85208676, 26.5918660603],
    &#39;安顺&#39;: [105.928269966, 26.2285945777],
    &#39;毕节&#39;: [105.333323371, 27.4085621313],
    &#39;贵阳&#39;: [106.709177096, 26.6299067414],
    &#39;遵义&#39;: [106.931260316, 27.6999613771],
    &#39;铜仁&#39;: [109.168558028, 27.6749026906],
    &#39;黔东南苗族侗族自治州&#39;: [107.985352573, 26.5839917665],
    &#39;黔南布依族苗族自治州&#39;: [107.52320511, 26.2645359974],
    &#39;黔西南布依族苗族自治州&#39;: [104.900557798, 25.0951480559],
    &#39;丹东&#39;: [124.338543115, 40.1290228266],
    &#39;大连&#39;: [121.593477781, 38.9487099383],
    &#39;抚顺&#39;: [123.929819767, 41.8773038296],
    &#39;朝阳&#39;: [120.446162703, 41.5718276679],
    &#39;本溪&#39;: [123.77806237, 41.3258376266],
    &#39;沈阳&#39;: [123.432790922, 41.8086447835],
    &#39;盘锦&#39;: [122.07322781, 41.141248023],
    &#39;营口&#39;: [122.233391371, 40.6686510665],
    &#39;葫芦岛&#39;: [120.860757645, 40.7430298813],
    &#39;辽阳&#39;: [123.172451205, 41.2733392656],
    &#39;铁岭&#39;: [123.854849615, 42.2997570121],
    &#39;锦州&#39;: [121.147748738, 41.1308788759],
    &#39;阜新&#39;: [121.660822129, 42.0192501071],
    &#39;鞍山&#39;: [123.007763329, 41.1187436822],
    &#39;重庆&#39;: [106.530635013, 29.5446061089],
    &#39;咸阳&#39;: [108.707509278, 34.345372996],
    &#39;商洛&#39;: [109.934208154, 33.8739073951],
    &#39;安康&#39;: [109.038044563, 32.70437045],
    &#39;宝鸡&#39;: [107.170645452, 34.3640808097],
    &#39;延安&#39;: [109.500509757, 36.6033203523],
    &#39;榆林&#39;: [109.745925744, 38.2794392401],
    &#39;汉中&#39;: [107.045477629, 33.0815689782],
    &#39;渭南&#39;: [109.483932697, 34.5023579758],
    &#39;西安&#39;: [108.953098279, 34.2777998978],
    &#39;铜川&#39;: [108.968067013, 34.9083676964],
    &#39;果洛藏族自治州&#39;: [100.223722769, 34.4804845846],
    &#39;海东地区&#39;: [102.085206987, 36.5176101677],
    &#39;海北藏族自治州&#39;: [100.879802174, 36.9606541011],
    &#39;海南藏族自治州&#39;: [100.624066094, 36.2843638038],
    &#39;海西蒙古族藏族自治州&#39;: [97.3426254153, 37.3737990706],
    &#39;玉树藏族自治州&#39;: [97.0133161374, 33.0062399097],
    &#39;西宁&#39;: [101.76792099, 36.640738612],
    &#39;黄南藏族自治州&#39;: [102.007600308, 35.5228515517],
    &#39;九龙&#39;: [114.173291988, 22.3072458588],
    &#39;新界&#39;: [114.146701965, 22.4274312754],
    &#39;香港岛&#39;: [114.183870524, 22.2721034276],
    &#39;七台河&#39;: [131.019048047, 45.7750053686],
    &#39;伊春&#39;: [128.910765978, 47.7346850751],
    &#39;佳木斯&#39;: [130.284734586, 46.8137796047],
    &#39;双鸭山&#39;: [131.17140174, 46.6551020625],
    &#39;哈尔滨&#39;: [126.657716855, 45.7732246332],
    &#39;大兴安岭地区&#39;: [124.19610419, 51.991788968],
    &#39;大庆&#39;: [125.02183973, 46.59670902],
    &#39;牡丹江&#39;: [129.608035396, 44.5885211528],
    &#39;绥化&#39;: [126.989094572, 46.646063927],
    &#39;鸡西&#39;: [130.941767273, 45.3215398866],
    &#39;鹤岗&#39;: [130.292472051, 47.3386659037],
    &#39;黑河&#39;: [127.500830295, 50.2506900907],
    &#39;齐齐哈尔&#39;: [123.987288942, 47.3476998134],
</code></pre>
<div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br><span>55</span><br><span>56</span><br><span>57</span><br><span>58</span><br><span>59</span><br><span>60</span><br><span>61</span><br><span>62</span><br><span>63</span><br><span>64</span><br><span>65</span><br><span>66</span><br><span>67</span><br><span>68</span><br><span>69</span><br><span>70</span><br><span>71</span><br><span>72</span><br><span>73</span><br><span>74</span><br><span>75</span><br><span>76</span><br><span>77</span><br><span>78</span><br><span>79</span><br><span>80</span><br><span>81</span><br><span>82</span><br><span>83</span><br><span>84</span><br><span>85</span><br><span>86</span><br><span>87</span><br><span>88</span><br><span>89</span><br><span>90</span><br><span>91</span><br><span>92</span><br><span>93</span><br><span>94</span><br><span>95</span><br><span>96</span><br><span>97</span><br><span>98</span><br><span>99</span><br><span>100</span><br><span>101</span><br><span>102</span><br><span>103</span><br><span>104</span><br><span>105</span><br><span>106</span><br><span>107</span><br><span>108</span><br><span>109</span><br><span>110</span><br><span>111</span><br><span>112</span><br><span>113</span><br><span>114</span><br><span>115</span><br><span>116</span><br><span>117</span><br><span>118</span><br><span>119</span><br><span>120</span><br><span>121</span><br><span>122</span><br><span>123</span><br><span>124</span><br><span>125</span><br><span>126</span><br><span>127</span><br><span>128</span><br><span>129</span><br><span>130</span><br><span>131</span><br><span>132</span><br><span>133</span><br><span>134</span><br><span>135</span><br><span>136</span><br><span>137</span><br><span>138</span><br><span>139</span><br><span>140</span><br><span>141</span><br><span>142</span><br><span>143</span><br><span>144</span><br><span>145</span><br><span>146</span><br><span>147</span><br><span>148</span><br><span>149</span><br><span>150</span><br><span>151</span><br><span>152</span><br><span>153</span><br><span>154</span><br><span>155</span><br><span>156</span><br><span>157</span><br><span>158</span><br><span>159</span><br><span>160</span><br><span>161</span><br><span>162</span><br><span>163</span><br><span>164</span><br><span>165</span><br><span>166</span><br><span>167</span><br><span>168</span><br><span>169</span><br><span>170</span><br><span>171</span><br><span>172</span><br><span>173</span><br><span>174</span><br><span>175</span><br><span>176</span><br><span>177</span><br><span>178</span><br><span>179</span><br><span>180</span><br><span>181</span><br><span>182</span><br><span>183</span><br><span>184</span><br><span>185</span><br><span>186</span><br><span>187</span><br><span>188</span><br><span>189</span><br><span>190</span><br><span>191</span><br><span>192</span><br><span>193</span><br><span>194</span><br><span>195</span><br><span>196</span><br><span>197</span><br><span>198</span><br><span>199</span><br><span>200</span><br><span>201</span><br><span>202</span><br><span>203</span><br><span>204</span><br><span>205</span><br><span>206</span><br><span>207</span><br><span>208</span><br><span>209</span><br><span>210</span><br><span>211</span><br><span>212</span><br><span>213</span><br><span>214</span><br><span>215</span><br><span>216</span><br><span>217</span><br><span>218</span><br><span>219</span><br><span>220</span><br><span>221</span><br><span>222</span><br><span>223</span><br><span>224</span><br><span>225</span><br><span>226</span><br><span>227</span><br><span>228</span><br><span>229</span><br><span>230</span><br><span>231</span><br><span>232</span><br><span>233</span><br><span>234</span><br><span>235</span><br><span>236</span><br><span>237</span><br><span>238</span><br><span>239</span><br><span>240</span><br><span>241</span><br><span>242</span><br><span>243</span><br><span>244</span><br><span>245</span><br><span>246</span><br><span>247</span><br><span>248</span><br><span>249</span><br><span>250</span><br><span>251</span><br><span>252</span><br><span>253</span><br><span>254</span><br><span>255</span><br><span>256</span><br><span>257</span><br><span>258</span><br><span>259</span><br><span>260</span><br><span>261</span><br><span>262</span><br><span>263</span><br><span>264</span><br><span>265</span><br><span>266</span><br><span>267</span><br><span>268</span><br><span>269</span><br><span>270</span><br><span>271</span><br><span>272</span><br><span>273</span><br><span>274</span><br><span>275</span><br><span>276</span><br><span>277</span><br><span>278</span><br><span>279</span><br><span>280</span><br><span>281</span><br><span>282</span><br><span>283</span><br><span>284</span><br><span>285</span><br><span>286</span><br><span>287</span><br><span>288</span><br><span>289</span><br><span>290</span><br><span>291</span><br><span>292</span><br><span>293</span><br><span>294</span><br><span>295</span><br><span>296</span><br><span>297</span><br><span>298</span><br><span>299</span><br><span>300</span><br><span>301</span><br><span>302</span><br><span>303</span><br><span>304</span><br><span>305</span><br><span>306</span><br><span>307</span><br><span>308</span><br><span>309</span><br><span>310</span><br><span>311</span><br><span>312</span><br><span>313</span><br><span>314</span><br><span>315</span><br><span>316</span><br><span>317</span><br><span>318</span><br><span>319</span><br><span>320</span><br><span>321</span><br><span>322</span><br><span>323</span><br><span>324</span><br><span>325</span><br><span>326</span><br><span>327</span><br><span>328</span><br><span>329</span><br><span>330</span><br><span>331</span><br><span>332</span><br><span>333</span><br><span>334</span><br><span>335</span><br><span>336</span><br><span>337</span><br><span>338</span><br><span>339</span><br><span>340</span><br><span>341</span><br><span>342</span><br><span>343</span><br><span>344</span><br><span>345</span><br><span>346</span><br><span>347</span><br><span>348</span><br><span>349</span><br><span>350</span><br><span>351</span><br></div></div>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="tomcat"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2019-05-30T16:29:02.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">开发中常用的工具归类</title>
    <id>/2018/03/22/%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E5%BD%92%E7%B1%BB/</id>
    <link href="https://fangweilong.github.io/2018/03/22/%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E5%BD%92%E7%B1%BB/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<table>
<thead>
<tr>
<th>分类</th>
<th>工具</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td>数据库</td>
<td>Navicat pro</td>
<td>可以连接多种数据库，使用更快捷内存占用小</td>
<td>付费，功能没有官网的工具多</td>
</tr>
<tr>
<td>数据库</td>
<td>MongoDB Compass Community</td>
<td>mongo数据库图形化工具，单文件直接使用</td>
<td>速度慢，英文</td>
</tr>
<tr>
<td>开发工具</td>
<td>idea</td>
<td>功能齐全，使用方便</td>
<td>付费，内存占用大，初始配置繁琐</td>
</tr>
<tr>
<td>版本控制</td>
<td>TrtoiseSVN</td>
<td>有中文，说明简单，配置简单</td>
<td>暂未发现</td>
</tr>
<tr>
<td>版本控制</td>
<td>TrtoiseGit</td>
<td>有中文，说明简单，配置简单</td>
<td>暂未发现</td>
</tr>
<tr>
<td>服务器工具</td>
<td>IIS</td>
<td>微软官方工具，功能强大，自带中文</td>
<td>占用大，配置繁琐</td>
</tr>
<tr>
<td>服务器工具</td>
<td>Tomcat</td>
<td>开源服务器工具，配置简单，占用小，操作简单</td>
<td>开发环境中经常重启容易崩，其他暂未发现</td>
</tr>
<tr>
<td>远程工具</td>
<td>mstc</td>
<td>本身自带，操作简单，中文界面</td>
<td>功能少，容易崩，只适用window</td>
</tr>
<tr>
<td>远程工具</td>
<td>xshell</td>
<td>界面直观，功能齐全</td>
<td>付费。免费版本有窗口限制。只适用于linux</td>
</tr>
<tr>
<td>浏览器</td>
<td>chrome</td>
<td>市场份额高，适配好，插件多</td>
<td>内存占用高，同步麻烦</td>
</tr>
<tr>
<td>浏览器</td>
<td>edge</td>
<td>基于chromium，适配chrome，插件多，同步快</td>
<td>内存占用也不少</td>
</tr>
</tbody>
</table>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <category term="其它"/>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2018-03-22T13:55:01.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">个人介绍</title>
    <id>/about/</id>
    <link href="https://fangweilong.github.io/about/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[<h1 id="个人介绍"> 个人介绍</h1>
<p>这是一个个人介绍页</p>
]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-06-23T00:00:00.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">项目主页</title>
    <id>/home/</id>
    <link href="https://fangweilong.github.io/home/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <author>
      <name>fang wei long</name>
    </author>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-08-11T05:45:34.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">幻灯片页</title>
    <id>/slides/</id>
    <link href="https://fangweilong.github.io/slides/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <content type="html"><![CDATA[
<i>Not supported content</i>]]></content>
    <author>
      <name>fang wei long</name>
    </author>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-08-11T05:45:34.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
  <entry>
    <title type="html">房伟龙的日常</title>
    <id>/</id>
    <link href="https://fangweilong.github.io/"/>
    <updated>2021-08-11T05:45:34.000Z</updated>
    <author>
      <name>fang wei long</name>
    </author>
    <contributor>
      <name>fang wei long</name>
    </contributor>
    <published>2021-08-11T05:45:34.000Z</published>
    <rights>Copyright by fang wei long</rights>
  </entry>
</feed>